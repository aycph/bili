var yi=Object.defineProperty,wi=Object.defineProperties;var bi=Object.getOwnPropertyDescriptors;var xn=Object.getOwnPropertySymbols;var ki=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable;var ft=Math.pow,Ks=(e,t,s)=>t in e?yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,T=(e,t)=>{for(var s in t||(t={}))ki.call(t,s)&&Ks(e,s,t[s]);if(xn)for(var s of xn(t))Ci.call(t,s)&&Ks(e,s,t[s]);return e},ke=(e,t)=>wi(e,bi(t));var le=(e,t,s)=>(Ks(e,typeof t!="symbol"?t+"":t,s),s);var q=(e,t,s)=>new Promise((a,n)=>{var o=u=>{try{r(s.next(u))}catch(v){n(v)}},i=u=>{try{r(s.throw(u))}catch(v){n(v)}},r=u=>u.done?a(u.value):Promise.resolve(u.value).then(o,i);r((s=s.apply(e,t)).next())});import{e as ha,i as pa,A as Ai,X as $i,d as ae,r as A,o as ze,a as j,c as M,b as E,g as Ei,f as l,h as d,j as c,k as N,l as F,n as K,m as O,w as z,p as x,v as Ue,q as de,t as D,F as X,T as yt,s as pn,u as je,x as Fi,y as Si,z as ln,B as fe,C as Ee,D as Ln,E as Bi,G as Ii,H as We,I as Di,J as Bs,K as as,L as cn,M as It,N as fn,O as fa,P as At,Q as bs,R as wt,S as ls,U as Vs,V as Ti,W as Xt,Y as mn,Z as ne,_ as ct,$ as xi,a0 as Li,a1 as $t,a2 as Me,a3 as Pi,a4 as Ri,a5 as Ms,a6 as Vi,a7 as Zs,a8 as Mi,a9 as R,aa as Ni,ab as Oi,ac as ma,ad as Ui,ae as ga,af as Qe,ag as Ge,ah as Hi,ai as Wi,aj as jt,ak as ya,al as es,am as ji,an as wa,ao as ba,ap as zi,aq as Dt,ar as ka,as as qi,at as Qi,au as ks,av as Ca,aw as at,ax as Gi,ay as bt,az as cs,aA as Ji,aB as Yi,aC as Aa,aD as $a,aE as Ns,aF as Ki,aG as Zi,aH as Xi,aI as eo,aJ as to,aK as so,aL as no,aM as ao,aN as io,aO as oo,aP as ro,aQ as lo,aR as co}from"./vendor.eb302177.js";function Ny(){import("data:text/javascript,")}const uo=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};uo();const Pn="__css-map__",Rn="map",Vn="light_u",_o="light",vo="theme_style",Xs=typeof window=="undefined";var ho={get:(e,t)=>{if(typeof t!="string"&&!Xs&&(t=document.cookie),typeof t=="object"&&Xs&&(t=t&&t.headers&&t.headers.cookie),!t)return"";const s=t.split("; ");let a="";for(let n=0;n<s.length;n++){const o=s[n].split("=");o[0]===e&&(a=o[1])}return a},set:(e,t,s)=>{if(Xs)return;s=Object.assign({},{path:"/"},s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString());let a="";for(const n in s)!s[n]||(a+="; "+n,s[n]!==!0&&(a+="="+s[n].split(";")[0]));document.cookie=e+"="+t+a}};const po=e=>{const t=e||ho.get(vo,document.cookie);fo(t)};function fo(e){if(document.getElementById(Pn))return;const t=e||_o,s=document.getElementsByTagName("head")[0],a=[Rn,Vn,t];for(let n of a){const o=document.createElement("link");o.rel="stylesheet",o.href=mo(n),n!==Rn&&n!==Vn&&(o.id=Pn),s.insertBefore(o,s.firstChild)}}function mo(e){return`//s1.hdslb.com/bfs/static/jinkela/long/laputa-css/${e}.css`}const qe=typeof window=="undefined",go=e=>toString.call(e)==="[object Array]",Ea=e=>e!==null&&typeof e=="object",yo=e=>toString.call(e)==="[object Date]",wo=e=>Ea(e)&&typeof e.then=="function",bo=e=>e&&typeof e=="function",ko=qe?null:window.requestIdleCallback||function(e){const t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})},1)},Co=(e,t)=>{if(/^http/.test(t))return t;const s=n=>(/^http/.test(n)||(n=`${qe?"http:":window.location.protocol}//${n}`.replace(/\/\/\/\//g,"//").replace(/\/\/\//g,"//")),n);if(!e||/^\/\//.test(t))return s(t);const a=`${e.replace(/http(s)?:/,"").replace(/\//g,"")}/${t}`.replace(/\/\//g,"/");return s(a)},Mn=e=>encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]"),gn=(e,t)=>{const s=[];Object.keys(t).forEach(n=>{let o=t[n];o===null||typeof o=="undefined"||(go(o)?n=n+"[]":o=[o],o.forEach(i=>{yo(i)?i=i.toISOString():Ea(i)&&(i=JSON.stringify(i)),s.push(Mn(n)+"="+Mn(i))}))});const a=s.join("&");if(a){const n=e.indexOf("#");n!==-1&&(e=e.slice(0,n)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e},Ao=e=>{var s;const t=(s=e==null?void 0:e.headers)==null?void 0:s["Content-Type"];if((!t||t==="application/json")&&(e.body=JSON.stringify(e.body)),t==="application/x-www-form-urlencoded"){if(e.isFormArray){e.body=JSON.stringify(e.body);return}e.body=gn("",e.body).slice(1)}},$o=(e,t)=>{let s="";if(qe&&!t)return s;const a=t||document.cookie;if(!a)return s;const n=a.split(";"),o=new RegExp(`^${e}=`);for(let i=0;i<n.length;i++){const r=n[i].trim();if(o.test(r)){s=r.split("=")[1];break}}return s},Fa=e=>{const t=T({},e);return delete t.ctx,delete t.params,delete t.headers,Object.keys(t).forEach(s=>{bo(t[s])&&delete t[s]}),t},Sa=(e,t)=>{const s=t.paramsMap?e.split("?")[0]:e;return qe?s.replace("https","http"):s},Eo=(e,t,s)=>{var i;if(!t.preload)return;const a=qe?(i=t.ctx)==null?void 0:i[is]:window[is];if(!a)return;const n=Sa(e,t),o=Fa(t);if(qe){let r;for(let u=0;u<a.length;u++){const{request:v}=a[u];if(v.url===n&&pa(v.config,o)){a[u].response=s,r=!0;break}}r||a.push({request:{url:n,config:o},response:s})}else localStorage.setItem("abc-v1","")},un={},Fo=(e,t)=>{if(!(!t.cacheable||!qe)&&!!un[e])return T({},un[e])},So=(e,t,s)=>{!t.cacheable||!qe||(un[e]=T({},s))},Bo=(e,t)=>{var i;if(!t.preload)return;const s=qe?(i=t.ctx)==null?void 0:i[is]:window[is];if(!s)return;let a;const n=Sa(e,t),o=Fa(t);for(let r=0;r<s.length;r++){const{request:u,response:v}=s[r];if(Nn(u.url)===Nn(n)&&pa(u.config,o)){a=v,qe||s.splice(r,1);break}}return a},Nn=e=>e.replace(/^http(s)?:/,""),Ba="//api.bilibili.com",is="__INITIAL_DATA__",Io="__SERVER_CONFIG__",Do=e=>{var t,s,a,n;if(!qe){if(e.config.encWbi){const o=ha(e.config.params||{},(t=e.config)!=null&&t.encWbiKeys?(s=e.config)==null?void 0:s.encWbiKeys:null);o&&(e.url=gn(e.url,o),e.url=e.url.replace(/(\/x\/[\w-_]+\/)/,"$1wbi/"))}return e}if(new RegExp(Ba).test(e.url)&&(e.config.headers.referer="http://www.bilibili.com"),e.config.encode&&((a=e.config.ctx)==null?void 0:a.requestCo)&&(e.url=e.config.ctx.requestCo(e.url)),e.config.com2co&&(e.url=e.url.replace(".com/",".co/")),e.config.discovery&&((n=e.config.ctx)==null?void 0:n.sUrl)){const o=new URL(e.url);e.url=e.config.ctx.sUrl[e.config.discovery]+o.pathname}return e},To=(e,t,s,a)=>{if(!s.ok){e([s,null]),a(t,s);return}const n=t.config.responseType||"json";s[n]().then(o=>{if(qe||(o==null?void 0:o.code)===-352&&(s==null?void 0:s.headers.get("x-bili-gaia-vvoucher"))&&(o.data={v_voucher:s.headers.get("x-bili-gaia-vvoucher")}),o.code!==void 0&&o.code)e([o,null]);else{const i=o.data||o;Eo(t.url,t.config,i),So(t.url,t.config,i),e([null,i])}a(t,o)})},xo=()=>({startSpan(e,t){return{finish(){},setTag(s,a){}}},inject(e,t,s){}}),Lo=(e,t,s)=>{var i,r;const a=((i=s.ctx)==null?void 0:i.tracer)||xo(),n=(r=s.ctx)!=null&&r.tracerRootSpan?{childOf:s.ctx.tracerRootSpan}:{},o=a.startSpan(e,n);return a.inject(o,"http_headers",s.headers),o.setTag("http_url",t),o.setTag("span.kind","client"),o.setTag("component","fetch"),o},Po=qe?350:1e4,Ro={baseURL:"",timeout:Po,credentials:"include",onRequest:e=>e,onResponse:To},Ia=class{constructor(e={}){le(this,"defaults");le(this,"_req");le(this,"_techPbCodeRep");this.asyncDataKey=is,this.serverConfigKey=Io,this.defaults=T(T({},Ro),e),this._techPbCodeRep=!1,typeof fetch=="function"&&typeof window!="undefined"?this._req=fetch.bind(window):this._req=()=>{throw new Error("no request function")}}create(e={}){return new Ia(e)}$get(e,t={},s){let a;return s?a=ke(T({},s),{params:t}):t.params?a=t:a={params:t},a.method="GET",a.params&&(e=gn(e,a.params)),this._send(e,a)}$post(e,t={},s){let a;return s?a=ke(T({},s),{body:t}):t.body?a=t:a={body:t},a.method="POST",a.withCSRF&&(a.body=a.body||{},a.body.csrf=$o("bili_jct")),Ao(a),this._send(e,a)}get(){var e=arguments;return new Promise((t,s)=>q(this,null,function*(){const[a,n]=yield this.$get(...e);if(a){s(a);return}t(n)}))}post(){var e=arguments;return new Promise((t,s)=>q(this,null,function*(){const[a,n]=yield this.$post(...e);if(a){s(a);return}t(n)}))}once(e,t,s){if(!e||!(e instanceof Element))return;const a=()=>{var o,i;const n=(((i=(o=window==null?void 0:window.navigator)==null?void 0:o.connection)==null?void 0:i.effectiveType)||"4g").match(/\d+/);n&&n[0]<4||(ko(s),e.removeEventListener(t,a))};e.addEventListener(t,a)}getConfig(e){var t;if(!qe)return(t=window[this.serverConfigKey])==null?void 0:t[e]}setRequestfn(e){if(typeof e!="function")throw new Error("set request fn must be a function");this._req=e}setTechPbCodeReport(e){this._techPbCodeRep=!!e}_send(e,t){const s=T({},t),a=Co(this.defaults.baseURL,e);return new Promise(n=>{var o;try{const i=((o=s==null?void 0:s.ctx)==null?void 0:o.headers)||{};delete i.host,delete i["accept-encoding"],s.headers=T(T({Accept:"application/json, text/plain, */*"},i),s.headers||{}),s.credentials=s.credentials||this.defaults.credentials;const r=Lo("_sendUrl",a,s),u=Fo(a,s);if(u){r.finish(),n([null,u]);return}let v=!1;const f=Bo(a,s),h=s.timeout||this.defaults.timeout,_=s.onRequest||this.defaults.onRequest,p=s.onResponse||this.defaults.onResponse,b=S=>{let y;const m=Ai,w=new m,B=setTimeout(()=>{if(w.abort(),v=!0,S){r.setTag("error",!0),n([`request ${a} TIMEOUT`,null]);return}r.setTag("retry_url",a),b(!0)},h);if(f)if(wo(f))y=f;else{clearTimeout(B),r.finish(),n([null,f]);return}if(!y)if(_){const g=_({url:a,config:s});y=this._req(g.url,ke(T({},g.config),{signal:w.signal}))}else y=this._req(a,ke(T({},s),{signal:w.signal}));const $=(g,C)=>{var k,L,Y,I,U,Q,te,G;!qe&&this._techPbCodeRep&&(window==null?void 0:window.__biliMirror__)&&((G=$i)==null||G({type:(C==null?void 0:C.ok)===!1?"error":"custom",msg:{api:(k=g==null?void 0:g.url)!=null?k:"",code:(Y=(L=C==null?void 0:C.code)!=null?L:C==null?void 0:C.status)!=null?Y:"",msg:(U=(I=C==null?void 0:C.message)!=null?I:C==null?void 0:C.statusText)!=null?U:"",params:(te=(Q=g==null?void 0:g.config)==null?void 0:Q.params)!=null?te:{}}},{isBatch:(C==null?void 0:C.ok)!==!1}))};y.then(g=>{clearTimeout(B),!(!S&&v)&&(p(n,{url:a,config:s},g,$),r.finish())}).catch(g=>{var C;$({url:a,config:s},{ok:!1,statusText:(C=g==null?void 0:g.message)!=null?C:g}),clearTimeout(B),!(!S&&v)&&(r.setTag("error",!0),n([g,null]))})};b(!1)}catch(i){n([i,null])}})}};var Ye=new Ia({baseURL:Ba,onRequest:Do});const Vo=e=>new Promise((t,s)=>{Uo(e,()=>t(!0),()=>s())}),Mo="//s1.hdslb.com/bfs/seed/jinkela/risk-captcha-sdk/CaptchaLoader.js",No=e=>q(void 0,null,function*(){if(ce)return Promise.reject(new Error("ssr use captcha is unexpected"));let t=window.CaptchaLoader;if(!t)try{if(yield Vo(Mo),t=window.CaptchaLoader,!t)return Promise.reject(new Error("load captcha error, miss constructor"))}catch(s){return Promise.reject(new Error("load captcha error at downloaing"))}try{return yield(yield t.load())(e)}catch(s){return Promise.reject(s)}}),Oo=e=>q(void 0,null,function*(){try{return yield No({riskParams:e})}catch(t){return Promise.reject(t)}}),us=typeof window=="undefined";var tt={set(e,t,s){if(!us)try{localStorage.setItem(e,JSON.stringify(t)),s&&localStorage.setItem(`${e}-timeout`,String(Date.now()+s*1e3))}catch(a){}},get(e,t=null){if(us)return t;try{const s=localStorage.getItem(e);if(!s)return t;const a=localStorage.getItem(`${e}-timeout`);return a&&parseInt(a)<Date.now()?(localStorage.removeItem(e),localStorage.removeItem(`${e}-timeout`),t):JSON.parse(s)}catch(s){return t}},remove(e){if(!us)try{localStorage.removeItem(e)}catch(t){}},has(e){if(us)return!1;try{const t=localStorage.getItem(`${e}-timeout`);return t&&/^\d+$/.test(t)&&parseInt(t)<Date.now()?!1:!!localStorage.getItem(e)}catch(t){return!1}}};const ds=typeof window=="undefined";var lt={get:(e,t)=>{var n;if(typeof t!="string"&&!ds&&(t=document.cookie),typeof t=="object"&&ds&&(t=(n=t==null?void 0:t.headers)==null?void 0:n.cookie),!t)return"";const s=t.split("; ");let a="";for(let o=0;o<s.length;o++){const i=s[o].split("=");i[0]===e&&(a=i[1])}return a},set:(e,t,s={})=>{if(ds)return;s=Object.assign({},{path:"/"},s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString());let a="";for(const n in s)!s[n]||(a+="; "+n,s[n]!==!0&&(a+="="+s[n].split(";")[0]));document.cookie=e+"="+t+a},remove:e=>{if(ds||!document.cookie||!e)return;const t=document.cookie.split("; "),s=[];t.forEach(a=>{const n=a.split("=");n[0]!==e&&s.push(`${n[0]}=${n[1]}`)}),document.cookie=s.join("; ")}};const dn=(e={},t={})=>{var r,u;const s=e.spm_id||((r=document==null?void 0:document.getElementsByTagName("meta").spm_prefix)==null?void 0:r.content)||"0.0",a=e.c||e.CBlock,n=e.d||e.DBlock,o=e.e,i=o?`${s}.${a}.${n}.${o}`:`${s}.${a}.${n}`;if(!e.type)throw new Error("report need type");if(t.spm_id=i,window.reportObserver&&window.reportObserver.reportCustomData){window.reportObserver.reportCustomData(e.type,t);return}if(window.MReporter){const{spm_id:v,type:f}=e,h=o?`${a}.${n}.${o}`:`${a}.${n}`;(u=window.MReporter)==null||u[f]({spmBiz:v,evt:h,msg:t.msg});return}},Is=e=>e?e.replace(/^http:/,""):"",Da=(e=0,t="YYYY-MM-DD")=>{const s=new Date(e*1e3),a=Math.floor(new Date().getTime()/1e3);if(a-e<=60)return"\u521A\u521A";if(a-e<3600)return Math.floor((a-e)/60)+"\u5206\u949F\u524D";if(a-e<86400)return Math.floor((a-e)/3600)+"\u5C0F\u65F6\u524D";const n=new Date;if(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.getTime()/1e3-e<86400)return"\u6628\u5929";const o=String(s.getFullYear()),i=String(s.getMonth()+1),r=String(s.getDate());return s.getFullYear()!==new Date().getFullYear()?t.replace("YYYY",o).replace("MM",i).replace("DD",r):i+(t.split("MM")[1]||"").replace("DD",r)},nt=(e=0)=>{if(e<0||e===null||e===void 0)return"--";if(String(e).indexOf(".")!==-1||String(e).indexOf("-")!==-1)return e.toString();if(e===0)return"0";const t="\u4E07",s="\u4EBF";return e>=1e4&&e<1e8?parseFloat(Number(e/1e4).toFixed(1))+t:e>=1e8?parseFloat(Number(e/1e8).toFixed(1))+s:e.toString()},Uo=(e,t,s)=>{const a=document.createElement("script");document.body.appendChild(a),a.async=!0,a.onload=a.onreadystatechange=(n,o)=>{if((o||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,document.body.removeChild(a),!o&&t))return t()},a.onerror=()=>{s&&s()},a.src=e};let en=!0;const ce=(()=>(en&&(en=typeof window=="undefined"),en))();function Ta(e,t){let s=null;return function(){s&&clearTimeout(s),s=setTimeout(e,t)}}const xa=ce?null:(e,{timeout:t}={timeout:1})=>{if(window.requestIdleCallback)window.requestIdleCallback(e,{timeout:t});else{const s=Date.now();setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-s))}})},t)}};ce||window.IntersectionObserver&&new window.IntersectionObserver(e=>{e.forEach(({target:t,isIntersecting:s})=>{!t||t.__lazy_handler__&&t.__lazy_handler__(s)})});const La=e=>{try{const t=window.asyncScriptsQueue||new Map;return t[e]||(t[e]=new Promise((s,a)=>{const n=document.createElement("script");n.src=e,n.onload=()=>{s(!0)},n.onerror=o=>{a(o)},document.body.appendChild(n)}),window.asyncScriptsQueue=t),t[e]}catch(t){return Promise.reject()}},Pa=()=>{var e;return ce?"0.0":window.__spm_prefix?window.__spm_prefix:(window.__spm_prefix=(e=document.querySelector("meta[name=spm_prefix]"))==null?void 0:e.content.split(".").slice(0,2).join("."),window.__spm_prefix||"")},yn=(e,t)=>e?e.classList.contains(t)?e:yn(e.parentElement,t):null;function Ho(e){if(!e||typeof e=="string")return e;const t=[];for(const s in e)t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t.join("&")}function _s(e,t){if(!e)return"";const s=Ho(t);if(!s)return e;const{origin:a,pathname:n,search:o,hash:i}=new URL(Wo(e)),r=a+n,u=o.replace("?","&");return`${r}?${s}${u}${i}`.replace(/\?[?&]/,"?")}function Wo(e){return(ce?"https:":location.protocol)+e.replace(/(http(s)?:)/,"")}function wn(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,(s,a)=>a?s:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[s]):""}var Ds=ae({name:"ClientOnly",props:{disabled:{type:Boolean,default:!1}},setup(e,{slots:t}){if(e.disabled)return()=>t.default?t.default():null;const s=A(!1);return ze(()=>{xa(()=>{s.value=!0})}),()=>s.value&&t.default?t.default():null}});const jo={src:{type:String,required:!0,default:""},alt:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},rule:{type:[String,Number],default:""},source:{type:Object,default:()=>{}},dpr:{type:Boolean,default:!1},lqip:{type:Boolean,default:!1},cbStr:{type:String,default:""},loading:{type:String,default:"lazy"},bfsStyle:{type:String,default:""}};var it=ae({name:"VImg",props:jo,setup(e){const t=A(2),s=j("enableAvif"),a=j("bmgDefDomain",A(!1));ze(()=>{e.dpr&&(t.value=window.devicePixelRatio|0)});const n=M(()=>{var i;return Ei(e.src,{w:e.width||400,h:e.height||256,c:String(e.rule).indexOf("c")>-1,e:((i=String(e.rule).match(/(0|1|2)e/))==null?void 0:i[1])||"",dpr:t.value,style:e.bfsStyle},{avif:s,domain:a==null?void 0:a.value})}),o=i=>{var r;(r=window.imgOnLoad)==null||r.call(window,i.target)};return()=>E("picture",{class:"v-img"},[n.value.map((i,r)=>r<n.value.length-1?E("source",{srcset:i.src,type:"image/"+i.ext},null):E("img",{src:i.src,alt:e.alt,loading:e.loading,onload:e.cbStr,onLoad:o,onerror:"typeof window.imgOnError === 'function' && window.imgOnError(this)"},null))])}});const zo=c("use",{"xlink:href":"#header-search"},null,-1),qo=[zo];function Qo(e,t){return l(),d("svg",null,[...qo])}const Go=c("use",{"xlink:href":"#palette-ad"},null,-1),Jo=[Go];function Yo(e,t){return l(),d("svg",null,[...Jo])}const Ko=c("use",{"xlink:href":"#palette-brand-ad"},null,-1),Zo=[Ko];function Xo(e,t){return l(),d("svg",null,[...Zo])}const er=c("use",{"xlink:href":"#palette-charge-video"},null,-1),tr=[er];function sr(e,t){return l(),d("svg",null,[...tr])}const nr=c("use",{"xlink:href":"#palette-cheese"},null,-1),ar=[nr];function ir(e,t){return l(),d("svg",null,[...ar])}const or=c("use",{"xlink:href":"#palette-creative-ad"},null,-1),rr=[or];function lr(e,t){return l(),d("svg",null,[...rr])}const cr=c("use",{"xlink:href":"#user-auth-company"},null,-1),ur=[cr];function dr(e,t){return l(),d("svg",null,[...ur])}const _r=c("use",{"xlink:href":"#user-auth-people"},null,-1),vr=[_r];function hr(e,t){return l(),d("svg",null,[...vr])}const pr=c("use",{"xlink:href":"#widget-arrow"},null,-1),fr=[pr];function mr(e,t){return l(),d("svg",null,[...fr])}const gr=c("use",{"xlink:href":"#widget-follow"},null,-1),yr=[gr];function wr(e,t){return l(),d("svg",null,[...yr])}const br=c("use",{"xlink:href":"#widget-followed"},null,-1),kr=[br];function Cr(e,t){return l(),d("svg",null,[...kr])}const Ar=c("use",{"xlink:href":"#widget-play-logo"},null,-1),$r=[Ar];function Er(e,t){return l(),d("svg",null,[...$r])}const Fr=c("use",{"xlink:href":"#widget-tv-tips"},null,-1),Sr=[Fr];function Br(e,t){return l(),d("svg",null,[...Sr])}const Ir=c("use",{"xlink:href":"#widget-up"},null,-1),Dr=[Ir];function bn(e,t){return l(),d("svg",null,[...Dr])}const Tr=c("use",{"xlink:href":"#widget-video-danmaku"},null,-1),xr=[Tr];function Lr(e,t){return l(),d("svg",null,[...xr])}var ue=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s};const Pr={customClass:String,size:{type:Number,default:36},info:{type:Object,default:()=>({mid:0,face:"",verify:-1,url:""})}},Rr=ae({name:"VAvatar",components:{VImg:it,UserAuthCompany:dr,UserAuthPeople:hr},props:Pr,setup(e){const t={0:"person",1:"company"},{verify:s}=e.info,a=typeof s!="string"&&typeof s!="number"?-1:Number(s),n={[t[a]]:!0};return{showAuth:Boolean(t[a]),auth:n}}}),Vr={key:0,class:"v-avatar__auth"};function Mr(e,t,s,a,n,o){const i=O("VImg"),r=O("UserAuthCompany"),u=O("UserAuthPeople");return l(),d("div",{class:K(["v-avatar",e.customClass])},[E(i,{class:"v-avatar__face",src:e.info.face,alt:e.info.name,width:e.size},null,8,["src","alt","width"]),e.showAuth?(l(),d("div",Vr,[e.auth.company?(l(),N(r,{key:0,class:"v-avatar__auth--icon"})):e.auth.person?(l(),N(u,{key:1,class:"v-avatar__auth--icon"})):F("",!0)])):F("",!0)],2)}var Ra=ue(Rr,[["render",Mr]]);const On=function(e,t,s,a=!1){e&&t&&s&&e.addEventListener(t,s,a)},Nr=typeof window=="undefined",mt=new Map;let Un;Nr||(On(document,"mousedown",e=>Un=e),On(document,"mouseup",e=>{for(const t of mt.values())for(const{documentHandler:s}of t)s(e,Un)}));function Hn(e,t){let s=[];return Array.isArray(t.arg)?s=t.arg:t.arg instanceof HTMLElement&&s.push(t.arg),function(a,n){const o=t.instance.popperRef,i=a.target,r=n==null?void 0:n.target,u=!t||!t.instance,v=!i||!r,f=e.contains(i)||e.contains(r),h=e===i,_=s.length&&s.some(b=>b==null?void 0:b.contains(i))||s.length&&s.includes(r),p=o&&(o.contains(i)||o.contains(r));u||v||f||h||_||p||t.value(a,n)}}const ns={beforeMount(e,t){mt.has(e)||mt.set(e,[]),mt.get(e).push({documentHandler:Hn(e,t),bindingFn:t.value})},updated(e,t){mt.has(e)||mt.set(e,[]);const s=mt.get(e),a=s.findIndex(o=>o.bindingFn===t.oldValue),n={documentHandler:Hn(e,t),bindingFn:t.value};a>=0?s.splice(a,1,n):s.push(n)},unmounted(e){mt.delete(e)}};ns.name="click-outside";ns.install=e=>{e.directive(ns.name,ns)};var Wn=ns;const Or={aid:{type:Number,require:!0,default:0},target:{type:Object,require:!0}},Ur=ae({name:"Danmaku",props:Or,data:()=>({visible:!1,wrapWidth:0,wrapHeight:0,dataLoading:!1,dataLoaded:!1,danmaku:[]}),mounted(){this.init(),window.addEventListener("resize",Ta(this.initRect,300))},methods:{init(){return q(this,null,function*(){this.initListenerEvents()})},initRect(){const{width:e,height:t}=this.$el.parentElement.getBoundingClientRect();this.wrapWidth=e,this.wrapHeight=t},getDanmakuData(e){return q(this,null,function*(){if(this.danmaku.length)return this.danmaku;this.dataLoading=!0;const t=yield fetch(`//api.bilibili.com/x/v2/dm/ajax?aid=${e}`).then(s=>s.json());return this.dataLoading=!1,t.code===0?(this.dataLoaded=!0,t.data):[]})},initListenerEvents(){const e=this.target;e.addEventListener("mouseenter",t=>{this.handleMoveEnter()}),e.addEventListener("mouseleave",t=>{this.handleMoveLeave()})},handleMoveEnter(){return q(this,null,function*(){this.visible=!0,!(!this.dataLoaded&&this.dataLoading)&&(this.initRect(),this.danmaku=yield this.getDanmakuData(this.aid),this.doLoop())})},handleMoveLeave(){this.visible=!1},afterLeaveHandle(){this.clear()},doLoop(){if(!this.visible)return;let e=0,t=0;const s=a=>{if(e||(e=a,t=this.generateStyle()),!this.visible)return;if(a-e>=t){this.clear(),e=0,window.requestAnimationFrame(s);return}window.requestAnimationFrame(s)};this.requestFrameTimeout(2e3,()=>{window.requestAnimationFrame(s),this.$emit("show")})},generateStyle(){let e=0;return Array.from(this.$el.children).forEach((s,a)=>{const n=Math.floor(Math.random()*2e3+3e3),o=a*1.5*1e3;e=Math.max(n+o,e),s.setAttribute("style",`transition-duration: ${n}ms;
              transition-delay: ${o}ms;
              transform: translateX(calc(-100% + ${-this.wrapWidth-10}px));`)}),e},clear(){Array.from(this.$el.children).forEach(t=>{t.setAttribute("style","transition-duration: 0s; transition-delay: 0s; transform: translateX(0);")})},requestFrameTimeout(e,t){let s=0;const a=n=>{if(!this.visible)return;if(s||(s=n),n-s>=e)return t&&t();window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}}}),Hr={class:"v-danmaku"},Wr=["data-row"];function jr(e,t,s,a,n,o){return l(),N(yt,{name:"v-danmaku-fade",onAfterLeave:e.afterLeaveHandle},{default:z(()=>[x(c("ul",Hr,[(l(!0),d(X,null,de(e.danmaku,(i,r)=>(l(),d("li",{key:r,class:"v-danmaku__item","data-row":1+r%2},D(i),9,Wr))),128))],512),[[Ue,e.visible&&e.dataLoaded]])]),_:1},8,["onAfterLeave"])}var Va=ue(Ur,[["render",jr]]);const zr=(e,t)=>{const s={aid:t,target:e};return E(ae({extends:Va}),s)},Cs={component:Va,name:"danmaku",mounted(e,t){const s=t.value;if(!s||typeof s!="number")return;const a=document.createElement("div"),n=zr(e,s);pn(n,a),e.appendChild(a.firstChild)}};Cs.install=e=>{e.directive(Cs.name,Cs)};var jn=Cs;class qr{constructor(){le(this,"enter");le(this,"leave");this.enter=!1,this.leave=!1}}class Qr extends qr{constructor(){super()}in(){this.enter=!0,this.leave=!1}out(){this.enter=!1,this.leave=!0}}class Gr{constructor(){le(this,"events");le(this,"mouse");this.events={in:new CustomEvent("scale-in"),out:new CustomEvent("scale-out")},this.mouse=new Qr}}function Jr(e,t){let s=e,a;function n(...o){let i=this;clearTimeout(a),a=setTimeout(function(){s.apply(i,o)},t)}return n}const Yr=Jr((e,t,s)=>{if(s.mouse.leave||yn(e.target,"__scale-disable"))return;const{width:a,height:n}=t.parentElement.getBoundingClientRect(),o=Math.round(n+a*.2*.5625);t.style.setProperty("--offset-top",`${(n-o)/2}px`),t.classList.add("scale"),t.dispatchEvent(s.events.in)},200),zn=e=>{e.parentElement.classList.add("bili-scale-card"),e.classList.add("bili-scale-card__wrap"),e.classList.remove("__scale-wrap");const t=new Gr;e.addEventListener("mouseenter",s=>(t.mouse.in(),Yr.apply(void 0,[s,e,t])),!0),e.addEventListener("mouseleave",()=>{t.mouse.out(),e.classList.remove("scale"),e.dispatchEvent(t.events.out)})},As={name:"scale",mounted(e,t){if(t.arg==="disabled"&&t.value)return;const s=yn(e,"__scale-wrap");!s||(window.requestIdleCallback?window.requestIdleCallback(()=>{zn(s)}):setTimeout(()=>{zn(s)},0))}};As.install=e=>{e.directive(As.name,As)};var Kr=As;const $s={name:"spm",mounted(e,t){if(!t.value)return;const s=t.value||{};for(const a in s)e.setAttribute(`data-${a}`,s[a])}};$s.install=e=>{e.directive($s.name,$s)};var Zr=$s;var gt={VScale:Kr,VSpm:Zr};const Xr={aid:{type:Number,require:!0,default:0},target:{type:Object,require:!0}},el=ae({name:"VFrame",props:Xr,data:e=>{var t;return{wrapWidth:0,wrapHeight:0,visible:!1,layerX:0,shots:{image:[],img_x_len:0,img_x_size:0,img_y_len:0,img_y_size:0,index:[],pvdata:""},shotsLoading:!1,shotsLoaded:!1,shotDom:(t=e.$el)==null?void 0:t.children[1]}},computed:{count(){return Math.min((this.shots.index||[]).length,100)},avgX(){return this.shots.index?Number((this.wrapWidth/this.count).toFixed(2)):0},currentIndex(){return Math.floor(Math.max(this.layerX,0)/this.avgX)},shotScale(){const{img_x_size:e,img_y_size:t}=this.shots;return Math.max(this.wrapWidth/e,this.wrapHeight/t)},progressStyle(){return`width: ${this.currentIndex/(this.count-1)*100}%;`},shotStyle(){const{img_x_len:e,img_x_size:t,image:s}=this.shots;return`background-size: ${t*e*this.shotScale}px;background-image: url(${(s||[])[0]});`}},watch:{currentIndex(e){const{img_x_len:t,img_y_len:s,img_x_size:a,img_y_size:n}=this.shots,o=e%(t*s),i=a*this.shotScale*Math.max(0,Math.floor(o%t)),r=Math.floor(o/t)*(n*this.shotScale);this.shotDom.style.backgroundPosition=`${-i}px ${-r}px`}},mounted(){this.init(),window.addEventListener("resize",Ta(this.initRect,300))},methods:{init(){return q(this,null,function*(){this.shotDom=this.$el.children[1],this.initListenerEvents()})},initRect(){const{width:e,height:t}=this.$el.parentElement.getBoundingClientRect();this.wrapWidth=e,this.wrapHeight=t},getVideoShots(e){return q(this,null,function*(){this.shotsLoading=!0;const t=yield fetch(`https://api.bilibili.com/x/player/videoshot?aid=${e}&index=1`).then(s=>s.json());return this.shotsLoading=!1,t.code===0?(this.shotsLoaded=!0,t.data):{}})},initListenerEvents(){const e=this.target;e.addEventListener("mouseenter",t=>{this.handleMoveEnter(t)}),e.addEventListener("mouseleave",t=>{this.handleMoveLeave(t)}),e.addEventListener("mousemove",t=>{this.handleMove(t)})},handleMoveEnter(e){return q(this,null,function*(){this.layerX=e.layerX,this.visible=!0,!(this.shotsLoaded||this.shotsLoading)&&(this.initRect(),this.shots=yield this.getVideoShots(this.aid))})},handleMove(e){this.layerX=e.layerX},handleMoveLeave(e){this.layerX=e.layerX,this.visible=!1}}}),tl={class:"v-frame"},sl={class:"v-frame__progress"};function nl(e,t,s,a,n,o){return l(),N(yt,{name:"frame-fade"},{default:z(()=>[x(c("div",tl,[c("div",sl,[c("div",{class:"v-frame__progress--bar",style:je(e.progressStyle)},null,4)]),c("div",{class:"v-frame__shots",style:je(e.shotStyle)},null,4)],512),[[Ue,e.visible&&e.shotsLoaded]])]),_:1})}var Ma=ue(el,[["render",nl]]);const al=(e,t)=>{const s={aid:t,target:e};return E(ae({extends:Ma}),s)},Es={component:Ma,name:"frame",mounted(e,t){const s=t.value;if(!s||typeof s!="number")return;const a=document.createElement("div"),n=al(e,s);pn(n,a),e.appendChild(a.firstChild)}};Es.install=e=>{e.directive(Es.name,Es)};var qn=Es;class il{constructor(){}}class ol{constructor(){}}class rl{constructor(t){le(this,"element");le(this,"events",{init:new CustomEvent("player-init",{detail:{}}),play:new CustomEvent("player-play",{detail:{}}),close:new CustomEvent("player-close",{detail:{}})});this.element=t}}class Na extends il{constructor(){super();le(this,"events");this.events={}}$on(s,a){return this.events[s]||(this.events[s]=[]),this.events[s].push(a),this}$off(s,a){if(!!this.events[s])return this.events[s].some((n,o)=>{if(n===a)return this.events[s].splice(o,1),!0}),this}$emit(s,...a){if(!!this.events[s])return this.events[s].forEach(n=>{n.apply(this,a)}),this}}class ll extends ol{constructor(){super();le(this,"enter",!1);le(this,"leave",!1)}in(){this.enter=!0,this.leave=!1}out(){this.enter=!1,this.leave=!0}}class cl extends rl{constructor(t){super(t)}dispatch(t,s){for(const a in s||{})this.events[t].detail[a]=s[a];this.element.dispatchEvent(this.events[t])}}const ul=e=>JSON.stringify(ke(T({},e),{random:Math.ceil(Math.random()*1e3)})),Oa=e=>{(e||[]).forEach(t=>t[1]&&t[1].disconnect())},dl=e=>{if(typeof e=="string")return;const t=window||{},s=t.nano;if(!t.requestIdleCallback||!s||!s.prefetch)return;const a={avid:e.aid,bvid:e.bvid,cid:e.cid,ep_id:e.eid,qn:32};let n="Ugc";return a.ep_id&&(n="Pgc"),t.requestIdleCallback(s.prefetch.bind(void 0,a,{kind:s.GroupKind[n],enableHEVC:!0,enableAV1:!0}))},_l=e=>{const t=document.createElement("video");return t.muted=!0,t.className="v-inline-live-player__media",e.appendChild(t),t};class vl extends Na{constructor(s,a){super();le(this,"player");le(this,"startTime",0);le(this,"connected",!1);le(this,"status","unload");le(this,"option");le(this,"element");this.option=s,this.element=a}getCurrentTime(){return this.connected?Date.now()-this.startTime:0}connect(){switch(this.status){case"loading":return Promise.resolve({type:"loading",done:!1});case"failed":return Promise.resolve({type:"failed",done:!1});case"playing":return Promise.resolve({type:"playing",done:!0})}return this.status="loading",new Promise(s=>q(this,null,function*(){try{window.LiveMiniPlayer||(yield La("https://activity.hdslb.com/blackboard/static/edfd7948d5ca04de779233922773e479/live-mini-player.min.js")),this.player=new window.LiveMiniPlayer(_l(this.element),this.option.roomId),this.player.on("FirstFrame",()=>(this.connected=!0,this.startTime=Date.now(),this.status="playing",s({type:"reload",done:!0}))),this.player.on("Error",a=>(this.close(),this.status="failed",s({type:"failed",done:!1})))}catch(a){this.close()}}))}close(){var s,a,n;this.status="unload",(s=this.player)==null||s.destroy(),(n=(a=this.player)==null?void 0:a.videoEl)==null||n.remove(),this.startTime=0}}const hl="5.7.8",pl=30,fl=0,ml=90,gl=110,yl=110,wl="loading_6",bl=0,kl=[],Cl=[{ddd:0,ind:1,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[55,55,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[30,30,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[300,300],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"\u53D8\u6362"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:90,s:[99]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:300,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:30,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[55,55,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[30,30,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[300,300],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"\u53D8\u6362"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:300,st:0,bm:0}],Al=[];var $l={v:hl,fr:pl,ip:fl,op:ml,w:gl,h:yl,nm:wl,ddd:bl,assets:kl,layers:Cl,markers:Al};let vs=null;const Qn=()=>!(ce||!window.__ENABLE_PREVIEW__),tn=()=>q(void 0,null,function*(){if(ce)return Promise.reject("unsupport while ssr");if(!vs){try{window.biliMediaPreview||(yield La("//s1.hdslb.com/bfs/seed/media-preview/core.4fe40c36.js"))}catch(e){return Promise.reject(e)}vs=yield window.biliMediaPreview.configure(window.biliMediaPreviewPreset||{}).launch("#preview")}return window.__BMP_APP__=vs,vs});class El{constructor(t){le(this,"el");le(this,"visible",!1);le(this,"animation",null);this.el=this.createTipEl(),t.appendChild(this.el)}createTipEl(){const t=document.createElement("div");t.className="v-inline-player__preview-tip";const s=document.createElement("span");s.className="v-inline-player__preview-tip-icon";const a=document.createElement("span");return a.className="v-inline-player__preview-tip-text",a.innerHTML="\u5373\u5C06\u8FDB\u5165\u5168\u5C4F\u9884\u89C8",this.animation=Fi.loadAnimation({container:s,animationData:$l,renderer:"svg",loop:!1,autoplay:!1}),t.appendChild(s),t.appendChild(a),t}setAnimationSpeed(t){var a;const s=3e3/t;(a=this.animation)==null||a.setSpeed(s)}updateTip(t){const s=this.el.querySelector(".v-inline-player__preview-tip-text"),a=this.el.querySelector(".v-inline-player__preview-tip-icon");t?(s&&(s.innerHTML="\u5373\u5C06\u8FDB\u5165\u5168\u5C4F\u9884\u89C8"),a.style.display=""):(s&&(s.innerHTML="\u5F00\u542F\u5168\u5C4F\u9884\u89C8"),a.style.display="none")}show(t){var s;this.visible=!0,this.el.classList.add("visible"),t&&((s=this.animation)==null||s.play())}hide(){var t;this.visible=!1,this.el.classList.remove("visible"),(t=this.animation)==null||t.stop()}destroy(){var t;(t=this.animation)==null||t.destroy()}}const Fl=e=>new El(e);class Sl extends Na{constructor(s,a,n){var o,i;super();le(this,"player");le(this,"connected",!1);le(this,"inPreview",!1);le(this,"previewTip",null);le(this,"onDisconnect",null);le(this,"status","unload");le(this,"option");le(this,"element");le(this,"spmIdFrom","");le(this,"fullscreenOpend",!0);le(this,"previewCountingSecond",4e3);le(this,"previewTipCountingSecond",1e3);if(this.option=s,this.element=a,n&&(this.spmIdFrom=n),(o=window==null?void 0:window.__SERVER_CONFIG__)!=null&&o.constants){const{previewCountingSecond:r=4,previewTipCountingSecond:u=1}=(i=window==null?void 0:window.__SERVER_CONFIG__)==null?void 0:i.constants;this.previewCountingSecond=r*1e3,this.previewTipCountingSecond=u*1e3}}normalLogic(){const s=window.nano.EventType.Player_Ended,a=window.nano.EventType.Player_TimeUpdate;this.player.on(s,this.replay.bind(this)),this.player.on(a,()=>q(this,null,function*(){const n=this.getCurrentTime();if(this.$emit("time-update",n),Qn()&&!this.inPreview&&this.status==="playing"){this.previewTip||(this.previewTip=Fl(this.element),this.previewTip.el.addEventListener("click",this.previewTipClickHandler.bind(this)),this.previewTip.setAnimationSpeed(this.previewCountingSecond-this.previewTipCountingSecond+1e3));const o=yield tn();if(this.fullscreenOpend=o.fullscreenStatus,this.previewTip.updateTip(this.fullscreenOpend),this.fullscreenOpend){if(n>this.previewTipCountingSecond&&(this.previewTip.visible||this.previewTip.show(this.fullscreenOpend)),n>this.previewCountingSecond)try{this.callBmpAppDisplay("CountTimeout")}catch(i){this.inPreview=!1}}else this.previewTip.visible||this.previewTip.show(this.fullscreenOpend)}}))}callBmpAppDisplay(s){return q(this,null,function*(){var n,o;if(this.inPreview)return;this.inPreview=!0,(yield tn()).display(this.element,{type:"video",videoOptions:{aid:this.option.aid,bvid:this.option.bvid,cid:this.option.cid,initialTime:((o=(n=this.player)==null?void 0:n.getCurrentTime)==null?void 0:o.call(n))||0,originAlt:s},spmIdFrom:this.spmIdFrom})})}previewTipClickHandler(s){s.preventDefault(),this.callBmpAppDisplay(this.fullscreenOpend?"CountClick":"ManualClick")}seek(s){return q(this,null,function*(){var a,n;if(!(!this.connected||!this.player))try{yield(n=(a=this.player)==null?void 0:a.seek)==null?void 0:n.call(a,s)}catch(o){}})}pause(){var s,a;!this.connected||((a=(s=this.player)==null?void 0:s.pause)==null||a.call(s),this.status="pause")}play(){return q(this,null,function*(){var s,a;if(!(!this.connected||!this.player))try{yield(a=(s=this.player)==null?void 0:s.play)==null?void 0:a.call(s),this.status="playing"}catch(n){}})}getCurrentTime(){var s,a;return this.status==="playing"?((a=(s=this.player)==null?void 0:s.getCurrentTime)==null?void 0:a.call(s))*1e3:0}getDuration(){var s,a;return((a=(s=this.player)==null?void 0:s.getDuration)==null?void 0:a.call(s))*1e3}replay(){return q(this,null,function*(){yield this.seek(0),yield this.play()})}connect(){return q(this,null,function*(){if(!this.player)try{const s=yield tn();if(Qn()&&!this.onDisconnect){const a=()=>{this.inPreview=!1,this.status="closed"};this.onDisconnect=()=>{s.off("hide",a)},s.on("hide",a)}this.player=yield s.createVideoPlayer({bvid:this.option.bvid,cid:this.option.cid,aid:this.option.aid,element:this.element,muted:!0,autoplay:!1,controlsList:new Set(["noPlaybackClue"]),featureList:new Set(["noAudioStream","noVVReport","noVTReport","noBufferView"])}),this.normalLogic()}catch(s){return Promise.reject(s)}switch(this.status){case"failed":return Promise.resolve({type:"failed",done:!1});case"loading":return Promise.resolve({type:"loading",done:!1});case"playing":return Promise.resolve({type:"playing",done:!0});case"closed":if(this.connected)return this.replay(),Promise.resolve({type:"replay",done:!0});break}return this.status="loading",this.player.connect().then(s=>q(this,null,function*(){if(this.connected=!0,this.$emit("player-connected"),!s)return this.disconnect(),this.status="failed",Promise.resolve({type:"reload",done:!1});switch(this.status){case"unload":this.disconnect();break;case"closed":this.close();break}return yield this.play(),this.status==="loading"&&(this.status="playing"),Promise.resolve({type:"reload",done:s})})).catch(s=>Promise.resolve({type:"error",done:!1,message:s.message}))})}close(){var s;this.status!=="failed"&&(this.pause(),this.seek(0),this.status="closed",(s=this.previewTip)==null||s.hide())}disconnect(){var s,a,n,o,i,r;this.status="unload",this.connected&&(this.connected=!1,(a=(s=this.player)==null?void 0:s.disconnect)==null||a.call(s),this.player=null,(n=this.onDisconnect)==null||n.call(this),this.onDisconnect=null,(i=(o=this.previewTip)==null?void 0:o.el)==null||i.removeEventListener("click",this.previewTipClickHandler),(r=this.previewTip)==null||r.destroy(),this.previewTip=null)}}const Bl=(e,t,s,a,n)=>{if(e==="live")return new vl(a,s);const o=window,i=o.blInlinePlayers||[];for(const u of i)if(t===u[0])return u[1];i.length>=8&&Oa(i.splice(0,4));const r=new Sl(a,s,n);return i.push([t,r]),o.blInlinePlayers=i,r};class Il{constructor(t,s="video",a){le(this,"countTime",0);le(this,"events");le(this,"mouse",new ll);le(this,"element");le(this,"player",null);le(this,"playerType","");le(this,"playerId","");this.element=t,this.playerType=s,this.events=new cl(a)}initPlayer(t,s){this.playerId=ul(t),this.player=Bl(this.playerType,this.playerId,this.element,t,s)}}const Dl=()=>{const e=document.createElement("div");return e.className="v-inline-live-player",e},Tl=()=>{const e=document.createElement("div");return e.className="v-inline-player",e},xl=(e,t)=>{switch(e){case"video":dl(t);break}},Ll=(e,t,s)=>Si(()=>{if(e.mouse.leave)return;window.blActiveInlinePlayer={instance:e,wrap:s};const a=Date.now();e.player.connect().then(({type:n,done:o})=>{var i;n==="reload"&&e.events.dispatch("init",{done:o,time:o?Date.now()-a:-1}),e.mouse.enter&&o&&(e.element.classList.add("visible"),e.events.dispatch("play",{})),e.mouse.leave&&((i=e.player)==null||i.close())})},t),Gn=(e,t)=>{var a,n;if(window.blActiveInlinePlayer={},e.mouse.out(),e.element.classList.remove("mouse-in"),!e.player)return;const s=Math.round(((a=e.player)==null?void 0:a.getCurrentTime())||0);e.countTime+=s,(n=e.player)==null||n.close(),e.element.classList.remove("visible"),s&&e.events.dispatch("close",{dashPlayTime:s,countPlayTime:e.countTime})};class _n{constructor(t,s,a){le(this,"el");le(this,"option");le(this,"config");le(this,"cancel",()=>{});this.el=t,this.option=s,this.config=a||{},this.init()}init(){const{type:t="video",delay:s=350,duration:a=5*60*1e3,prefetch:n=!0}=this.config||{},o=t==="live"?Dl():Tl();this.el.appendChild(o);let i=!1,r=null;const u=new Il(o,t,this.el);this.el.addEventListener("mouseenter",()=>q(this,null,function*(){var v;return u.mouse.in(),u.element.classList.add("mouse-in"),i||(i=!0,n&&xl(t,this.option)),u.player||(u.initPlayer(this.option,(v=this.config)==null?void 0:v.spmIdFrom),u.player.$on("time-update",f=>{if(f>=a)return u.player.replay()})),r||(r=Ll(u,s,this.el)),typeof window!="undefined"&&window.addEventListener("blur",this.cancel),r()})),this.cancel=()=>{Gn(u,this.el),window.removeEventListener("blur",this.cancel)},this.el.addEventListener("mouseleave",this.cancel),!(typeof window=="undefined"||typeof document=="undefined")&&document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible")try{const{instance:v,wrap:f}=window.blActiveInlinePlayer||{};if(!v)return;Gn(v,f)}catch(v){console.log("\u5F53\u524D\u6CA1\u6709inline\u5B9E\u4F8B")}})}}const Pl=e=>({aid:e.aid,bvid:e.bvid,cid:e.cid,seasonId:e.sid,episodeId:e.eid,kind:e.kind||e.sid||e.eid?"Pgc":"Ugc"}),Rl=e=>({roomId:e.roomId}),Jn=(e,t)=>e==="video"?Pl(t):Rl(t),Fs={name:"inline-player",emits:["player-play","player-close","player-init"],mounted(e,t){const s=t.value;if(!s)return;const a=s.config||{};a.type=a.type||t.arg||"video",e.__INLINE_PLAYER__=new _n(e,Jn(a.type,s),a)},updated(e,t){const s=t.oldValue,a=t.value||{};if(s)return;const n=a.config||{};n.type=n.type||t.arg||"video",e.__INLINE_PLAYER__=new _n(e,Jn(n.type,a),n)},beforeUnmount(e){var t,s;(s=(t=e.__INLINE_PLAYER__)==null?void 0:t.cancel)==null||s.call(t),Oa(window.blInlinePlayers||[]),e.__INLINE_PLAYER__=null}};Fs.install=e=>{e.directive(Fs.name,Fs)};var Vl=Fs,Ts={InlinePlayer:_n,VDirective:Vl};const Ml=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],Nl=2e3,Ol={classname:{type:String,default:""},placement:{type:String,default:"bottom",validator:e=>~Ml.indexOf(e)},disabled:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},offset:{type:Number,default:10},offsetX:{type:Number,default:0},method:{type:String,default:"hover",validator:e=>~["hover","click","visible"].indexOf(e)},zIndex:{type:Number,default:0},showDelay:{type:Number,default:0},preRender:{type:Boolean,default:!1},noDestroy:{type:Boolean,default:!1},wrapClass:{type:String,default:""},wrapTag:{type:String,default:""},hoverContent:{type:Boolean,default:!0},adaptive:{type:Boolean,default:!1},noWrapLeave:{type:Boolean,default:!1}},Ul=e=>e.type===Di,Hl=e=>e.type===X,Wl=e=>e.type==="template",Yn=(e,t)=>{if(!Ul(e))return Hl(e)||Wl(e)?t>0?Ua(e.children,t-1):void 0:e},Ua=(e,t=3)=>Array.isArray(e)?Yn(e[0],t):Yn(e,t),jl=(e,t)=>{if(!e)throw new Error("v-popover need trigger slot");const s=Ua(e,1);if(!s)throw Error("v-popover trigger expects single rooted node");return ce?s:Ii(s,t,!0)};var xs=ae({name:"VPopover",directives:{[Wn.name]:Wn},props:Ol,emits:["show","afterShow","hide","afterHide"],setup(e,{emit:t,slots:s,expose:a}){const n=A(null),o=A(null),i=A(!1),r=A("leave"),u=A(!1),v=A(!1),f=A(!1),h=A(!1),_=ln({});let p=null,b=null;const S=M(()=>{if(!y.value)return null;const P=e.placement.split("-")[0],J={[`padding-${{top:"bottom",bottom:"top",left:"right",right:"left"}[P]}`]:`${e.offset}px`,"margin-left":`${e.offsetX}px`};return e.hoverContent||(J.pointerEvents="none"),m.value&&e.zIndex&&(J.zIndex=e.zIndex),J}),y=M(()=>!(e.disabled||!h.value)),m=M(()=>!!e.wrapClass||!!e.wrapTag),w=M(()=>(m.value?0:20)+e.showDelay),B=M(()=>(m.value?0:20)+100),$=M(()=>!!(i.value||u.value||v.value)),g=(P,W)=>{if(!n.value)return;let{width:J}=n.value.getBoundingClientRect();const oe=P+W/2,pe=document.documentElement.clientWidth;if(oe<J/2)return J/2;const Be=oe+J/2-pe;return Be>0?J>pe?J/2:oe-Be:oe},C=()=>q(this,null,function*(){if(yield We(),!y.value||!$.value||!o.value)return;let{left:P,top:W,width:J,height:oe}=o.value.getBoundingClientRect();switch(W+=document.documentElement.scrollTop,P+=document.documentElement.scrollLeft,_.position="absolute",_.zIndex=e.zIndex||Nl,e.placement){case"top":{_.top=`${W}px`,_.left=`${e.adaptive?g(P,J):P+J/2}px`;break}case"top-start":{_.top=`${W}px`,_.left=`${P}px`;break}case"top-end":{_.top=`${W}px`,_.left=`${P+J}px`;break}case"left":{_.top=`${W+oe/2}px`,_.left=`${P}px`;break}case"left-start":{_.top=`${W}px`,_.left=`${P}px`;break}case"left-end":{_.top=`${W+oe}px`,_.left=`${P}px`;break}case"right":{_.top=`${W+oe/2}px`,_.left=`${P+J}px`;break}case"right-start":{_.top=`${W}px`,_.left=`${P+J}px`;break}case"right-end":{_.top=`${W+oe}px`,_.left=`${P+J}px`;break}case"bottom":{_.top=`${W+oe}px`,_.left=`${P+J/2}px`;break}case"bottom-start":{_.top=`${W+oe}px`,_.left=`${P}px`;break}case"bottom-end":{_.top=`${W+oe}px`,_.left=`${P+J}px`;break}}}),k=()=>{if(e.method!=="click")return;const P=i.value?"show":"hide";r.value=P,h.value=!0,setTimeout(()=>q(this,null,function*(){yield We(),r.value===P&&(i.value=!i.value)}),e.showDelay)},L=()=>{e.method==="click"&&(!$.value||setTimeout(()=>q(this,null,function*(){yield We(),$.value&&(i.value=!1)}),B.value))},Y=()=>{if(!(e.method!=="hover"||f.value)){if(h.value=!0,r.value="enter",u.value){v.value=!0,clearTimeout(b);return}setTimeout(()=>q(this,null,function*(){yield We(),r.value==="enter"&&(v.value=!0)}),w.value)}},I=()=>{e.method==="hover"&&(r.value="leave",b=setTimeout(()=>q(this,null,function*(){yield We(),r.value==="leave"&&(v.value=!1)}),B.value))},U=P=>{f.value||(P.stopPropagation(),v.value!==!1&&(u.value=!0,clearTimeout(p)))},Q=P=>{P.stopPropagation(),p=setTimeout(()=>{u.value=!1},B.value)},te=()=>{m.value&&!e.noWrapLeave&&(f.value=!0),t("hide")},G=()=>{m.value&&!e.noWrapLeave&&(f.value=!1),e.noDestroy||(h.value=!1),t("afterHide")},ve=()=>{t("show")},$e=()=>{t("afterShow")},H=P=>{P?(h.value=!0,r.value="visible",setTimeout(()=>q(this,null,function*(){yield We(),r.value==="visible"&&(v.value=!0)}),w.value)):(r.value="hidden",setTimeout(()=>q(this,null,function*(){yield We(),r.value==="hidden"&&(v.value=!1)}),B.value))},Z=P=>{P?(h.value=!0,r.value="visible",setTimeout(()=>q(this,null,function*(){yield We(),r.value==="visible"&&(v.value=!0)}),w.value)):(r.value="hidden",setTimeout(()=>q(this,null,function*(){yield We(),r.value==="hidden"&&(v.value=!1,u.value=!1,i.value=!1)}),B.value))};return ze(()=>{e.preRender&&xa(()=>{h.value=!0}),fe(()=>e.visible,P=>{H(P)},{immediate:!0}),m.value||(fe($,P=>{!P||C()},{immediate:!0}),fe(y,P=>{P?(window.addEventListener("resize",C),window.addEventListener("scroll",C)):(window.removeEventListener("resize",C),window.removeEventListener("scroll",C))},{immediate:!0}))}),a({changeVisible:Z}),()=>{const P=E(yt,{name:`v-popover_${e.placement}`,onBeforeEnter:ve,onAfterEnter:$e,onBeforeLeave:te,onAfterLeave:G},{default:()=>[x(E("div",{ref:n,class:["v-popover",`is-${e.placement}`],style:S.value,onMouseenter:U,onMouseleave:Q},[E("div",{class:["v-popover-content",e.classname]},[s.content?s.content():null])]),[[Ue,$.value],[Ee("click-outside"),L]])]});if(m.value)return Ln(e.wrapTag,{ref:o,onMouseenter:Y,onMouseleave:I,onClick:k,class:["v-popover-wrap",e.wrapClass]},[s.trigger?s.trigger():null,y.value&&Ln(P)]);const W=jl(s.trigger?s.trigger():null,{ref:o,onMouseenter:Y,onMouseleave:I,onClick:k});return E(X,null,[W,y.value&&E(Bi,{to:"body"},{default:()=>[E("div",{style:_},[P])]})])}}});const zl=e=>{if(ce)return;const t=s=>{let a=s.target;for(;a&&a.tagName!=="A";)a=a.parentNode;if((a==null?void 0:a.tagName)!=="A")return;let n=a.getAttribute("href");if(!n||!/\/\//.test(n)||/spm_id_from=/.test(n)||/^blob:/.test(n)||!/(bili|b(\d*).tv)/.test(n))return;/^\/\//.test(n)&&(n=`${window.location.protocol}${n}`);const o=new URL(n),i=Pa().split(".");if(i[2]=a.dataset.mod||"0",i[3]=a.dataset.idx||"0",a.dataset.spmid){const u=a.dataset.spmid.split(".");i[0]=u[0],i[1]=u[1]}a.dataset.ext&&(i[4]=a.dataset.ext);const r=o.search?`${o.search}&spm_id_from=${i.join(".")}`:`?spm_id_from=${i.join(".")}`;a.setAttribute("href",o.origin+o.pathname+r+o.hash)};e?(e.addEventListener("click",t,!1),e.addEventListener("contextmenu",t,!1)):(document.body.addEventListener("click",t,!1),document.body.addEventListener("contextmenu",t,!1))},zt=e=>{const t=((e==null?void 0:e.spm)||"").split(".");return(t==null?void 0:t.length)<2?{cBlock:e.c,dBlock:e.d}:{cBlock:t.slice(0,t.length-1).join("."),dBlock:t[t.length-1]}},Ha=(e,t,s)=>{e!=null&&e.setAttribute&&e.setAttribute("data-report",`${t}.${s}`)},Wa=(e,t)=>{e.forEach(({intersectionRatio:s,target:a,isIntersecting:n})=>{if(!!a){if(s<=.5&&!n){a.__in_viewport=!1;return}a.__in_viewport=!0,a.__lazy_handler__&&a.__lazy_handler__(t)}})},ql=e=>{e.forEach(({intersectionRatio:t,target:s,isIntersecting:a})=>{if(!!s){if(t<=.5&&!a){s.__in_viewport=!1;return}s.__in_viewport=!0,s.__lazy_handler__&&s.__lazy_handler__()}})},xe=ce?null:new window.IntersectionObserver(e=>Wa(e,!1),{threshold:[.5]}),Le=ce?null:new window.IntersectionObserver(e=>Wa(e,!0),{threshold:[.5]}),Pe=ce?null:new window.IntersectionObserver(e=>ql(e),{threshold:[.5]}),ja=e=>e!==null&&typeof e=="object",ts=e=>e&&typeof e=="function",kn=(e,t)=>{var f,h;let s=t||e.type||"";if(t==="show"&&(s="appear"),!s&&!e.type)throw new Error("report need type");const a=e.spm_id||Pa()||"0.0",{cBlock:n,dBlock:o}=zt(e),i=n,r=o,u=e.e||t,v=u?`${a}.${i}.${r}.${u}`:`${a}.${i}.${r}`;if((f=window.reportObserver)!=null&&f.reportCustomData){window.reportObserver.reportCustomData(s,{spm_id:v,msg:ja(e.msg)?JSON.stringify(e.msg):JSON.stringify({})});return}if(window.MReporter){const _=u?`${i}.${r}.${u}`:`${i}.${r}`;(h=window.MReporter)==null||h[s]({spmBiz:a,evt:_,msg:e.msg})}},Ql=function(e){var t;!window.spmReportData||(window.spmReportData[e]=e,(t=window.reportObserver)==null||t.forceCommit())},hs=(e,t,s)=>{s||e.removeEventListener("click",e.__report_handler__mixin__,!0),e.__report_handler__mixin__=()=>{Gl(e,t)},e.addEventListener("click",e.__report_handler__mixin__,!0)},Kn=e=>{e.__report_handler__mixin__&&(e.removeEventListener("click",e.__report_handler__mixin__,!0),e.__report_handler__mixin__=void 0)},Gl=(e,t)=>{const{cBlock:s="",dBlock:a=""}=zt(t);let n;e!=null&&e.__report_handler__msg__&&(n=e==null?void 0:e.__report_handler__msg__());const o={};let i;if(n){const{cBlock:r,dBlock:u}=zt(n);r&&(o.c=r),u&&(o.d=u),!r&&!u?i=(n==null?void 0:n.msg)||n:i=n==null?void 0:n.msg}kn({c:n&&o.c?o.c:s,d:n&&o.d?o.d:a,msg:T(T({},t.msg),i)},"click")},sn=e=>{if(!(e!=null&&e.querySelectorAll))return;const t=e.querySelectorAll("A,BUTTON,[auto-report-click]");return Array.from(t).filter(s=>!s.hasAttribute("no-auto-report"))},Jl={autoReport:{type:Object,default:null}},Yl=ae({props:Jl,data(){return{mixinBinding:{arg:"show",value:{c:"",d:"",msg:{}},modifiers:{strict:!1}}}},mounted(){var s,a,n,o,i;if(!this.autoReport)return;(((s=this.$el)==null?void 0:s.tagName)==="BUTTON"||((a=this.$el)==null?void 0:a.tagName)==="A"||((o=(n=this.$el)==null?void 0:n.hasAttribute)==null?void 0:o.call(n,"auto-report-click")))&&hs(this.$el,this.autoReport,!0),Array.from(sn(this.$el)||[]).map(r=>{hs(r,this.autoReport,!0)});const{cBlock:e="",dBlock:t=""}=zt(this.autoReport);if(Ha(this.$el,e,t),this.autoReport.show){if(!((i=this.$el)!=null&&i.setAttribute)){console.error("report-info \u6240\u5728Component\u4E0D\u5B58\u5728\u6839\u8282\u70B9\uFF0C\u65E0\u6CD5\u652F\u6301\u66DD\u5149\u4E0A\u62A5");return}this.mixinBinding={arg:"show",modifiers:{strict:!1},value:{c:e,d:t,msg:this.autoReport.msg}},Ls(this.$el,this.mixinBinding,!0)}},updated(){var e,t,s,a,n;if(!!this.autoReport&&((((e=this.$el)==null?void 0:e.tagName)==="BUTTON"||((t=this.$el)==null?void 0:t.tagName)==="A"||((a=(s=this.$el)==null?void 0:s.hasAttribute)==null?void 0:a.call(s,"auto-report-click")))&&hs(this.$el,this.autoReport,!1),(sn(this.$el)||[]).map(o=>{hs(o,this.autoReport,!1)}),this.autoReport.show)){if(!((n=this.$el)!=null&&n.setAttribute)){console.error("report-info \u6240\u5728Component\u4E0D\u5B58\u5728\u6839\u8282\u70B9\uFF0C\u65E0\u6CD5\u652F\u6301\u66DD\u5149\u4E0A\u62A5");return}const{cBlock:o="",dBlock:i=""}=zt(this.autoReport);this.mixinBinding={arg:"show",modifiers:{strict:!1},value:{c:o,d:i,msg:this.autoReport.msg}},Ls(this.$el,this.mixinBinding,!1)}},beforeUnmount(){!this.autoReport||(vn(this.$el,this.mixinBinding),Kn(this.$el),Array.from(sn(this.$el)||[]).map(e=>{Kn(e)}))}}),Kl=({data:e,id:t},s,a)=>{var o,i;if(!t)return;const n=s?a?"sendStrictShowData":"sendShowData":"sendClickData";(i=(o=window.BiliCm)==null?void 0:o.Base)==null||i[n](Bs(e),t)},ps=({arg:e,value:t,modifiers:s},a)=>{if(!ce){if(s.ad){Kl(t,e==="show",a);return}if(ja(t)){kn(t,e);return}Ql(t)}},za=(e,{data:t,id:s,isUpLink:a},n=0)=>{var u,v,f,h;if(!s||!e||(e==null?void 0:e.getAttribute("rel")))return;const o="javascript:void(0);";a&&(t.archive={owner:Bs(t.author)});const i=a?(v=(u=window.BiliCm)==null?void 0:u.Base)==null?void 0:v.getSyncUrlForLogo:(h=(f=window.BiliCm)==null?void 0:f.Base)==null?void 0:h.getSyncUrl;if(!ts(i)){kn({c:"BiliCm",d:"error",e:"tech",type:"tech"});return}const r=i(Bs(t),s,null,!0);if(e==null||e.setAttribute("href",r||o),!r||r===o){if(n>10)return;setTimeout(()=>{za(e,{data:t,id:s,isUpLink:a},n+1)},1e3)}else e.setAttribute("rel","noopener"),e.setAttribute("target","_blank"),e.setAttribute("data-target-url",t.url)},vn=(e,t)=>{const s=!!t.modifiers.strict,a=!!t.modifiers.half;if(t.arg==="show"){if(!e.__lazy_handler__)return;e.__lazy_handler__=void 0,xe==null||xe.unobserve(e),s&&(Le==null||Le.unobserve(e)),a&&(Pe==null||Pe.unobserve(e))}else e.__report_handler__&&(e.removeEventListener(t.arg,e.__report_handler__,!0),e.__report_handler__=void 0)},Ls=(e,t,s)=>{const a=!!t.modifiers.strict,n=!!t.modifiers.half;t.arg==="show"?(e.__lazy_handler__=o=>{const i=()=>{if(o&&e.__strict_reported__||!o&&e.__reported__){xe==null||xe.unobserve(e),o&&(Le==null||Le.unobserve(e)),n&&(Pe==null||Pe.unobserve(e));return}ts(t.value)?t.value(o):ps({arg:t.arg,value:t.value,modifiers:t.modifiers},o),xe==null||xe.unobserve(e),o&&(Le==null||Le.unobserve(e)),n&&(Pe==null||Pe.unobserve(e))};o?setTimeout(()=>{!e.__in_viewport||i()},1e3):i()},s&&(xe==null||xe.observe(e),a&&(Le==null||Le.observe(e)),n&&(Pe==null||Pe.observe(e)))):(s||e.removeEventListener(t.arg,e.__report_handler__,!0),e.__report_handler__=()=>{ts(t.value)?t.value(!!t.modifiers.strict):ps(t,!!t.modifiers.strict),t.modifiers.once&&e.removeEventListener(t.arg,e.__report_handler__,!0)},e.addEventListener(t.arg,e.__report_handler__,!0)),t.modifiers.relink&&za(e,t.value),t.arg==="both"&&(e.__lazy_handler__=o=>{(()=>{if(o&&e.__strict_reported__||!o&&e.__reported__){xe==null||xe.unobserve(e),o&&(Le==null||Le.unobserve(e)),n&&(Pe==null||Pe.unobserve(e));return}ts(t.value)?t.value(o):ps({arg:"show",value:t.value,modifiers:t.modifiers},o),xe==null||xe.unobserve(e),o&&(Le==null||Le.unobserve(e)),n&&(Pe==null||Pe.unobserve(e))})()},s&&(xe==null||xe.observe(e),a&&(Le==null||Le.observe(e)),n&&(Pe==null||Pe.observe(e))),s||e.removeEventListener("click",e.__report_handler__both__,!0),e.__report_handler__both__=()=>{ts(t.value)?t.value(!!t.modifiers.strict):(t.arg="click",ps(t,!!t.modifiers.strict)),t.modifiers.once&&e.removeEventListener("click",e.__report_handler__both__,!0)},e.addEventListener("click",e.__report_handler__both__,!0))},Ss={name:"report",mounted(e,t){var s;if(t.arg==="msg"&&(e.__report_handler__msg__=()=>t==null?void 0:t.value),t.arg!=="disabled"){if((s=t.value)!=null&&s.mark){const{cBlock:a,dBlock:n}=zt(t.value);Ha(e,a,n)}Ls(e,t,!0)}},updated(e,t){if(t.arg==="msg"){e.__report_handler__msg__=()=>t==null?void 0:t.value;return}if(t.arg==="disabled"){vn(e,t);return}Ls(e,t,!1)},beforeUnmount(e,t){t.arg!=="disabled"&&vn(e,t)}};Ss.install=(e,t)=>{e.directive(Ss.name,Ss),e.mixin(Yl),zl(t==null?void 0:t.dom)};var Zl=Ss;let fs=null;const Xl=()=>{if(fs)return fs;const e={position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},t=document.createElement("canvas");t.width=window.innerWidth,t.height=window.innerHeight,document.body.appendChild(t),Object.assign(t.style,e),t.style.zIndex="9000";const s=t.getContext("webgl2",{premultipliedAlpha:!0});if(!s)throw new Error("WebGL2 not supported");return s.clearColor(0,0,0,0),s.viewport(0,0,t.width,t.height),fs=s,fs},ec=4,tc=.001,sc=1e-7,nc=10,ss=11,ms=1/(ss-1),ac=typeof Float32Array=="function";function qa(e,t){return 1-3*t+3*e}function Qa(e,t){return 3*t-6*e}function Ga(e){return 3*e}function Ps(e,t,s){return((qa(t,s)*e+Qa(t,s))*e+Ga(t))*e}function Ja(e,t,s){return 3*qa(t,s)*e*e+2*Qa(t,s)*e+Ga(t)}function ic(e,t,s,a,n){let o,i,r=0;do i=t+(s-t)/2,o=Ps(i,a,n)-e,o>0?s=i:t=i;while(Math.abs(o)>sc&&++r<nc);return i}function oc(e,t,s,a){for(let n=0;n<ec;++n){const o=Ja(t,s,a);if(o===0)return t;t-=(Ps(t,s,a)-e)/o}return t}function rc(e){return e}function lc(e,t,s,a){if(!(0<=e&&e<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&s===a)return rc;const n=ac?new Float32Array(ss):new Array(ss);for(let i=0;i<ss;++i)n[i]=Ps(i*ms,e,s);function o(i){let r=0,u=1;const v=ss-1;for(;u!==v&&n[u]<=i;++u)r+=ms;--u;const f=(i-n[u])/(n[u+1]-n[u]),h=r+f*ms,_=Ja(h,e,s);return _>=tc?oc(i,h,e,s):_===0?h:ic(i,r,r+ms,e,s)}return function(r){return r===0||r===1?r:Ps(o(r),t,a)}}const Zn=(e,t,s)=>{const a=e.createShader(t);if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){const n=`An error occurred compiling the shaders: ${e.getShaderInfoLog(a)}`;throw e.deleteShader(a),new Error(n)}return a};class cc{constructor({gl:t,vs:s,fs:a,transformFeedbackVaryings:n}){le(this,"gl");le(this,"program");le(this,"locations");le(this,"uniformBuffers");this.gl=t;const o=Zn(t,t.VERTEX_SHADER,s),i=Zn(t,t.FRAGMENT_SHADER,a),r=t.createProgram();if(!r)throw new Error("can not create shader program");if(this.program=r,t.attachShader(r,o),t.attachShader(r,i),n&&t.transformFeedbackVaryings(r,n,t.INTERLEAVED_ATTRIBS),t.linkProgram(r),t.deleteShader(o),t.deleteShader(i),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(r)}`);this.locations={},this.uniformBuffers={}}use(){this.gl.useProgram(this.program)}setUniform(t,s,a){var r;const n=this.gl;let o=this.locations[t];o||(o=n.getUniformLocation(this.program,t),this.locations[t]=o);const i={BOOLEAN:()=>n.uniform1i(o,Number(a)),INT:()=>n.uniform1i(o,Math.round(a)),FLOAT:()=>n.uniform1f(o,a),VEC2:()=>n.uniform2fv(o,a),VEC3:()=>n.uniform3fv(o,a),VEC4:()=>n.uniform4fv(o,a),MAT2:()=>n.uniformMatrix2fv(o,!1,a),MAT3:()=>n.uniformMatrix3fv(o,!1,a),MAT4:()=>n.uniformMatrix4fv(o,!1,a)};(r=i[s])==null||r.call(i)}setUniformBuffer(t,s){let a=this.uniformBuffers[t];a||(a=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,a),this.gl.uniformBlockBinding(this.program,0,0),this.gl.bindBufferBase(this.gl.UNIFORM_BUFFER,0,a),this.uniformBuffers[t]=a),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,a),this.gl.bufferData(this.gl.UNIFORM_BUFFER,s,this.gl.DYNAMIC_DRAW)}destroy(){this.gl.deleteProgram(this.program)}}let gs=null,Zt=null;const uc=(e,t,s)=>Math.max(t,Math.min(s,e)),dc=e=>{if(gs)return gs;const t=`#version 300 es
    precision mediump float;

    layout(location = 0) in vec2 i_position;

    uniform vec4 translate_scale;

    out vec2 position;

    void main() {
      position = i_position;
      gl_Position = vec4(position * translate_scale.zw + translate_scale.xy, 0., 1.);
    }
  `,s=`#version 300 es
    precision mediump float;
    in vec2 position;
    out vec4 fragColor;

    void main() {
      float d = clamp(1. - smoothstep(0.8, 0.9, length(position)), 0., 1.);
      fragColor = vec4(d, 0, 0, d);
    }
  `;return gs=new cc({gl:e,vs:t,fs:s}),gs},_c=e=>{if(Zt)return Zt;const t=new Float32Array([-1,1,-1,-1,1,1,1,-1]);Zt=e.createVertexArray();const s=e.createBuffer();return e.bindVertexArray(Zt),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!0,8,0),Zt},vc=(e,t,s,a)=>n=>{const o=-ft(n,3)+3*ft(n,2)-3*n+1,i=3*ft(n,3)-6*ft(n,2)+3*n,r=-3*ft(n,3)+3*ft(n,2),u=ft(n,3);return[o*e[0]+i*t[0]+r*s[0]+u*a[0],o*e[1]+i*t[1]+r*s[1]+u*a[1]]},hc=(e,t,s)=>{const a=Xl(),n=dc(a),o=_c(a),i=a.canvas.clientWidth,r=a.canvas.clientHeight,u=2/i,v=2/r,f=s!=null?s:800,h=5;let _=-1;const p=e[1]-t[1],b=vc(e,[e[0],e[1]-p*.8],[t[0],t[1]-50],t),S=lc(.5,0,.5,1),y=m=>{let w=uc((m-_)/f,0,1);w=S(w);const B=1+Math.min(w,.2-.2*w)*2;a.clear(a.COLOR_BUFFER_BIT),n.use();const $=b(w);n.setUniform("translate_scale","VEC4",[($[0]-i/2)*u,(r/2-$[1])*v,B*h*u,B*h*v]),a.bindVertexArray(o),a.drawArrays(a.TRIANGLE_STRIP,0,4)};return new Promise(m=>{const w=B=>{_<0&&(_=B),_+f>B?(requestAnimationFrame(w),y(B)):(m(),a.clear(a.COLOR_BUFFER_BIT))};requestAnimationFrame(w)})};const pc={aid:{type:Number,require:!0},visible:{type:Boolean,default:!0},target:{type:Object,require:!0},expanded:{type:Boolean,default:!1}},fc=ae({name:"WatchLater",components:{ClientOnly:Ds,SVGIconNext:as},inject:{isWatchlaterAddAni:{default:!1},isWatchlaterAddAniToPip:{default:!1},isVersionWatchlaterPipWindow:{default:!1},isVersionWatchlaterPipWindow2:{default:!1}},props:pc,emits:["do"],data:()=>({added:!1,showTip:!1,tipText:"",prompts:["\u7A0D\u540E\u518D\u770B","\u5DF2\u52A0\u7A0D\u540E\u518D\u770B","\u79FB\u9664","\u5DF2\u4ECE\u7A0D\u540E\u518D\u770B\u5217\u8868\u4E2D\u79FB\u9664","\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5","\u79FB\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"],promptIndex:0,promptErrMsg:"",loading:!1,showWLText:!1,showWLTextTimer:null,expandedTimer:null}),watch:{expanded:{immediate:!0,handler(){this.expandedChangeHandle()}}},methods:{doWatch(e){return q(this,null,function*(){const t=new FormData;return t.append("aid",String(this.aid)),t.append("csrf",lt.get("bili_jct")),fetch(e,{method:"post",credentials:"include",headers:{cookie:document.cookie},body:t}).then(s=>s.json())})},addWatchLater(){return q(this,null,function*(){const e=yield this.doWatch("//api.bilibili.com/x/v2/history/toview/add");if(this.$emit("do",{code:e.code,type:"add"}),this.isWatchlaterAddAni&&e.code===0){const t=this.$refs.watchLaterEl,s=document.querySelector('.watchlater-pip-button[data-watchlater-pip-entry="true"]'),a=document.querySelector('.right-entry__outside[data-header-fav-entry="true"]');let n=null;this.isWatchlaterAddAniToPip&&s?n=s:n=a;const o=n==null?void 0:n.querySelector("svg");if(t&&n&&o){const i=t.getBoundingClientRect(),r=o.getBoundingClientRect(),u=[i.left+i.width/2,i.top+i.height/2],v=[r.left+r.width+2,r.top+2],f=.8,_=Math.round(Math.sqrt(Math.pow(v[0]-u[0],2)+Math.pow(v[1]-u[1],2)))/f;window.dispatchEvent(new CustomEvent("globalwatchlatertipstatesync",{detail:{visible:!0,dot:{duration:_},from:"watchlater"}}));try{hc(u,v,_)}catch(p){console.error(p)}}}if(e.code===0){this.promptIndex=1,this.added=!0,window.CustomEvent&&window.dispatchEvent(new CustomEvent("globalwatchlaterstatesync",{detail:{visible:!0,action:"add",from:"watchlater",video:{aid:this.aid}}}));return}if(e.code===-101){cn.quickLogin();return}this.promptIndex=4,this.promptErrMsg=e.message})},delWatchLater(){return q(this,null,function*(){const e=yield this.doWatch("//api.bilibili.com/x/v2/history/toview/del");if(this.$emit("do",{code:e.code,type:"del"}),e.code===0){this.promptIndex=3,this.added=!1,window.CustomEvent&&window.dispatchEvent(new CustomEvent("globalwatchlaterstatesync",{detail:{visible:!1,action:"delete",from:"watchlater",video:{aid:this.aid}}}));return}if(e.code===-101){cn.quickLogin();return}this.promptIndex=5,this.promptErrMsg=e.message})},watchHandle(){return q(this,null,function*(){if(!this.loading){this.loading=!0;try{yield this.added?this.delWatchLater():this.addWatchLater()}catch(e){console.error(e)}this.loading=!1}})},mouseenterHandle(){this.promptIndex=this.added?2:0,this.showTip=!0,clearTimeout(this.expandedTimer),clearTimeout(this.showWLTextTimer),this.showWLTextTimer=setTimeout(()=>{this.showWLText=!0},200)},mouseleaveHandle(){this.showTip=!1,this.promptErrMsg="",clearTimeout(this.expandedTimer),clearTimeout(this.showWLTextTimer),this.showWLTextTimer=setTimeout(()=>{this.showWLText=!1,this.expandedChangeHandle()},200)},expandedChangeHandle(){if(clearTimeout(this.expandedTimer),!this.expanded||this.added){this.showWLText=!1;return}this.expandedTimer=setTimeout(()=>{this.showWLText=!0},3e3)}}}),mc={class:"bili-watch-later--wrap"},gc={class:"bili-watch-later__tip--lab"};function yc(e,t,s,a,n,o){const i=O("SVGIconNext"),r=O("client-only");return l(),N(r,null,{default:z(()=>[c("div",mc,[E(yt,{name:"watch-later-fade"},{default:z(()=>[x(c("div",{ref:"watchLaterEl",class:K(["bili-watch-later",{"bili-watch-later--pip":e.isVersionWatchlaterPipWindow||e.isVersionWatchlaterPipWindow2}]),onClick:t[0]||(t[0]=It((...u)=>e.watchHandle&&e.watchHandle(...u),["stop","prevent"])),onMouseenter:t[1]||(t[1]=(...u)=>e.mouseenterHandle&&e.mouseenterHandle(...u)),onMouseleave:t[2]||(t[2]=(...u)=>e.mouseleaveHandle&&e.mouseleaveHandle(...u))},[e.added?(l(),N(i,{key:0,icon:"BDC/checkmark_line/4",fill:"currentColor",class:"bili-watch-later__icon",size:20})):(l(),N(i,{key:1,icon:"BDC/arrow_play_next_line/1",fill:"currentColor",class:"bili-watch-later__icon",size:20})),e.isVersionWatchlaterPipWindow?(l(),d(X,{key:2},[c("span",gc,D(e.added?"\u5DF2\u6DFB\u52A0\u7A0D\u540E\u518D\u770B":"\u6DFB\u52A0\u81F3\u7A0D\u540E\u518D\u770B"),1),e.promptIndex===3||e.promptErrMsg?x((l(),d("span",{key:0,class:"bili-watch-later__tip center"},D(e.promptErrMsg||"\u5DF2\u79FB\u9664"),513)),[[Ue,e.showTip]]):F("",!0)],64)):e.isVersionWatchlaterPipWindow2?(l(),d(X,{key:3},[E(yt,{name:"watch-later-text"},{default:z(()=>[x(c("span",{class:"bili-watch-later__tip--lab"},D(e.added?"\u5DF2\u6DFB\u52A0\u7A0D\u540E\u518D\u770B":"\u6DFB\u52A0\u81F3\u7A0D\u540E\u518D\u770B"),513),[[Ue,e.showWLText]])]),_:1}),e.promptIndex===3||e.promptErrMsg?x((l(),d("span",{key:0,class:"bili-watch-later__tip center"},D(e.promptErrMsg||"\u5DF2\u79FB\u9664"),513)),[[Ue,e.showTip]]):F("",!0)],64)):(l(),N(yt,{key:4,name:"watch-later-fade"},{default:z(()=>[x(c("span",{class:K(["bili-watch-later__tip",{center:e.promptIndex===2}])},D(e.promptErrMsg||e.prompts[e.promptIndex]),3),[[Ue,e.showTip]])]),_:1}))],34),[[Ue,e.visible]])]),_:1})])]),_:1})}var Ya=ue(fc,[["render",yc]]);const wc=(e,t)=>{const s={aid:t,target:e};return E(ae({extends:Ya}),s)};var bc={component:Ya,name:"watchlater",mounted(e,t){const s=Number(t.value);if(!s||isNaN(s))return;const a=wc(e,s);pn(a,e)}};const kt="",Ka=ce?1e3:1e4,kc=e=>Qt().then(()=>Ye.post("pgc/web/follow/add",{season_id:e},qt()),()=>Promise.resolve({code:-1})),Cc=e=>Qt().then(()=>Ye.post("pgc/web/follow/del",{season_id:e},qt()),()=>Promise.resolve({code:-1})),Ac=e=>Qt().then(()=>Ye.post("x/esports/fav/add",{cid:e},qt())),$c=e=>Qt().then(()=>Ye.post("x/esports/fav/del",{cid:e},qt())),Ec=({limit:e})=>{let t={limit:e,platform:"web"},s=`${kt}x/web-interface/search/square`;const a=ha(t);return a&&(t=Object.assign({},t,a),s=`${kt}x/web-interface/wbi/search/square`),Ye.get(s,{params:t})},Fc=e=>{const t="//s.search.bilibili.com/main/suggest";return Ye.get(t,{params:e}).then(s=>s||{})},Os=e=>{const t=`${kt}x/relation/relations?${fn({fids:e.join(",")})}`;return Ye.get(t,{},Ws(!0)).then(s=>{const a={};return e.forEach(n=>a[n]={followed:!1,mid:n}),fa(s)&&Object.entries(s).forEach(([n,o])=>{a[n]={mid:+n,followed:o&&o.attribute<128,attribute:o&&o.attribute}}),a})},Us=(e,t)=>Qt().then(()=>{const s={fid:e.mid,act:1,re_src:120,spmid:"333.337.0.0",cross_domain:!0,extend_content:JSON.stringify({entity:"query",entity_id:t})};return Ye.post(`${kt}x/relation/modify`,s,qt())}),Hs=(e,t)=>Qt().then(()=>{const s={fid:e.mid,act:e.attribute===1?4:2,re_src:120,spmid:"333.337.0.0",cross_domain:!0,extend_content:JSON.stringify({entity:"query",entity_id:t})};return Ye.post(`${kt}x/relation/modify`,s,qt())}),Sc=e=>{const t=`${kt}x/article/metas?${fn({ids:e.join(",")})}`;return Ye.get(t,{},Ws(!0)).then(s=>s||{})};function Ws(e=!1,t=!1){return{ctx:typeof window=="undefined"?At():null,preload:e,com2co:e,encWbi:t,encWbiKeys:{wbiImgKey:"76e91e21c4df4e16af9467fd6f3e1095",wbiSubKey:"ddfca332d157450784b807c59cd7921e"}}}function qt(e=!1){return T({headers:{"Content-Type":"application/x-www-form-urlencoded"},withCSRF:!0},Ws(e))}function Za(e,t={}){return e=e||{},e.result=e.result||t,e.top_tlist=e.top_tlist||[],e}let Xn=!1;function Qt(){return new Promise((e,t)=>{bs.get().then(({data:s}={})=>{s&&s.isLogin?e(s):(bs.quickLogin(),Xn||(Xn=!0,bs.watch(a=>{a&&a.data&&a.data.isLogin&&window.location.reload()})),t())}).catch(t)})}const Bc=e=>{const t=`${kt}x/web-interface/search/egg?${fn({egg_id:e})}`;return Ye.get(t,{},Ws(!0)).then(Za)};const Ic=ae({props:{visible:{type:Boolean,default:!1},keyword:{type:String,default:""},suggestIndex:{type:Number,default:-1},cols:{type:Object,default:null}},emits:["searchTrending","searchSuggest","searchHistory","updateSuggest"],setup(e,{emit:t}){const s=A(null),a=A(null),n=A(0),o=A(!1),i=A(!0),r=A([]),u=A([]),v=A({}),f=A("init"),h=A(null),_=M(()=>{var C,k;const $=((C=v.value)==null?void 0:C.list)||[],g=((k=v.value)==null?void 0:k.top_list)||[];return $.forEach((L,Y)=>{L.position=Y+1}),g.forEach(L=>{L.isTop=!0}),g.concat($).slice(0,10)}),p=()=>q(this,null,function*(){var $;if(Vs()){try{r.value=JSON.parse((yield($=e.cols)==null?void 0:$.getItem("search_history"))||"[]")}catch(g){r.value=[]}setTimeout(()=>{var C,k;n.value=((C=s.value)==null?void 0:C.clientWidth)||0;const g=((k=a.value)==null?void 0:k.clientHeight)||0;o.value=g>80,o.value&&wt({c:"search_window",d:"search_history_more",e:"show",type:"appear"})})}}),b=()=>q(this,null,function*(){if(f.value!=="loading"){f.value="loading";try{const $=yield Ec({limit:10});v.value=$.trending||{},f.value="done"}catch($){f.value="error"}}}),S=()=>q(this,null,function*(){var C,k;const $=(k=(C=document.querySelector("meta[name=spm_prefix]"))==null?void 0:C.content)!=null?k:"0",g={func:"suggest",suggest_type:"accurate",sub_type:"tag",main_ver:"v1",highlight:"",userid:lt.get("DedeUserID")||"",bangumi_acc_num:1,special_acc_num:1,topic_acc_num:1,upuser_acc_num:3,tag_num:10,special_num:10,bangumi_num:10,upuser_num:3,term:e.keyword,rnd:Math.random(),buvid:lt.get("buvid3")||"",spmid:$};try{const L=yield Fc(g);L.code===0?(u.value=L.result.tag||[],t("updateSuggest",u.value)):(u.value=[],t("updateSuggest",u.value))}catch(L){u.value=[],t("updateSuggest",u.value),console.error(L)}}),y=$=>{var g;r.value.splice($,1),(g=e.cols)==null||g.setItem("search_history",JSON.stringify(r.value)),We(()=>{var k;const C=((k=a.value)==null?void 0:k.clientHeight)||0;o.value=C>80})},m=()=>{var $;r.value=[],o.value=!1,($=e.cols)==null||$.setItem("search_history","[]")},w=()=>{wt({c:"search_window",d:i.value?"search_history_put_away":"search_history_more",e:"show",type:"appear"}),i.value=!i.value},B=($,g,...C)=>{r.value=r.value.filter(k=>k.value!==g),r.value.unshift({value:g,timestamp:Date.now()}),We(()=>{var L;const k=((L=a.value)==null?void 0:L.clientHeight)||0;o.value=k>80}),t($,g,...C)};return fe(()=>e.visible,$=>{var g;!$||(o.value=!1,i.value=!0,n.value=((g=s.value)==null?void 0:g.clientWidth)||0,p(),f.value==="init"&&b())}),fe(()=>e.keyword,$=>{$?S():p()},{immediate:!0}),fe(()=>e.cols,$=>{var g,C;$&&((g=h.value)==null||g.call(h),h.value=(C=e.cols)==null?void 0:C.listen("search_history",k=>{r.value=JSON.parse(k||"[]")}))}),ze(()=>{const $=()=>{var k,L;const g=((k=s.value)==null?void 0:k.clientWidth)||0;if(!e.visible||n.value===g)return;n.value=g;const C=((L=a.value)==null?void 0:L.clientHeight)||0;o.value=C>80};window.ResizeObserver&&s.value&&new ResizeObserver(()=>$()).observe(s.value)}),{panelElRef:s,historiesElRef:a,clientWidth:n,foldVisible:o,trendingList:_,isFold:i,histories:r,suggestions:u,trending:v,loadState:f,handleRemoveHistoryRecord:y,handleClearHistory:m,toggleFold:w,emitSearch:B,trimHttp:Is}}}),Dc={ref:"panelElRef",class:"search-panel"},Tc={key:0,class:"history"},xc={class:"header"},Lc=c("div",{class:"title"},"\u641C\u7D22\u5386\u53F2",-1),Pc={ref:"historiesElRef",class:"histories"},Rc=["onClick","onKeydown"],Vc=["textContent"],Mc=["onClick"],Nc=c("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[c("path",{d:`M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462
                0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102
                447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499
                12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997
                9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727
                c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415
                c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221
                c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093
                l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924
                0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z`})],-1),Oc=[Nc],Uc=["textContent"],Hc=c("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M5.46967 9.17678C5.76256 9.46967 6.23744 9.46967 6.53033 9.17678L10.7286 4.97855
              C10.9238 4.78329 10.9238 4.46671 10.7286 4.27145C10.5333 4.07618 10.2167 4.07618 10.0214 4.27145L6 8.29289
              L1.97855 4.27145C1.78329 4.07618 1.46671 4.07618 1.27145 4.27145
              C1.07618 4.46671 1.07618 4.78329 1.27145 4.97855L5.46967 9.17678Z`},null,-1),Wc=[Hc],jc={key:1,class:"trending"},zc={class:"header"},qc={class:"title"},Qc={key:0,class:"trendings-single"},Gc=["onClick","onKeydown"],Jc={key:0,class:"trendings-rank trendings-top"},Yc=["textContent"],Kc=["textContent"],Zc=["src"],Xc={key:1,class:"trendings-double"},eu=["onClick","onKeydown"],tu={key:0,class:"trendings-rank trendings-top"},su=["textContent"],nu=["textContent"],au=["src"],iu=["onClick","onKeydown"],ou={key:0,class:"trendings-rank trendings-top"},ru=["textContent"],lu=["textContent"],cu=["src"],uu={key:2,class:"suggestions"},du=["onClick","innerHTML"];function _u(e,t,s,a,n,o){const i=Ee("report");return x((l(),d("div",Dc,[!e.keyword&&e.histories.length?x((l(),d("div",Tc,[c("div",xc,[Lc,x(c("div",{class:"clear",onClick:t[0]||(t[0]=(...r)=>e.handleClearHistory&&e.handleClearHistory(...r))}," \u6E05\u7A7A ",512),[[i,{spm:"search_window.search_history_delete_all"},"click"]])]),c("div",{class:"histories-wrap",style:je({maxHeight:e.foldVisible&&e.isFold?"92px":"172px"})},[c("div",Pc,[(l(!0),d(X,null,de(e.histories,(r,u)=>(l(),d("div",{key:r.value,class:"history-item",tabindex:"0",onClick:v=>e.emitSearch("searchHistory",r.value,u),onKeydown:ls(v=>e.emitSearch("searchHistory",r.value,u),["enter"])},[c("div",{class:"history-text",textContent:D(r.value)},null,8,Vc),x(c("div",{class:"close",onClick:It(v=>e.handleRemoveHistoryRecord(u),["stop"])},Oc,8,Mc),[[i,{spm:"search_window.search_history_delete",msg:{location:u+1,content:r.value}},"click"]])],40,Rc))),128))],512)],4),e.foldVisible?x((l(),d("div",{key:0,class:"history-fold-wrap",onClick:t[1]||(t[1]=(...r)=>e.toggleFold&&e.toggleFold(...r))},[c("div",{class:"fold-text",textContent:D(e.isFold?"\u5C55\u5F00\u66F4\u591A":"\u6536\u8D77")},null,8,Uc),(l(),d("svg",{class:K(["fold-icon",e.isFold?"fold":""]),viewBox:"0 0 12 12"},Wc,2))],512)),[[i,{spm:`search_window.${e.isFold?"search_history_more":"search_history_put_away"}`},"click"]]):F("",!0)],512)),[[i,{spm:"search_window.search_history"},"show"]]):F("",!0),!e.keyword&&e.loadState==="done"&&e.trendingList.length?(l(),d("div",jc,[c("div",zc,[c("div",qc,D(e.trending.title||"bilibili\u70ED\u641C"),1)]),e.clientWidth<422?(l(),d("div",Qc,[(l(!0),d(X,null,de(e.trendingList,(r,u)=>(l(),d("div",{key:r.keyword,class:"trending-item",tabindex:"0",onClick:v=>e.emitSearch("searchTrending",r.keyword,u,e.trending.trackid,r.show_name,r.isTop?1:0),onKeydown:ls(v=>e.emitSearch("searchTrending",r.keyword,u,e.trending.trackid,r.show_name,r.isTop?1:0),["enter"])},[r.isTop?(l(),d("div",Jc)):(l(),d("div",{key:1,class:K(["trendings-rank",r.position<=3?"search-rank-top":""]),textContent:D(r.position)},null,10,Yc)),c("div",{class:"trending-text",textContent:D(r.show_name)},null,8,Kc),r.icon?(l(),d("img",{key:2,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,Zc)):F("",!0)],40,Gc))),128))])):F("",!0),e.clientWidth>=422?(l(),d("div",Xc,[c("div",{class:"trendings-col",style:je({maxWidth:`${(e.clientWidth-10)/2}px`})},[(l(!0),d(X,null,de(e.trendingList.filter((r,u)=>u%2===0),(r,u)=>(l(),d("div",{key:r.keyword,class:"trending-item",tabindex:"0",onClick:v=>e.emitSearch("searchTrending",r.keyword,u,e.trending.trackid,r.show_name,r.isTop?1:0),onKeydown:ls(v=>e.emitSearch("searchTrending",r.keyword,u,e.trending.trackid,r.show_name,r.isTop?1:0),["enter"])},[r.isTop?(l(),d("div",tu)):(l(),d("div",{key:1,class:K(["trendings-rank",r.position<=3?"search-rank-top":""]),textContent:D(r.position)},null,10,su)),c("div",{class:"trending-text",textContent:D(r.show_name)},null,8,nu),r.icon?(l(),d("img",{key:2,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,au)):F("",!0)],40,eu))),128))],4),c("div",{class:"trendings-col",style:je({maxWidth:`${(e.clientWidth-10)/2}px`})},[(l(!0),d(X,null,de(e.trendingList.filter((r,u)=>u%2===1),(r,u)=>(l(),d("div",{key:r.keyword,class:"trending-item",tabindex:"0",onClick:v=>e.emitSearch("searchTrending",r.keyword,u+5,e.trending.trackid,r.show_name,r.isTop?1:0),onKeydown:ls(v=>e.emitSearch("searchTrending",r.keyword,u+5,e.trending.trackid,r.show_name,r.isTop?1:0),["enter"])},[r.isTop?(l(),d("div",ou)):(l(),d("div",{key:1,class:K(["trendings-rank",r.position<=3?"search-rank-top":""]),textContent:D(r.position)},null,10,ru)),c("div",{class:"trending-text",textContent:D(r.show_name)},null,8,lu),r.icon?(l(),d("img",{key:2,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,cu)):F("",!0)],40,iu))),128))],4)])):F("",!0)])):F("",!0),e.keyword?(l(),d("div",uu,[(l(!0),d(X,null,de(e.suggestions,(r,u)=>(l(),d("div",{key:r.value,class:K([e.suggestIndex===u?"active":"","suggest-item"]),tabindex:"0",onClick:v=>e.emitSearch("searchSuggest",r.value,u),innerHTML:r.name},null,10,du))),128))])):F("",!0)],512)),[[Ue,e.visible&&(!e.keyword||e.suggestions.length)]])}var vu=ue(Ic,[["render",_u]]);const hu={func:{type:Function,required:!0},type:{type:String,default:"page"},autoload:{type:Number,default:1},ssr:{type:Boolean,default:!1},query:{type:Object}},pu=ae({name:"BiliListView",components:{ListView:Ti,WidgetTvTips:Br},props:hu,emits:["success","error"],setup(e,{emit:t}){const s=A(null);return{loaderRef:s,onSuccess:r=>{t("success",r)},onError:r=>{t("error",r)},call:function(){!s.value||s.value[arguments[0]](arguments[1],arguments[2])},loginHandle:()=>{cn.quickLogin()}}}}),fu={class:"list-state-error"},mu={key:1},gu=c("div",{class:"list-state-loading"},[c("i"),c("span",null,"\u52A0\u8F7D\u4E2D\u2026")],-1),yu={class:"list-state-nothing"},wu=c("span",null,"\u6CA1\u6709\u6570\u636E(-_-#)",-1);function bu(e,t,s,a,n,o){const i=O("WidgetTvTips"),r=O("list-view");return l(),N(r,{ref:"loaderRef",autoload:e.autoload,preload:800,func:e.func,type:e.type,ssr:e.ssr,query:e.query,onError:e.onError,onSuccess:e.onSuccess},{default:z(({result:u,extra:v,total:f})=>[Xt(e.$slots,"default",{result:u,extra:v,total:f})]),error:z(({error:u})=>[Xt(e.$slots,"error",{error:u},()=>[c("div",fu,[E(i),u.code===401?(l(),d("button",{key:0,class:"login-btn",onClick:t[0]||(t[0]=It((...v)=>e.loginHandle&&e.loginHandle(...v),["stop"]))}," \u7ACB\u5373\u767B\u5F55 ")):(l(),d("span",mu,D((u==null?void 0:u.message)||"\u52A0\u8F7D\u5931\u8D25"),1))])])]),loading:z(()=>[Xt(e.$slots,"loading",{},()=>[gu])]),nothing:z(()=>[Xt(e.$slots,"nothing",{},()=>[c("div",yu,[E(i),wu])])]),_:3},8,["autoload","func","type","ssr","query","onError","onSuccess"])}var ea=ue(pu,[["render",bu]]);const ku=ae({name:"BiliLiveSkeleton"}),Cu={class:"bili-live-card__skeleton"},Au=mn('<div class="bili-live-card__skeleton--cover"></div><div class="bili-live-card__skeleton--info"><div class="bili-live-card__skeleton--face"></div><div class="bili-live-card__skeleton--right"><p class="bili-live-card__skeleton--text"></p><p class="bili-live-card__skeleton--light"></p></div></div>',2),$u=[Au];function Eu(e,t,s,a,n,o){return l(),d("div",Cu,$u)}var Fu=ue(ku,[["render",Eu]]);const Su=ae({name:"BiliLiveCard",directives:{[Ts.VDirective.name]:Ts.VDirective,[gt.VSpm.name]:gt.VSpm,[gt.VScale.name]:gt.VScale},components:{ClientOnly:Ds,Skeleton:Fu,VImg:it,VAvatar:Ra,VPopover:xs,WidgetUp:bn},props:{skeleton:{type:Boolean,default:!1},shortTitle:{type:Boolean,default:!1},imgCbStr:{type:String,default:""},imgStyle:{type:String,default:""},isRcmd:{type:Boolean,default:!1},concise:{type:Boolean,default:!1},disableInlinePlay:{type:Boolean,default:!1},showAvatar:{type:Boolean,default:!1},playerOption:{type:Object,default:()=>({delay:200})},disableScale:{type:Boolean,default:!1},info:{type:Object,default:()=>({roomId:0,sessionId:"",groupId:0,title:"",cover:"",frameCover:"",url:"",verify:{type:0},author:{mid:0,name:"",face:""},stats:{online:0,area:""},showCallBack:"",clickCallBack:"",watched_show:{icon:"",icon_location:0,icon_web:"",num:0,switch:!1,text_large:"",text_small:""}})},liveFrom:{type:String,default:""},reportImageHalf:{type:Function,default:()=>({})},coverRadio:{type:Number,default:56.25}},emits:["click-live","click-uname","show-nointerest","click-nointerest","click-revert-nointerest"],setup:(e,{emit:t})=>{const s=A(),a=A(!0),{roomId:n,stats:o,url:i,clickCallBack:r,showCallBack:u,sessionId:v,groupId:f,watched_show:h,author:_}=e.info,p={online:nt((o||{}).online)},b=_s(i||`//live.bilibili.com/${n}`,e.liveFrom?{session_id:v,launch_id:f,live_from:e.liveFrom}:{session_id:v,launch_id:f}),S={room:v&&f?b:_s(i,e.liveFrom?{live_from:e.liveFrom}:{}),space:`//space.bilibili.com/${_.mid}`},y=!e.disableInlinePlay&&{roomId:n,config:T({delay:200},e.playerOption)},m=()=>{r&&fetch(r),t("click-live")},w=(Z,P)=>{if(Z==="in"){P.target.classList.add("scale-in");return}P.target.classList.remove("scale-in")},B=()=>{t("click-uname",e.info)};ze(()=>{u&&fetch(u);const Z=_s(i||`//live.bilibili.com/${n}`,e.liveFrom?{session_id:v,launch_id:f,live_from:e.liveFrom}:{session_id:v,launch_id:f});S.value={room:v&&f?Z:_s(i,e.liveFrom?{live_from:e.liveFrom}:{})}});const $=A(!1),g=()=>{$.value=!0},C=()=>{$.value=!1},k=j("isVersionHaveNoInterest",!1),L=j("isFeed",!1),Y=A([{text:"\u5185\u5BB9\u4E0D\u611F\u5174\u8DA3",value:1},{text:"\u4E0D\u60F3\u770B\u6B64UP\u4E3B",value:2}]),I=A(!1),U=()=>{I.value=!0},Q=()=>{I.value=!1},te=A(!1),G=A(null),ve=Z=>{te.value=!0,I.value=!1,G.value=Z,t("click-nointerest",G.value)},$e=()=>{te.value=!1,t("click-revert-nointerest",G.value)},H=()=>{t("show-nointerest")};return{biliVideoCard:s,isCardVisible:a,onClickName:B,formats:p,links:S,inlineLivePlayerOption:y,liveCardClickHandle:m,scaleHandle:w,iconUrl:M(()=>Is((h==null?void 0:h.icon)||"")),watchedNum:M(()=>(h==null?void 0:h.text_small)||0),isHoverCard:$,hoverOnCard:g,leaveCard:C,isVersionHaveNoInterest:k,isFeed:L,noInterestOptions:Y,showNoInterestPanel:I,isNoInterest:te,curNoInterestOption:G,hoverOnNoInterest:U,leaveNoInterest:Q,clickNoInterest:ve,clickRevetNoInterest:$e,reportShowNoInterest:H}}}),Bu={class:"bili-live-card__no-interest"},Iu={class:"bili-live-card__no-interest--inner"},Du={class:"bili-live-card__no-interest--left"},Tu={class:"no-interest-title"},xu=c("span",{class:"no-interest-desc"},"\u5C06\u51CF\u5C11\u6B64\u7C7B\u5185\u5BB9\u63A8\u8350",-1),Lu={class:"bili-live-card__no-interest--right"},Pu=["href"],Ru={class:"bili-live-card__image"},Vu={key:0,class:"bili-live-card__stats"},Mu={key:0,class:"bili-live-card__stats--item"},Nu={class:"bili-live-card__stats--area"},Ou={class:"bili-live-card__info __scale-disable"},Uu={class:"bili-live-card__info--text"},Hu={class:"bili-live-card__info--no-interest-panel"},Wu=["onClick"],ju={class:"bili-live-card__info--tit"},zu=["href"],qu={key:0,class:"bili-live-card__info--living"},Qu=c("img",{width:"12",height:"12",src:"https://s1.hdslb.com/bfs/static/jinkela/long/images/live.gif"},null,-1),Gu=c("span",{class:"bili-live-card__info--living__text"},"\u76F4\u64AD\u4E2D",-1),Ju=[Qu,Gu],Yu=["href"];function Ku(e,t,s,a,n,o){const i=O("Skeleton"),r=O("SVGIconNext"),u=O("ClientOnly"),v=O("VImg"),f=O("VAvatar"),h=O("v-popover"),_=O("WidgetUp"),p=Ee("report"),b=Ee("inline-player"),S=Ee("spm"),y=Ee("scale");return l(),d("div",{ref:"biliVideoCard",class:K(["bili-live-card",{"bili-live-card__short":e.shortTitle,"bili-live-card__concise":e.concise,"is-rcmd":e.isRcmd,"enable-no-interest":e.isFeed&&e.isVersionHaveNoInterest}]),style:je({"--cover-radio":`${e.coverRadio}%`})},[E(i,{class:K({hide:!e.skeleton&&e.isCardVisible})},null,8,["class"]),!e.skeleton&&e.isCardVisible?x((l(),d("div",{key:0,class:"bili-live-card__wrap __scale-wrap",onScaleIn:t[4]||(t[4]=m=>e.scaleHandle("in",m)),onScaleOut:t[5]||(t[5]=m=>e.scaleHandle("out",m)),onMouseenter:t[6]||(t[6]=(...m)=>e.hoverOnCard&&e.hoverOnCard(...m)),onMouseleave:t[7]||(t[7]=(...m)=>e.leaveCard&&e.leaveCard(...m))},[E(u,null,{default:z(()=>[E(yt,{name:"nointerestmask"},{default:z(()=>{var m,w;return[x(c("div",Bu,[c("div",Iu,[c("div",Du,[E(r,{class:"no-interest-icon",icon:"BDC/dislike_fill/1",fill:"currentColor"}),c("span",Tu,D((w=(m=e.curNoInterestOption)==null?void 0:m.text)!=null?w:"\u4E0D\u611F\u5174\u8DA3"),1),xu]),c("div",Lu,[c("div",{class:"revert-btn",onClick:t[0]||(t[0]=It((...B)=>e.clickRevetNoInterest&&e.clickRevetNoInterest(...B),["stop"]))},[E(r,{class:"revert-icon",icon:"BDC/arrow_undo_line/2",fill:"currentColor"}),ne(" \u64A4\u9500 ")])])])],512),[[Ue,e.isNoInterest]])]}),_:1})]),_:1}),x(c("a",{class:K(["bili-live-card__image--link",{"bili-live-card__image--link--filter":e.isNoInterest}]),href:e.links.room,target:"_blank",onClick:t[1]||(t[1]=(...m)=>e.liveCardClickHandle&&e.liveCardClickHandle(...m))},[x(c("div",Ru,[E(v,{class:"bili-live-card__cover",src:e.info.cover,alt:e.info.author.name,width:336,height:336*e.coverRadio*.01,"bfs-style":e.imgStyle,rule:"1c"},null,8,["src","alt","height","bfs-style"]),e.info.stats?(l(),d("div",Vu,[e.watchedNum?(l(),d("div",Mu,[c("div",{class:"bili-live-card__stats--icon",style:je({backgroundImage:`url(${e.iconUrl}@48w)`})},null,4),c("span",null,D(e.watchedNum),1)])):F("",!0),c("span",Nu,D(e.info.stats.area),1)])):F("",!0)],512),[[p,e.reportImageHalf,"show",{half:!0}],[b,e.inlineLivePlayerOption,"live"]])],10,Pu),[[S,e.info.spmInfo]]),x(c("div",Ou,[e.info.author.face&&e.showAvatar?(l(),N(f,{key:0,"custom-class":"bili-live-card__info--avatar",info:e.info.author,size:36},null,8,["info"])):F("",!0),c("div",Uu,[e.isFeed&&e.isVersionHaveNoInterest&&!e.isNoInterest?(l(),N(h,{key:0,method:"hover",offset:5,placement:"bottom-end",onShow:e.hoverOnNoInterest,onHide:e.leaveNoInterest},{trigger:z(()=>[x(c("div",{class:K(["bili-live-card__info--no-interest",{active:e.showNoInterestPanel}])},[E(r,{class:"bili-live-card__info--no-interest--icon",icon:"BDC/more_vertical_fill/1",fill:"currentColor"})],2),[[Ue,e.isHoverCard||e.showNoInterestPanel]])]),content:z(()=>[x(c("div",Hu,[(l(!0),d(X,null,de(e.noInterestOptions,(m,w)=>(l(),d("div",{key:w,class:"bili-live-card__info--no-interest-panel--item",onClick:B=>e.clickNoInterest(m)},D(m.text),9,Wu))),128))],512),[[p,()=>e.reportShowNoInterest(),"show"]])]),_:1},8,["onShow","onHide"])):F("",!0),c("h3",ju,[x(c("a",{href:e.links.room,target:"_blank",onClick:t[2]||(t[2]=(...m)=>e.liveCardClickHandle&&e.liveCardClickHandle(...m))},[e.concise?F("",!0):(l(),d("div",qu,Ju)),c("span",null,D(e.info.title),1)],8,zu),[[S,e.info.spmInfo]])]),e.info.author.name?(l(),d("a",{key:1,href:e.links.space,class:"bili-live-card__info--uname",target:"_blank",onClick:t[3]||(t[3]=(...m)=>e.onClickName&&e.onClickName(...m))},[E(_,{class:"bili-live-card__info--uname-icon"}),c("span",null,D(e.info.author.name),1)],8,Yu)):F("",!0)])],512),[[Ue,!e.isNoInterest]])],544)),[[y,e.disableScale,"disabled"]]):F("",!0)],6)}var ta=ue(Su,[["render",Ku]]);const Zu={concise:{type:Boolean,default:!1},popover:{type:Boolean,default:!0},info:{type:Object,default:()=>({aid:"",bvid:"",score:"",title:"",cover:"",author:{name:"",mid:0},stats:{coin:"",favorite:"",view:"",danmu:""},links:{page:""}})}},Xu=ae({name:"BiliRankVideoCard",directives:{spm:{mounted(e,t){if(!t.value)return;const s=Bs(t.value)||{};for(const a in s)e.setAttribute(`data-${a}`,s[a])}}},components:{VImg:it},props:Zu,emits:["click-video"]}),ed=["href"],td={key:0,class:"rank-video-card__image"},sd={class:"rank-video-card__info"},nd=["title"];function ad(e,t,s,a,n,o){const i=O("VImg"),r=Ee("spm");return x((l(),d("a",{href:e.info.links.page,class:K(["rank-video-card",{"rank-video-card__concise":e.concise}]),target:"_blank",onClick:t[0]||(t[0]=u=>e.$emit("click-video"))},[e.concise?F("",!0):(l(),d("div",td,[E(i,{class:"rank-video-card__cover",src:e.info.cover,alt:e.info.title,width:96,height:54,rule:"1c"},null,8,["src","alt"])])),c("div",sd,[c("h3",{class:"rank-video-card__info--tit",title:e.info.title},D(e.info.title),9,nd)])],10,ed)),[[r,e.info.spmInfo]])}var id=ue(Xu,[["render",ad]]);const od={customClass:String,grid:{type:Boolean,default:!1},popover:{type:Boolean,default:!0},list:{require:!0,default:()=>[{aid:"",bvid:"",score:0,title:"",cover:"",author:{name:"",mid:0},enable_vt:0,stats:{coin:0,favorite:0,view:0,danmu:0,vt:0,vt_display:""},url:""}]},useInnerReport:{type:Boolean,default:!1},mergeReportMsg:{type:Object,default:{}}},rd=ae({name:"BiliRankListVideo",components:{Card:id,VPopover:xs,SVGIconNext:as},props:od,emits:["click-video","show-video"],setup(e,{emit:t}){var r,u,v,f;const s=h=>{const{score:_,pubdate:p,stats:b,url:S,bvid:y,enable_vt:m}=h||{},{coin:w,favorite:B,view:$,danmu:g,vt:C,vt_display:k}=b||{};return ke(T({},h),{enable_vt:m,score:nt(_),pubdate:Da(p),stats:{view:nt($),danmu:nt(g),favorite:nt(B),coin:nt(w),vt:nt(C),vt_display:k!=null?k:""},links:{page:S||`//www.bilibili.com/video/${y}/`}})},a=({info:h,index:_},p)=>{var b,S;if(!e.useInnerReport){t("click-video",{info:h,index:_},p);return}dn({c:(b=h.spmInfo)==null?void 0:b.mod,d:(S=h.spmInfo)==null?void 0:S.idx,e:"click",type:"click"},{msg:JSON.stringify(T({aid:h.aid,location:_+1},e.mergeReportMsg))})},n=(h,_)=>{var p,b;if(!e.useInnerReport){t("show-video",{info:h,index:_});return}dn({c:(p=h.spmInfo)==null?void 0:p.mod,d:(b=h.spmInfo)==null?void 0:b.idx,e:"show",type:"appear"},{msg:JSON.stringify(T({aid:h.aid,location:_+1},e.mergeReportMsg))})},o=(e.list||[]).map(s),i=(o==null?void 0:o.length)&&`${(u=(r=o[0])==null?void 0:r.spmInfo)==null?void 0:u.mod}.${(f=(v=o[0])==null?void 0:v.spmInfo)==null?void 0:f.idx}`;return{transformedList:o,dateSpmId:i,reportClickVideo:a,reportShowVideo:n}}}),ld=["data-report"],cd={class:"bili-rank-list-video__item--wrap"},ud=["data-index"],dd={class:"rank-video-card__popover"},_d={class:"rank-video-card__popover--top"},vd={class:"rank-video-card__image rank-video-card__popover--image"},hd={class:"rank-video-card__info rank-video-card__popover--info"},pd=["title"],fd={class:"rank-video-card__popover--author"},md={class:"rank-video-card__popover--stats"},gd={key:0,class:"rank-video-card__popover--stats__item"},yd={key:1,class:"rank-video-card__popover--stats__item"},wd={class:"rank-video-card__popover--stats__item"},bd={class:"rank-video-card__popover--stats__item"},kd={class:"rank-video-card__popover--stats__item"};function Cd(e,t,s,a,n,o){const i=O("Card"),r=O("VImg"),u=O("SVGIconNext"),v=O("v-popover"),f=Ee("report");return l(),d("div",{class:K(["bili-rank-list-video",{"bili-rank-list-video__grid":e.grid}]),"data-report":e.dateSpmId},[c("ul",{class:K(["bili-rank-list-video__list",e.customClass])},[(l(!0),d(X,null,de(e.transformedList,(h,_)=>x((l(),d("li",{key:_,class:"bili-rank-list-video__item"},[E(v,{offset:0,disabled:!e.popover,"show-delay":200,"hover-content":!1,classname:"bili-rank-list-video",placement:"top"},{trigger:z(()=>[c("div",cd,[c("span",{class:"bili-rank-list-video__item--index","data-index":_+1},D(_+1),9,ud),E(i,{info:h,concise:_!==0,popover:e.popover,onClickVideo:p=>e.reportClickVideo({info:h,index:_},p)},null,8,["info","concise","popover","onClickVideo"])])]),content:z(()=>[c("div",dd,[c("div",_d,[c("div",vd,[E(r,{class:"rank-video-card__cover rank-video-card__popover--cover",src:h.cover,alt:h.title,width:96,height:54},null,8,["src","alt"])]),c("div",hd,[c("h3",{class:"rank-video-card__popover--tit",title:h.title},D(h.title),9,pd),c("p",fd,[c("span",null,D(h.author.name),1),c("span",null," \xB7 "+D(h.pubdate),1)])])]),c("ul",md,[h!=null&&h.enable_vt?(l(),d("li",gd,[E(u,{icon:"BDC/playtime_square_line/1",fill:"currentColor",class:"rank-video-card__popover--icon"}),c("span",null,D(h.stats.vt_display||h.stats.vt),1)])):(l(),d("li",yd,[E(u,{icon:"BDC/playdata_square_line/1",fill:"currentColor",class:"rank-video-card__popover--icon"}),c("span",null,D(h.stats.view),1)])),c("li",wd,[E(u,{icon:"BDC/danmu_square_line/1",fill:"currentColor",class:"rank-video-card__popover--icon"}),c("span",null,D(h.stats.danmu),1)]),c("li",bd,[E(u,{icon:"BDC/star_favorite_line/1",fill:"currentColor",class:"rank-video-card__popover--icon"}),c("span",null,D(h.stats.favorite),1)]),c("li",kd,[E(u,{icon:"BDC/coin_text_line/1",fill:"currentColor",class:"rank-video-card__popover--icon"}),c("span",null,D(h.stats.coin),1)])])])]),_:2},1032,["disabled"])])),[[f,()=>e.reportShowVideo(h,_),"show"]])),128))],2)],10,ld)}var sa=ue(rd,[["render",Cd]]);const Tt=Symbol("PROVIDE_KEYWORD"),Ve=Symbol("PROVIDE_REPORT_PARAMS"),Xa=Symbol("PROVIDE_IS_NET_ERROR"),ei=Symbol("PROVIDE_IS_LOADING_ALL"),ti=Symbol("PROVIDE_SEARCH_ALL_RES"),xt=Symbol("PROVIDE_SEARCH_TYPE_SEID"),Ad=Symbol("PROVIDE_VIDEO_FILTERS"),Cn=Symbol("PROVIDE_VIDEO_PAGE_INFO"),si=Symbol("PROVIDE_JUMP_TO_PAGE"),ut=Symbol("PROVIDE_SCROLL_TO_TOP"),ni=Symbol("PROVIDE_DO_SEARCH"),An=Symbol("PROVIDE_SUBMIT_SEARCH"),Lt=Symbol("PROVIDE_QVID"),Pt=Symbol("PROVIDE_INIT_QVID"),ot=Symbol("PROVIDE_EVENTS");var st=(e=>(e.all="all",e.video="video",e.bangumi="bangumi",e.pgc="pgc",e.live="live",e.article="article",e.topic="topic",e.upuser="upuser",e))(st||{});const $d=Object.keys(st),Ed=ct("totalrank","click","pubdate","dm","stow"),Fd=ct(0,1,2,3,4),Sd=ct("totalrank","pubdate","click","attention","scores"),Bd=ct(0,2,1,28,3,29,16,17,41),Id=ct("live","live_user","live_room"),Dd=ct("online","live_time"),Td=ct("","fans","level"),xd=ct(0,1),Ld=ct(0,1,2,3),na={xs:1100,sm:1440,md:1700,lg:1920,xl:2200},Pd={0:"\u9884\u7EA6",1:"\u4E0B\u8F7D",2:"\u8D2D\u4E70",3:"\u8FDB\u5165"},Ze={tips:"tips",brand_ad:"brand_ad",esports:"esports",activity:"activity",web_game:"web_game",media_bangumi:"media_bangumi",media_ft:"media_ft",bili_user:"bili_user",video:"video"},Ot={tips:"tips",brand_ad:"brand_ad",esports:"esports",activity_game:"activity_game",media_mixin:"media_mixin",bili_user:"bili_user",user:"user",video:"video"},os=[{tids:0,name:"\u5168\u90E8\u5206\u533A",children:[]},{tids:1,name:"\u52A8\u753B",children:[{tids:24,name:"MAD\xB7AMV"},{tids:25,name:"MMD\xB73D"},{tids:47,name:"\u77ED\u7247\xB7\u624B\u4E66"},{tids:257,name:"\u914D\u97F3"},{tids:210,name:"\u624B\u529E\xB7\u6A21\u73A9"},{tids:86,name:"\u7279\u6444"},{tids:253,name:"\u52A8\u6F2B\u6742\u8C08"},{tids:27,name:"\u7EFC\u5408"}]},{tids:13,name:"\u756A\u5267",children:[{tids:32,name:"\u5B8C\u7ED3\u52A8\u753B"},{tids:33,name:"\u8FDE\u8F7D\u52A8\u753B"},{tids:51,name:"\u8D44\u8BAF"},{tids:152,name:"\u5B98\u65B9\u5EF6\u4F38"}]},{tids:167,name:"\u56FD\u521B",children:[{tids:153,name:"\u56FD\u4EA7\u52A8\u753B"},{tids:168,name:"\u56FD\u4EA7\u539F\u521B\u76F8\u5173"},{tids:169,name:"\u5E03\u888B\u620F"},{tids:195,name:"\u52A8\u6001\u6F2B\xB7\u5E7F\u64AD\u5267"},{tids:170,name:"\u8D44\u8BAF"}]},{tids:3,name:"\u97F3\u4E50",children:[{tids:28,name:"\u539F\u521B\u97F3\u4E50"},{tids:31,name:"\u7FFB\u5531"},{tids:59,name:"\u6F14\u594F"},{tids:30,name:"VOCALOID\xB7UTAU"},{tids:29,name:"\u97F3\u4E50\u73B0\u573A"},{tids:193,name:"MV"},{tids:243,name:"\u4E50\u8BC4\u76D8\u70B9"},{tids:244,name:"\u97F3\u4E50\u6559\u5B66"},{tids:130,name:"\u97F3\u4E50\u7EFC\u5408"}]},{tids:129,name:"\u821E\u8E48",children:[{tids:20,name:"\u5B85\u821E"},{tids:198,name:"\u8857\u821E"},{tids:199,name:"\u660E\u661F\u821E\u8E48"},{tids:200,name:"\u56FD\u98CE\u821E\u8E48"},{tids:255,name:"\u624B\u52BF\xB7\u7F51\u7EA2\u821E"},{tids:154,name:"\u821E\u8E48\u7EFC\u5408"},{tids:156,name:"\u821E\u8E48\u6559\u7A0B"}]},{tids:4,name:"\u6E38\u620F",children:[{tids:17,name:"\u5355\u673A\u6E38\u620F"},{tids:171,name:"\u7535\u5B50\u7ADE\u6280"},{tids:172,name:"\u624B\u673A\u6E38\u620F"},{tids:65,name:"\u7F51\u7EDC\u6E38\u620F"},{tids:173,name:"\u684C\u6E38\u68CB\u724C"},{tids:121,name:"GMV"},{tids:136,name:"\u97F3\u6E38"},{tids:19,name:"Mugen"}]},{tids:36,name:"\u77E5\u8BC6",children:[{tids:201,name:"\u79D1\u5B66\u79D1\u666E"},{tids:124,name:"\u793E\u79D1\xB7\u6CD5\u5F8B\xB7\u5FC3\u7406"},{tids:228,name:"\u4EBA\u6587\u5386\u53F2"},{tids:207,name:"\u8D22\u7ECF\u5546\u4E1A"},{tids:208,name:"\u6821\u56ED\u5B66\u4E60"},{tids:209,name:"\u804C\u4E1A\u804C\u573A"},{tids:229,name:"\u8BBE\u8BA1\xB7\u521B\u610F"},{tids:122,name:"\u91CE\u751F\u6280\u80FD\u534F\u4F1A"}]},{tids:188,name:"\u79D1\u6280",children:[{tids:95,name:"\u6570\u7801"},{tids:230,name:"\u8F6F\u4EF6\u5E94\u7528"},{tids:231,name:"\u8BA1\u7B97\u673A\u6280\u672F"},{tids:232,name:"\u79D1\u5DE5\u673A\u68B0"},{tids:233,name:"\u6781\u5BA2DIY"}]},{tids:234,name:"\u8FD0\u52A8",children:[{tids:235,name:"\u7BEE\u7403"},{tids:249,name:"\u8DB3\u7403"},{tids:164,name:"\u5065\u8EAB"},{tids:236,name:"\u7ADE\u6280\u4F53\u80B2"},{tids:237,name:"\u8FD0\u52A8\u6587\u5316"},{tids:238,name:"\u8FD0\u52A8\u7EFC\u5408"}]},{tids:223,name:"\u6C7D\u8F66",children:[{tids:258,name:"\u6C7D\u8F66\u77E5\u8BC6\u79D1\u666E"},{tids:227,name:"\u8D2D\u8F66\u653B\u7565"},{tids:247,name:"\u65B0\u80FD\u6E90\u8F66"},{tids:245,name:"\u8D5B\u8F66"},{tids:246,name:"\u6539\u88C5\u73A9\u8F66"},{tids:240,name:"\u6469\u6258\u8F66"},{tids:248,name:"\u623F\u8F66"},{tids:176,name:"\u6C7D\u8F66\u751F\u6D3B"}]},{tids:160,name:"\u751F\u6D3B",children:[{tids:138,name:"\u641E\u7B11"},{tids:254,name:"\u4EB2\u5B50"},{tids:250,name:"\u51FA\u884C"},{tids:251,name:"\u4E09\u519C"},{tids:239,name:"\u5BB6\u5C45\u623F\u4EA7"},{tids:161,name:"\u624B\u5DE5"},{tids:162,name:"\u7ED8\u753B"},{tids:21,name:"\u65E5\u5E38"}]},{tids:211,name:"\u7F8E\u98DF",children:[{tids:76,name:"\u7F8E\u98DF\u5236\u4F5C"},{tids:212,name:"\u7F8E\u98DF\u4FA6\u63A2"},{tids:213,name:"\u7F8E\u98DF\u6D4B\u8BC4"},{tids:214,name:"\u7530\u56ED\u7F8E\u98DF"},{tids:215,name:"\u7F8E\u98DF\u8BB0\u5F55"}]},{tids:217,name:"\u52A8\u7269\u5708",children:[{tids:218,name:"\u55B5\u661F\u4EBA"},{tids:219,name:"\u6C6A\u661F\u4EBA"},{tids:222,name:"\u5C0F\u5BA0\u5F02\u5BA0"},{tids:221,name:"\u91CE\u751F\u52A8\u7269"},{tids:220,name:"\u52A8\u7269\u4E8C\u521B"},{tids:75,name:"\u52A8\u7269\u7EFC\u5408"}]},{tids:119,name:"\u9B3C\u755C",children:[{tids:22,name:"\u9B3C\u755C\u8C03\u6559"},{tids:26,name:"\u97F3MAD"},{tids:126,name:"\u4EBA\u529BVOCALOID"},{tids:216,name:"\u9B3C\u755C\u5267\u573A"},{tids:127,name:"\u6559\u7A0B\u6F14\u793A"}]},{tids:155,name:"\u65F6\u5C1A",children:[{tids:157,name:"\u7F8E\u5986\u62A4\u80A4"},{tids:252,name:"\u4EFF\u5986cos"},{tids:158,name:"\u7A7F\u642D"},{tids:159,name:"\u65F6\u5C1A\u6F6E\u6D41"}]},{tids:202,name:"\u8D44\u8BAF",children:[{tids:203,name:"\u70ED\u70B9"},{tids:204,name:"\u73AF\u7403"},{tids:205,name:"\u793E\u4F1A"},{tids:206,name:"\u7EFC\u5408"}]},{tids:5,name:"\u5A31\u4E50",children:[{tids:71,name:"\u7EFC\u827A"},{tids:241,name:"\u5A31\u4E50\u6742\u8C08"},{tids:242,name:"\u7C89\u4E1D\u521B\u4F5C"},{tids:137,name:"\u660E\u661F\u7EFC\u5408"}]},{tids:181,name:"\u5F71\u89C6",children:[{tids:182,name:"\u5F71\u89C6\u6742\u8C08"},{tids:183,name:"\u5F71\u89C6\u526A\u8F91"},{tids:85,name:"\u5C0F\u5267\u573A"},{tids:256,name:"\u77ED\u7247"},{tids:184,name:"\u9884\u544A\xB7\u8D44\u8BAF"}]},{tids:177,name:"\u7EAA\u5F55\u7247",children:[{tids:37,name:"\u4EBA\u6587\xB7\u5386\u53F2"},{tids:178,name:"\u79D1\u5B66\xB7\u63A2\u7D22\xB7\u81EA\u7136"},{tids:179,name:"\u519B\u4E8B"},{tids:180,name:"\u793E\u4F1A\xB7\u7F8E\u98DF\xB7\u65C5\u884C"}]},{tids:23,name:"\u7535\u5F71",children:[{tids:147,name:"\u56FD\u4EA7\u7535\u5F71"},{tids:145,name:"\u6B27\u7F8E\u7535\u5F71"},{tids:146,name:"\u65E5\u672C\u7535\u5F71"},{tids:83,name:"\u5176\u4ED6\u56FD\u5BB6"}]},{tids:11,name:"\u7535\u89C6\u5267",children:[{tids:185,name:"\u56FD\u4EA7\u5267"},{tids:187,name:"\u6D77\u5916\u5267"}]}],Rd=os.map(e=>e.tids),Vd=xi(os.map(e=>e.children.map(t=>t.tids))),Md=Rd.concat(Vd),Nd={4:"douga",5:"douga",31:"douga",6:"game",7:"game",8:"game",9:"game",10:"game",12:"cinephile",35:"cinephile",36:"cinephile",37:"cinephile",13:"life",21:"life",14:"life",22:"life",15:"life",23:"interest",24:"interest",38:"interest",39:"interest",11:"interest",18:"lightnovel",19:"lightnovel",32:"lightnovel",20:"lightnovel",25:"technology",33:"technology",26:"technology",27:"technology",34:"technology"},Od=ae({__name:"App",setup(e){Me(ot,Pi()),Me("enableAvif",!0);let t=()=>{},s=()=>{};if(typeof window!="undefined"&&window.CustomEvent){const{broadcast:a,destroy:n}=Li("watchlaterpipwindow",()=>{});t=a,s=n,$t(()=>{s()}),window.addEventListener("globalwatchlaterstatesync",o=>{var i;t((i=o==null?void 0:o.detail)!=null?i:{})})}return(a,n)=>{const o=O("router-view");return l(),N(o)}}}),Ud={};function Hd(e,t){return l(),d("div",null,[Xt(e.$slots,"default")])}var js=ue(Ud,[["render",Hd]]);const Wd=ae({__name:"Tag",props:{value:{type:String,default:""},type:{type:String,default:"default"}},setup(e){const t=e,s=M(()=>({tag:!0,"tag-primary":t.type==="primary"}));return(a,n)=>t.value?(l(),d("div",{key:0,class:K(s.value)},D(t.value),3)):F("",!0)}});var Gt=ue(Wd,[["__scopeId","data-v-743400d0"]]);const rt={normal:"picture_ad_0",video82:"video_ad_82"},zs=e=>{const{type:t,id:s,aid:a,bvid:n,description:o,typename:i,play:r,upic:u,like:v,danmaku:f,pic:h,pubdate:_,arcurl:p,url:b,title:S,duration:y,author:m,mid:w,is_charge_video:B,enable_vt:$,vt:g,episode_count_text:C,vt_display:k}=e;return{type:t,id:s,aid:a,bvid:n,title:S,description:o,typename:i,enable_vt:$,stats:{view:r,like:v!=null?v:-1,danmaku:f!=null?f:-1,vt:g,vt_display:k},cover:h,url:t==="ketang"?p?`${p}${p.indexOf("?")!==-1?"&":"?"}csource=common_hpsearch_null_null`:`//www.bilibili.com/cheese/play/ss${a}/?csource=common_hpsearch_null_null`:b||`//www.bilibili.com/video/${n}/`,author:{mid:w,name:m,face:u},pubdate:_,duration:y,episode_count_text:C,spaceUrl:`//space.bilibili.com/${w}`,spmInfo:{mod:"search-card",idx:"all",ext:"click"},is_charge_video:B}},jd=e=>{const{roomid:t,area:s,title:a,cover:n,user_cover:o,uid:i,uname:r,uface:u,online:v,watched_show:f}=e;return{roomId:t,area:s,watched_show:f,title:Rt(a),cover:o,frameCover:n,url:`//live.bilibili.com/${t}?live_from=84001`,author:{mid:i,name:r,face:u},stats:{online:v},showCallBack:"",clickCallBack:"",spmInfo:{mod:"search-card",idx:"all",ext:"click"}}},ai=e=>({is_ad:1,is_ad_loc:e.is_ad_loc,src_id:e.source_id,resource_id:e.resource_id,ad_cb:e.ad_content.ad_cb,creative_id:e.ad_content.creative_id}),zd=e=>{const t=ai(e.biz_data),{title:s,jump_url:a,covers:n,ad_tag_style:o,adver_name:i}=e.biz_data.ad_content.extra.card,r=n[0].url;return ke(T({},t),{id:e.id,type:e.type,title:s,cover:r,url:a,author:{name:i},spmInfo:{mod:"search-card",idx:"all",ext:"click"},ad_tag:o,is_charge_video:e.is_charge_video})},qd=e=>{const t=ai(e.biz_data),{title:s,jump_url:a,covers:n,ad_tag_style:o}=e.biz_data.ad_content.extra.card,{aid:i,bvid:r,play:u,upic:v,enable_vt:f,vt:h,vt_display:_,like:p,pubdate:b,duration:S,author:y,mid:m,type:w,id:B,description:$,typename:g,danmaku:C,is_charge_video:k}=e,L=n[0].url;return ke(T({},t),{id:B,type:w,title:s,cover:L,url:a||`//www.bilibili.com/video/${r}/`,aid:i,bvid:r,enable_vt:f,stats:{view:u,like:p!=null?p:-1,danmaku:C!=null?C:-1,vt:h,vt_display:_},author:{mid:m,name:y,face:v},pubdate:b,duration:S,typename:g,description:$,spaceUrl:`//space.bilibili.com/${m}`,spmInfo:{mod:"search-card",idx:"all",ext:"click"},ad_tag:o,is_charge_video:k})},hn=e=>{switch(e.type){case rt.normal:return zd(e);case rt.video82:return qd(e);default:return zs(e)}},ii=(e,t,s)=>({__refresh__:!0,_extra:"",context:"",page:1,page_size:42,order:"",duration:"",from_source:"",from_spmid:"333.337",platform:"pc",highlight:1,single_column:0,keyword:ce?encodeURIComponent(e):e,qv_id:t,ad_resource:"5646",source_tag:3,gaia_vtoken:s}),Jt=(e,t,s)=>ke(T(T({category_id:"",search_type:"",ad_resource:""},ii(e.keyword||"",t,s)),e),{keyword:ce?encodeURIComponent(e.keyword||""):e.keyword}),Ut=(e,t)=>{Vs()&&dn(e,t)},Rt=(e="")=>e.replace(/<em class="keyword">/g,"").replace(/<\/em>/g,"");function Ht(e="",t){if(!e||!e.match)return"";if(t){const s=e.match(/<em class="keyword">.*?<\/em>/);if(s&&s[0])return s[0]+"..."}return Rt(e)}const aa=e=>{e=+(e||0);for(let t=0;t<os.length;t++){const s=os[t];if(e===s.tids)return{tids1:e,tids2:0,tids1_name:s.name,tids2_name:""};for(let a=0;a<s.children.length;a++){const n=s.children[a];if(e===n.tids)return{tids1:s.tids,tids2:e,tids1_name:s.name,tids2_name:n.name}}}return{tids1:0,tids2:0,tids1_name:"",tids2_name:""}},Qd=e=>{if(!(e!=null&&e.includes(":")))return e;const[t,s]=e.split(":"),a=n=>String(n).length<2?`0${n}`:n;if(+t>59){const n=Math.floor(+t/60);return`${a(n)}:${a(+t-n*60)}:${a(+s)}`}return`${a(+t)}:${a(+s)}`},Ct=(e,t,s=1,a=0)=>q(void 0,null,function*(){if(a!==s)try{const n=yield Oo(t);return yield e(a+1,{token:n})}catch(n){(n==null?void 0:n.name)==="cancel"&&Ri.info((n==null?void 0:n.message)||"\u6821\u9A8C\u5931\u8D25"),setTimeout(()=>{window.location.href="https://www.bilibili.com"},1500)}});const Gd={skeleton:{type:Boolean,default:!1},grid:{type:Boolean,default:!1},disableFrame:{type:Boolean,default:!1},disableInlinePlayer:{type:Boolean,default:!1},playerOption:{type:Object,default:()=>({guide:""})},disableWatchLater:{type:Boolean,default:!1},showAv:{type:Boolean,default:!1},showBv:{type:Boolean,default:!1},imgCbStr:{type:String,default:""},gridClass:{type:String,default:""},imgLazy:{type:String,default:"lazy"},imgStyle:{type:String,default:""},disableScale:{type:Boolean,default:!1},info:{type:Object,default:()=>({})},showFace:{type:Boolean,default:!1},index:{type:Number,default:0},useInnerReport:{type:Boolean,default:!1},mergeReportMsg:{type:Object,default:{}}},Jd=ae({name:"BiliVideoCard",directives:{[qn.name]:qn,[jn.name]:jn,[Ts.VDirective.name]:Ts.VDirective,[gt.VSpm.name]:gt.VSpm,[gt.VScale.name]:gt.VScale},components:{SVGIconNext:as,VImg:it,VAvatar:Ra,Tag:Gt,PaletteAd:Yo,PaletteCreativeAd:lr,PaletteChargeVideo:sr,PaletteCheese:ir,WidgetVideoDanmaku:Lr,WidgetUp:bn,WatchLater:bc.component},props:Gd,emits:["watch-later","click-face","click-uname","click-video","player-play","player-close","player-init","show-video"],setup:(e,{emit:t})=>{var Z,P;const{pubdate:s,duration:a,stats:n={},bvid:o,author:i={},url:r,spaceUrl:u,aid:v,cid:f,creative_id:h}=e.info,_={pubdate:isNaN(Number(s))?s:Da(s),duration:Qd(a),view:nt(n.view),vt:nt(n.vt),vt_display:n.vt_display,like:nt(n.like),danmaku:nt(n.danmaku)},p={page:r||`//www.bilibili.com/video/${o}/`,space:u||`//space.bilibili.com/${i.mid}`},b=A(!0),S=!e.disableInlinePlayer&&(v||o)&&{aid:v,cid:f,bvid:o,config:e.playerOption},y=!e.disableFrame&&v,m=(W,J)=>{if(W==="in"){J.target.classList.add("scale-in");return}J.target.classList.remove("scale-in")},w=W=>W.type!==rt.normal,B=W=>W.type===rt.normal||W.type===rt.video82,$=W=>W.type===rt.normal,g=W=>!!W.is_charge_video,C=W=>W.type==="ketang",k=M(()=>Rt(e.info.title)),L=M(()=>B(e.info)?e.info.resource_id:0),Y={c:(Z=e.info.spmInfo)==null?void 0:Z.mod,d:(P=e.info.spmInfo)==null?void 0:P.idx},I=e.info.type!==rt.video82?e.info.type!==rt.normal?e.info.type!=="ketang"?"video":"ketang":"common-ad":"video-ad",U=e.info.type===rt.normal?e.info.url:"",Q={creative_id:h,avid:v,content_id:v,url:U};return{AdCardType:rt,isNormalAd:$,isAd:B,isVideo:w,isChargeVideo:g,isCheese:C,locId:L,formats:_,links:p,showStats:b,inlinePlayerParam:S,frameParam:y,videoTitle:k,scaleHandle:m,reportShowVideo:()=>{if(!e.useInnerReport){t("show-video",e.info);return}Ut(ke(T({},Y),{e:"show",type:"appear"}),{msg:JSON.stringify(T(T({spmid:`search.search-result.${I}.all`},Q),e.mergeReportMsg))})},reportClickVideo:(W,J)=>{if(!e.useInnerReport){t("click-video",e.info,J);return}Ut(ke(T({},Y),{e:"click",type:"click"}),{msg:JSON.stringify(T(T({spmid:`search.search-result.${I}.${W}`},Q),e.mergeReportMsg))})},reportClickUp:(W,J)=>{var oe,pe;if(!e.useInnerReport){t(W==="avatar"?"click-face":"click-uname",(oe=e.info)==null?void 0:oe.author,J);return}Ut(ke(T({},Y),{e:"click",type:"click"}),{msg:JSON.stringify(T(T({spmid:`search.search-result.${I}.${W}`,up_id:(pe=e.info.author)==null?void 0:pe.mid},Q),e.mergeReportMsg))})},reportClickWatchLater:W=>{if(!e.useInnerReport){t("watch-later",W);return}Ut(ke(T({},Y),{e:"click",type:"click"}),{msg:JSON.stringify(T(T({watchlater_type:W.type,spmid:"search.search-result.video.watchlater"},Q),e.mergeReportMsg))})},reportPlayerPlay:W=>{if(!e.useInnerReport){t("player-play",e.info,W);return}Ut(ke(T({},Y),{e:"click",type:"click"}),{msg:JSON.stringify(T(T({spmid:`search.search-result.${I}.play`},Q),e.mergeReportMsg))})}}}}),Yd=mn('<div class="bili-video-card__skeleton--cover" data-v-15c84221></div><div class="bili-video-card__skeleton--info" data-v-15c84221><div class="bili-video-card__skeleton--right" data-v-15c84221><p class="bili-video-card__skeleton--text" data-v-15c84221></p><p class="bili-video-card__skeleton--text short" data-v-15c84221></p><p class="bili-video-card__skeleton--light" data-v-15c84221></p></div></div>',2),Kd=[Yd],Zd=["href"],Xd={class:"bili-video-card__image __scale-player-wrap"},e_={class:"bili-video-card__mask"},t_={key:0,class:"bili-video-card__stats"},s_={key:0,class:"bili-video-card__stats--left"},n_={key:0,class:"bili-video-card__stats--item"},a_={key:1,class:"bili-video-card__stats--item"},i_={key:2,class:"bili-video-card__stats--item"},o_={class:"bili-video-card__stats__duration"},r_={key:0,class:"bili-video-card__av"},l_={class:"bili-video-card__av--top"},c_=["href"],u_={class:"bili-video-card__av--tit text_ellipsis"},d_={class:"bili-video-card__av--tit-av"},__=["innerHTML"],v_=["title"],h_={class:"bili-video-card__av--bottom"},p_=["href"],f_=["href"],m_={class:"bili-video-card__av--author"},g_={key:0,class:"bili-video-card__av--date"},y_=["href"],w_={class:"bili-video-card__info--right"},b_=["href"],k_=["title","innerHTML"],C_={class:"bili-video-card__info--bottom"},A_=["href"],$_={key:4,class:"bili-video-card__info--author"};function E_(e,t,s,a,n,o){const i=O("WatchLater"),r=O("VImg"),u=O("SVGIconNext"),v=O("WidgetVideoDanmaku"),f=Gt,h=O("VAvatar"),_=O("PaletteChargeVideo"),p=O("PaletteCheese"),b=O("PaletteCreativeAd"),S=O("PaletteAd"),y=O("WidgetUp"),m=Ee("inline-player"),w=Ee("frame"),B=Ee("danmaku"),$=Ee("report"),g=Ee("spm"),C=Ee("scale");return x((l(),d("div",{class:K(["bili-video-card",{"bili-video-card-grid":e.grid}])},[e.gridClass?F("",!0):(l(),d("div",{key:0,class:K(["bili-video-card__skeleton",{hide:!e.skeleton}])},Kd,2)),e.skeleton?F("",!0):x((l(),d("div",{key:1,class:K(["bili-video-card__wrap __scale-wrap",{row:!!e.gridClass}]),onScaleIn:t[13]||(t[13]=k=>e.scaleHandle("in",k)),onScaleOut:t[14]||(t[14]=k=>e.scaleHandle("out",k))},[x(c("a",{href:e.links.page,class:K(e.gridClass),target:"_blank",onClick:t[6]||(t[6]=k=>e.reportClickVideo("cover",k))},[c("div",Xd,[x(c("div",{class:"bili-video-card__image--wrap",onMouseenter:t[1]||(t[1]=k=>e.showStats=!1),onMouseleave:t[2]||(t[2]=k=>e.showStats=!0),onPlayerPlay:t[3]||(t[3]=k=>e.reportPlayerPlay(k)),onPlayerClose:t[4]||(t[4]=k=>e.$emit("player-close",k.detail,k)),onPlayerInit:t[5]||(t[5]=k=>e.$emit("player-init",k.detail,k))},[!e.disableWatchLater&&e.isVideo(e.info)&&!e.isCheese(e.info)&&e.info.aid?(l(),N(i,{key:0,aid:e.info.aid,visible:!e.showStats,onDo:t[0]||(t[0]=k=>e.reportClickWatchLater(k))},null,8,["aid","visible"])):F("",!0),E(r,{class:"bili-video-card__cover","cb-str":e.imgCbStr,src:e.info.cover,alt:e.videoTitle,width:336,height:189,loading:e.imgLazy,rule:"1c","bfs-style":"web-search-common-cover"},null,8,["cb-str","src","alt","loading"])],544),[[m,e.isChargeVideo(e.info)||e.isCheese(e.info)?{}:e.inlinePlayerParam,"video"],[w,e.frameParam],[B,e.frameParam]]),c("div",e_,[e.isVideo(e.info)?(l(),d("div",t_,[e.info.stats?(l(),d("div",s_,[e.info.enable_vt?(l(),d("span",n_,[E(u,{icon:"BDC/playtime_square_line/1",fill:"#ffffff",class:"bili-video-card__stats--icon"}),c("span",null,D(e.formats.vt_display||e.formats.vt),1)])):(l(),d("span",a_,[E(u,{icon:"BDC/playdata_square_line/1",fill:"#ffffff",class:"bili-video-card__stats--icon"}),c("span",null,D(e.formats.view),1)])),e.info.stats.danmaku!==-1&&!e.isCheese(e.info)?(l(),d("span",i_,[E(v,{class:"bili-video-card__stats--icon"}),c("span",null,D(e.formats.danmaku),1)])):F("",!0)])):F("",!0),c("span",o_,D(e.formats.duration),1)])):F("",!0)])])],10,Zd),[[$,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[$,{data:e.info,id:e.locId},"click",{ad:!0}],[$,{spmid:"search.search-result.up_card.5",location:e.index+1,content_id:e.info.aid},"msg"],[g,e.info.spmInfo]]),c("div",{class:K(["bili-video-card__info __scale-disable",{col_auto:!!e.gridClass}])},[(e.showAv||e.showBv)&&e.isVideo(e.info)?(l(),d("div",r_,[c("div",l_,[x(c("a",{href:e.links.page,target:"_blank",onClick:t[7]||(t[7]=k=>e.reportClickVideo("title",k))},[c("h3",u_,[c("span",d_,D(e.showAv?"AV"+e.info.aid:e.info.bvid),1),E(f,{class:"bili-video-card__av--tit-type",value:e.info.typename},null,8,["value"]),c("span",{innerHTML:e.info.title},null,8,__)])],8,c_),[[g,e.info.spmInfo],[$,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[$,{data:e.info,id:e.locId},"click",{ad:!0}]]),c("div",{title:e.info.description,class:"bili-video-card__av--desc text_ellipsis_2l"},D(e.info.description),9,v_)]),c("div",h_,[e.info.author.face&&!e.isAd(e.info)?x((l(),d("a",{key:0,href:e.links.space,target:"_blank",onClick:t[8]||(t[8]=k=>e.reportClickUp("avatar",k))},[E(h,{"custom-class":"bili-video-card__avatar",info:e.info.author,size:36},null,8,["info"])],8,p_)),[[g,e.info.spmInfo]]):F("",!0),e.info.author.name?x((l(),d("a",{key:1,class:"bili-video-card__av--owner",href:e.links.space,target:"_blank",onClick:t[9]||(t[9]=k=>e.reportClickUp("nickname",k))},[c("span",m_,D(e.info.author.name),1),!e.isAd(e.info)&&e.info.pubdate?(l(),d("span",g_,"\xB7 "+D(e.formats.pubdate),1)):F("",!0)],8,f_)),[[g,e.info.spmInfo]]):F("",!0)])])):(l(),d(X,{key:1},[e.info.author.face&&e.showFace?x((l(),d("a",{key:0,href:e.links.space,target:"_blank",onClick:t[10]||(t[10]=k=>e.reportClickUp("avatar",k))},[E(h,{"custom-class":"bili-video-card__avatar",info:e.info.author,size:36},null,8,["info"])],8,y_)),[[g,e.info.spmInfo],[$,{data:e.info,id:e.locId,isUpLink:!0},"show",{ad:!0,strict:!0,relink:!0}],[$,{data:e.info,id:e.locId},"click",{ad:!0}]]):F("",!0),c("div",w_,[x(c("a",{href:e.links.page,target:"_blank",onClick:t[11]||(t[11]=k=>e.reportClickVideo("title",k))},[c("h3",{class:"bili-video-card__info--tit",title:e.videoTitle,innerHTML:e.info.title},null,8,k_)],8,b_),[[g,e.info.spmInfo],[$,{data:e.info,id:e.locId},"show",{ad:!0,strict:!0,relink:!0}],[$,{data:e.info,id:e.locId},"click",{ad:!0}],[$,{spmid:"search.search-result.up_card.5",location:e.index+1,content_id:e.info.aid},"msg"]]),c("p",C_,[e.info.author.name?x((l(),d("a",{key:0,class:"bili-video-card__info--owner",href:e.info.type===e.AdCardType.normal?e.links.page:e.links.space,target:"_blank",onClick:t[12]||(t[12]=k=>e.reportClickUp("nickname",k))},[e.isChargeVideo(e.info)?(l(),N(_,{key:0,class:"bili-video-card__info--charge-video"})):e.isCheese(e.info)?(l(),N(p,{key:1,class:"bili-video-card__info--cheese"})):e.isAd(e.info)?(l(),d(X,{key:2},[e.info.type===e.AdCardType.video82?(l(),N(b,{key:0,class:"bili-video-card__info--ad-creative"})):(l(),N(S,{key:1,class:"bili-video-card__info--ad"}))],64)):e.isVideo(e.info)?(l(),N(y,{key:3,class:"bili-video-card__info--author-ico mr_2"})):F("",!0),e.info.author.name?(l(),d("span",$_,D(e.info.author.name),1)):F("",!0),e.isCheese(e.info)?(l(),d("span",{key:5,class:K(["bili-video-card__info--cheese_episode_count",{ml_0:!e.info.author.name}])}," \xB7 "+D(e.info.episode_count_text),3)):e.info.type!==e.AdCardType.normal&&e.info.pubdate?(l(),d("span",{key:6,class:K(["bili-video-card__info--date",{ml_0:!e.info.author.name}])}," \xB7 "+D(e.formats.pubdate),3)):F("",!0)],8,A_)),[[g,e.info.spmInfo],[$,{data:e.info,id:e.locId,isUpLink:!0},"show",{ad:!0,strict:!0,relink:!0}],[$,{data:e.info,id:e.locId},"click",{ad:!0}]]):F("",!0),!e.info.author.name&&!e.isAd(e.info)&&e.isChargeVideo(e.info)?(l(),N(_,{key:1,class:"bili-video-card__info--charge-video"})):F("",!0),!e.info.author.name&&!e.isAd(e.info)&&e.isCheese(e.info)?(l(),N(p,{key:2,class:"bili-video-card__info--cheese"})):F("",!0),!e.info.author.name&&!e.isAd(e.info)&&e.info.pubdate?(l(),d("span",{key:3,class:K(["bili-video-card__info--date",{ml_0:!e.info.author.name}])},D(e.formats.pubdate),3)):F("",!0)])])],64))],2)],34)),[[C,e.disableScale,"disabled"]])],2)),[[$,()=>e.reportShowVideo(),"show"]])}var Rs=ue(Jd,[["render",E_],["__scopeId","data-v-15c84221"]]);const F_=["src"],S_=ae({__name:"VImage",props:{src:{},w:{},h:{},s:{},c:{}},setup(e){const t=e,s=M(()=>{const{src:a,w:n,h:o,s:i,c:r}=t,u=+n,v=+o,f=+i;let h=Zs(u)?u:void 0,_=Zs(v)?v:void 0;return Zs(f)&&(h&&(h=h*f),_&&(_=_*f)),Ms(Vi(a,{w:h,h:_}))});return(a,n)=>(l(),d("img",{src:s.value},null,8,F_))}}),B_={},I_={class:"hide"},D_=c("img",{src:"//i0.hdslb.com/bfs/static/laputa-search/assets/loading_new.5a3d88cd.gif",alt:""},null,-1),T_=c("img",{src:"//i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png",alt:""},null,-1),x_=c("img",{src:"//i0.hdslb.com/bfs/static/laputa-search/assets/nodata.67f7a1c9.png",alt:""},null,-1),L_=[D_,T_,x_];function P_(e,t){return l(),d("div",I_,L_)}var R_=ue(B_,[["render",P_]]);const V_={key:0,class:"search-egg-container"},M_={class:"search-egg-video"},N_=["src"],O_=["src"],U_=ae({__name:"SearchEgg",props:{info:{type:Object,default:null}},setup(e){const t=A([]),s=A(!1),a=A(0);A(0);const n=A(),o=j(Ve),i=e;ze(()=>{v()}),Mi(()=>{v()});const r=()=>{if(tt.has("cancel-arr")){tt.get("cancel-arr",[]).indexOf(i.info.id)===-1&&u();return}u()},u=()=>{tt.has("play-times")||tt.set("play-times",[{id:0,times:0}]);const h=tt.get("play-times"),_=h.find(p=>p.id===i.info.id);_?_.times<a.value&&(h.find(p=>p.id===i.info.id).times++,tt.set("play-times",h),s.value=!0):(h.push({id:i.info.id,times:1}),tt.set("play-times",h),s.value=!0)},v=()=>q(this,null,function*(){const h=yield Bc(i.info.id);h.source&&(t.value=h.source,a.value=h.show_count||30,r(),We(()=>{n.value&&(n.value.pause(),n.value.play(),n.value.onended=()=>{s.value=!1})}))}),f=()=>{s.value=!1;let h;tt.has("cancel-arr")?(h=tt.get("cancel-arr"),h.push(i.info.id),tt.set("cancel-arr",h)):tt.set("cancel-arr",[i.info.id])};return(h,_)=>{const p=Ee("report");return l(),N(yt,{name:"fade"},{default:z(()=>[s.value?x((l(),d("div",V_,[x(c("div",M_,[t.value.length?(l(),d("video",{key:0,ref_key:"playerRef",ref:n,playsinline:"",muted:""},[c("source",{src:R(Is)(t.value[0].url)},null,8,N_),c("source",{src:R(Is)(t.value[1].url)},null,8,O_),ne(" your browser does not support thse video tag ")],512)):F("",!0)],512),[[p,{spm:"search.egg-detail",msg:ke(T({},R(o)),{id:i.info.id,is_valid:0})},"click"]]),t.value[0]?x((l(),d("i",{key:0,class:"close-video",onClick:f},null,512)),[[p,{spm:"search.egg",msg:ke(T({},R(o)),{id:i.info.id})},"click"]]):F("",!0)],512)),[[p,{spm:"search.egg",msg:ke(T({},R(o)),{id:i.info.id})},"show"]]):F("",!0)]),_:1})}}});var H_=ue(U_,[["__scopeId","data-v-d9d80828"]]);const W_=c("use",{"xlink:href":"#logo"},null,-1),j_=[W_];function oi(e,t){return l(),d("svg",null,[...j_])}const z_=c("use",{"xlink:href":"#close2"},null,-1),q_=[z_];function Q_(e,t){return l(),d("svg",null,[...q_])}var Wt=(e=>(e[e.ACTIVITY_IMAGE=105]="ACTIVITY_IMAGE",e[e.ACTIVITY_VIDEO=106]="ACTIVITY_VIDEO",e[e.BLUE_V_ARCHVIE=107]="BLUE_V_ARCHVIE",e))(Wt||{}),Bt=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.SEARCH_LIST=2]="SEARCH_LIST",e[e.HISTORY_LIST=3]="HISTORY_LIST",e[e.SUGGESTION=4]="SUGGESTION",e[e.DIRECT=5]="DIRECT",e))(Bt||{});const G_={class:"search-input-container"},J_=ae({__name:"SearchInput",props:{keyword:{},isStatic:{type:Boolean},isAutoFocus:{type:Boolean}},emits:["submitSearch","update:keyword","typeChange"],setup(e,{emit:t}){const s=j(ot),a=t,n=e,o=A(n.keyword),i=A(null),r=A(!1),u=A(!1),v=A(!1),f=A(!1),h=A(!1),_=A([]),p=A(-1),b=A(!1),S=A(null),y=M(()=>{const H=v.value||f.value||h.value;return H&&wt({c:"search_window",d:"0",e:"show",type:"appear"}),H}),m=j(ut),w=({type:H,location:Z=0,val:P,show_content:W,is_topping:J})=>{var Be;const oe=o.value.trim(),pe={history:Bt.HISTORY_LIST,suggest:Bt.SEARCH_LIST,trending:Bt.SUGGESTION,click:Bt.DEFAULT,enter:Bt.DEFAULT,direct:Bt.DIRECT};a("typeChange",pe[H]),oe?(f.value=!1,h.value=!1,m(),setTimeout(()=>{var Ie;(Ie=i.value)==null||Ie.blur(),$(oe),a("submitSearch")},100),wt({c:"search",d:"content",e:"click",type:"click"},{msg:JSON.stringify(T({type:pe[H],location:Z+1,Input_content:o.value,search_content:P,show_content:W,is_topping:J},C.value))})):(Be=i.value)==null||Be.focus()},B=()=>{Oi("search_history").then(H=>q(this,null,function*(){S.value=H,(yield H.getItem("migrated"))||(yield H.setItem("search_history",localStorage.getItem("search_history")||"[]"),yield H.setItem("migrated","1"))})).catch(H=>console.error(H))},$=H=>{var Z;(Z=S.value)==null||Z.getItem("search_history").then(P=>{var oe;const J=JSON.parse(P||"[]").filter(pe=>pe.value!==H);return J.unshift({value:H,timestamp:Date.now()}),(oe=S.value)==null?void 0:oe.setItem("search_history",JSON.stringify(J.slice(0,20)))}).catch(P=>console.error(P))},g=H=>{_.value=H||[]},C=j(Ve),k=(H,Z,P,W,J,oe)=>{o.value=H,w({type:Z,location:P,val:H,trackid:W,show_content:J,is_topping:oe})},L=H=>{var Z,P;if(["ArrowUp","ArrowDown","Enter"].includes(H.key))return H.key==="ArrowUp"?p.value>-1?p.value--:p.value=_.value.length-1:H.key==="ArrowDown"?p.value<_.value.length-1?p.value++:p.value=-1:H.key==="Enter"&&(p.value>-1&&((Z=_.value[p.value])==null?void 0:Z.value)&&(o.value=(P=_.value[p.value])==null?void 0:P.value),w({val:o.value,type:"direct"})),H.preventDefault(),!1},Y=H=>{ma(H.target,".search-input-wrap")||(h.value=!1)},I=H=>{v.value=!0,Ui(H.target)},U=()=>{v.value=!1},Q=()=>{const{scrollTop:H}=ga();r.value=H>150,u.value=H>250},te=()=>{var H;o.value="",(H=i.value)==null||H.focus()},G=()=>{v.value&&(f.value=!0)},ve=()=>f.value=!1,$e=()=>{var H;return(H=i.value)==null?void 0:H.focus()};return s==null||s.on("routeChanged",()=>{var H;(H=i.value)==null||H.blur(),h.value=!1}),fe(()=>n.keyword,H=>o.value=H),fe(()=>o.value,H=>a("update:keyword",H)),fe([y,_],()=>p.value=-1),ze(()=>{B(),n.isAutoFocus&&(setTimeout(()=>{var Z;(Z=i.value)==null||Z.focus(),h.value=!0},250),document.addEventListener("click",Y)),n.isStatic||(Q(),window.addEventListener("scroll",Q));const H=document.referrer;b.value=H&&!/^https?:\/\/[^.?#]+\.bilibili\.com/.test(H)}),$t(()=>{s==null||s.off("routeChanged"),n.isAutoFocus&&document.removeEventListener("click",Y),n.isStatic||window.removeEventListener("scroll",Q)}),(H,Z)=>{const P=O("v-button"),W=O("ClientOnly");return l(),d("div",G_,[c("div",{class:K(["flex_center",{"search-fixed-header":r.value,"search-sticky-header":u.value}])},[x(E(R(oi),{class:"search-logo p_center_y"},null,512),[[Ue,r.value]]),c("div",{class:K(["search-input-wrap flex_between",{"search-input-active":y.value,"search-input-focus":v.value||h.value}]),onMouseover:G,onMouseleave:ve,onKeydown:L},[E(R(Qo),{class:"search-icon"}),x(E(R(Q_),{class:"clear-icon",onClick:te},null,512),[[Ue,o.value]]),x(c("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":Z[0]||(Z[0]=J=>o.value=J),class:"search-input-el",type:"text",placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22",onBlur:U,onFocus:I},null,544),[[Ni,o.value]]),E(P,{class:"search-button",type:"blue",size:"large",onClick:Z[1]||(Z[1]=J=>w({val:o.value,type:"direct"}))},{default:z(()=>[ne("\u641C\u7D22")]),_:1}),E(W,null,{default:z(()=>[E(vu,{visible:y.value,keyword:o.value,cols:S.value,"suggest-index":p.value,class:"search-panel-popover",onClick:$e,onUpdateSuggest:g,onSearchHistory:Z[2]||(Z[2]=(J,oe)=>k(J,"history",oe)),onSearchSuggest:Z[3]||(Z[3]=(J,oe)=>k(J,"suggest",oe)),onSearchTrending:Z[4]||(Z[4]=(J,oe,pe,Be,Ie)=>k(J,"trending",oe,pe,Be,Ie))},null,8,["visible","keyword","cols","suggest-index"])]),_:1})],34)],2)])}}});var ri=ue(J_,[["__scopeId","data-v-c9b7d6c2"]]);const Y_=e=>(Qe("data-v-4d412db0"),e=e(),Ge(),e),K_={class:"search-entry-page p_relative"},Z_={class:"search-center p_center"},X_={class:"search-center-title"},ev=Y_(()=>c("span",{class:"center-title-text brand_blue pl_xl"},"\u641C\u7D22",-1)),tv=ae({__name:"SearchEntry",emits:["emptyChange"],setup(e,{emit:t}){const s=t,a=A(""),n=()=>{const o=a.value.trim();o&&s("emptyChange",o)};return(o,i)=>(l(),d("div",K_,[c("div",Z_,[c("h1",X_,[E(R(oi),{class:"bili-logo mr_xl"}),ev]),E(ri,{class:"search-input mt_xxl",keyword:a.value,"onUpdate:keyword":i[0]||(i[0]=r=>a.value=r),isStatic:!0,isAutoFocus:!1,onSubmitSearch:n},null,8,["keyword"])])]))}});var sv=ue(tv,[["__scopeId","data-v-4d412db0"]]);const ia="-\u54D4\u54E9\u54D4\u54E9_Bilibili",oa=(e,t,{isBlackKeyword:s,isWhiteKeyword:a})=>{const n=wn(t),o=e.split("?")[0],i={"/all":`${n}-\u89C6\u9891-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/video":`${n}\u89C6\u9891-${n}\u5728\u7EBF\u64AD\u653E-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/bangumi":`${n}\u756A\u5267-${n}\u52A8\u6F2B\u5728\u7EBF\u64AD\u653E-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/pgc":`${n}\u5728\u7EBF\u64AD\u653E-${n}\u5728\u7EBF\u89C2\u770B-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/live":`${n}\u76F4\u64AD-${n}\u4E3B\u64AD-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/article":`${n}-\u7ECF\u9A8C\u653B\u7565-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/topic":`${n}-\u89C6\u9891-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`,"/upuser":`${n}UP\u4E3B-\u54D4\u54E9\u54D4\u54E9\u89C6\u9891`};return s?"-":a?i[o]||`${n}${ia}`:n?`${n}${ia}`:"\u641C\u7D22 - \u54D4\u54E9\u54D4\u54E9_bilibili"},ra=(e,t,{isBlackKeyword:s,isWhiteKeyword:a})=>{const n=wn(t),o="bilibili\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u5F39\u5E55\u7F51\u7AD9\uFF0C\u8FD9\u91CC\u6709\u53CA\u65F6\u7684\u52A8\u6F2B\u65B0\u756A\uFF0C\u6D3B\u8DC3\u7684ACG\u6C1B\u56F4\uFF0C\u6709\u521B\u610F\u7684Up\u4E3B\u3002\u5927\u5BB6\u53EF\u4EE5\u5728\u8FD9\u91CC\u627E\u5230\u8BB8\u591A\u6B22\u4E50\u3002",i={"/all":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u5F39\u5E55\u7F51\u7AD9\uFF0C\u62E5\u6709\u4F17\u591A\u884C\u4E1A\u77E5\u540DUP\u4E3B\uFF0C${n}\u4E13\u9898\u9875\uFF0C\u4E3A\u60A8\u63D0\u4F9B${n}\u89C6\u9891\u3001${n}\u76F8\u5173\u7684\u653B\u7565\u7ECF\u9A8C\u7B49\u4FE1\u606F\uFF0C\u66F4\u591A${n}\u76F8\u5173\u4FE1\u606F\uFF0C\u8BF7\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/video":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u5F39\u5E55\u7F51\u7AD9\uFF0C\u4E3A\u60A8\u63D0\u4F9B\u5927\u91CF${n}\u89C6\u9891\u64AD\u5355\u548C${n}\u89C6\u9891\u5185\u5BB9\u3002\u6765B\u7AD9\uFF0C\u5728\u7EBF\u89C2\u770B\u66F4\u591A${n}\u89C6\u9891\u5185\u5BB9`,"/bangumi":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u756A\u5267\u7F51\u7AD9\uFF0C\u4E3A\u60A8\u63D0\u4F9B${n}\u756A\u5267\u3001${n}\u6F2B\u753B\u76F8\u5173\u89C6\u9891\u5185\u5BB9\uFF0C\u5728\u7EBF\u89C2\u770B\u66F4\u591A${n}\u52A8\u6F2B\u89C6\u9891\uFF0C\u8BF7\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/pgc":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u5F39\u5E55\u7F51\u7AD9\uFF0C\u4E3A\u60A8\u63D0\u4F9B${n}\u89C6\u9891\u3001${n}\u82B1\u7D6E\uFF0C${n}\u89E3\u8BFB\u7B49\u76F8\u5173\u89C6\u9891\u5185\u5BB9\uFF0C\u5728\u7EBF\u89C2\u770B${n}\uFF0C\u5C31\u6765\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/live":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u7F51\u7AD9\uFF0C\u4E3A\u60A8\u63D0\u4F9B${n}\u76F4\u64AD\uFF0C${n}\u76F4\u64AD\u95F4\uFF0C${n}\u4E3B\u64AD\uFF0C\u7B49\u4FE1\u606F\uFF0C\u66F4\u591A${n}\u76F8\u5173\u76F4\u64AD\u4FE1\u606F\uFF0C\u8BF7\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/article":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u7F51\u7AD9\uFF0C\u540C\u65F6\u4E5F\u62E5\u6709\u5927\u91CF\u4F18\u8D28\u7684${n}\u76F8\u5173\u7ECF\u9A8C\u3001\u653B\u7565\u7B49\u6587\u7AE0\uFF0C\u66F4\u591A${n}\u76F8\u5173\u4FE1\u606F\uFF0C\u8BF7\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/topic":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u5F39\u5E55\u7F51\u7AD9\uFF0C\u62E5\u6709\u4F17\u591A\u884C\u4E1A\u77E5\u540DUP\u4E3B\uFF0C${n}\u4E13\u9898\u9875\uFF0C\u4E3A\u60A8\u63D0\u4F9B${n}\u89C6\u9891\u3001${n}\u76F8\u5173\u7684\u653B\u7565\u7ECF\u9A8C\u7B49\u4FE1\u606F\uFF0C\u66F4\u591A${n}\u76F8\u5173\u4FE1\u606F\uFF0C\u8BF7\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`,"/upuser":`\u54D4\u54E9\u54D4\u54E9\uFF08bilibili\uFF09\u662F\u56FD\u5185\u77E5\u540D\u7684\u89C6\u9891\u7F51\u7AD9\uFF0C\u6D77\u91CFUP\u4E3B\u5728B\u7AD9\u4E0A\u4E92\u52A8\u4EA4\u6D41\uFF0C\u66F4\u591A${n}up\u4E3B\u76F8\u5173\u4F5C\u54C1\u5185\u5BB9\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u89C6\u9891\u7F51\u3002`};if(s)return"-";const r=e.split("?")[0];return!n||!i[r]?o:a?i[r]:o},la=(e,t,{isBlackKeyword:s,isWhiteKeyword:a})=>{const n=wn(t),o="B\u7AD9,\u5F39\u5E55,\u5B57\u5E55,AMV,MAD,MTV,ANIME,\u52A8\u6F2B,\u52A8\u6F2B\u97F3\u4E50,\u6E38\u620F,\u6E38\u620F\u89E3\u8BF4,ACG,galgame,\u52A8\u753B,\u756A\u7EC4,\u65B0\u756A,\u521D\u97F3,\u6D1B\u5929\u4F9D,vocaloid",i={"/all":`${n},${n}\u89C6\u9891,${n}\u5F71\u89C6`,"/video":`${n}\u89C6\u9891,${n}\u89C6\u9891\u5728\u7EBF\u64AD\u653E,${n}\u89C6\u9891\u5728\u7EBF\u89C2\u770B`,"/bangumi":`${n}\u756A\u5267,${n}\u756A\u5267\u5728\u7EBF\u64AD\u653E,${n}\u52A8\u6F2B,${n}\u52A8\u6F2B\u5728\u7EBF\u64AD\u653E`,"/pgc":`${n}\u5728\u7EBF\u64AD\u653E,${n}\u5728\u7EBF\u89C2\u770B,${n}\u5F71\u89C6`,"/live":`${n}\u76F4\u64AD,${n}\u76F4\u64AD\u89C6\u9891,${n}\u4E3B\u64AD,${n}\u76F4\u64AD\u95F4`,"/article":`${n},${n}\u535A\u5BA2,${n}\u653B\u7565,${n}\u7ECF\u9A8C`,"/topic":`${n},${n}\u89C6\u9891,${n}\u5F71\u89C6`,"/upuser":`${n},${n}up\u4E3B,${n}\u4E3B\u64AD`};if(s)return"-";const r=e.split("?")[0];return a&&n?i[r||"/all"]:o};var Yt=()=>{const e=A("lg"),t=A(36),s=A(36),a=A(na.lg),n=A(!0);if(!Vs())return{breakPoint:e,pageVideos:t,pageUsers:s,screenWidth:a,isMinMd:n};const o=Hi(({width:i})=>{const{xs:r,sm:u,md:v,lg:f,xl:h}=na;i<u?e.value="xs":i>=u&&i<v?e.value="sm":i>=v&&i<f?e.value="md":i>=f&&i<h?e.value="lg":e.value="xl",i<r?t.value=24:i>=r&&i<v?t.value=30:i>=v&&i<h?t.value=36:t.value=42,n.value=i>=v,s.value=n.value?36:24,a.value=i},!0);return $t(()=>Wi(o)),{breakPoint:e,pageVideos:t,pageUsers:s,screenWidth:a,isMinMd:n}},dt=()=>{const e=jt(),t=ya(),s=A(!1),a=A({}),n=(p,b)=>{if(ji(b))return!1;switch(p){case"keyword":return!!b.trim();case"page":return/^[1-9][0-9]*$/.test(b);case"o":return/^[1-9][0-9]*$/.test(b)&&[24,30,36,42].some(S=>b%S===0);case"order":return e.name===st.all||e.name===st.video?Ed.includes(b):e.name===st.article?Sd.includes(b):e.name===st.live?Dd.includes(b):e.name===st.upuser?Td.includes(b):!1;case"duration":return Fd.some(S=>S===+b);case"tids":return Md.some(S=>S===+b);case"search_type":return e.name===st.live&&Id.includes(b);case"category_id":return e.name===st.article&&Bd.includes(+b);case"order_sort":return e.name===st.upuser&&xd.includes(+b);case"user_type":return e.name===st.upuser&&Ld.includes(+b);default:return!1}},o=(p,b)=>{if(!b)return!1;switch(p){case"keyword":return n(p,b);case"page":return n(p,b)&&+b!=1;case"o":return n(p,b)&&+b!=0;case"order":return n(p,b)&&!!b&&b!=="totalrank"&&b!=="online";case"duration":return n(p,b)&&+b!=0;case"tids":return n(p,b)&&b!==0;case"search_type":return n(p,b)&&b!=="live";case"category_id":return n(p,b)&&+b!=0;case"order_sort":return n(p,b)&&+b!=0;case"user_type":return n(p,b)&&+b!=0;default:return!0}},i=p=>{const b=JSON.stringify(e.query),S=JSON.parse(b);Object.entries(p).forEach(([y,m])=>{o(y,m)?S[y]=m:(delete S[y],y==="page"&&delete S.o,y==="o"&&delete S.page)}),JSON.stringify(S)!==b&&We(()=>t.replace({path:e.path,query:S}))},r=()=>{i({search_type:"",order:"",order_sort:"",user_type:"",page:"",o:""})},u=(p,b,S)=>{if(b=+b,p=+p,b){const y=Math.ceil((b+1)/S);return{page:y>1?y:2,offset:b}}else if(p){const y=(p-1)*S;return{page:Math.ceil((y+1)/S),offset:y}}else return{page:1,offset:0}},v=(p,b,S=!1)=>{const{page:y,offset:m}=u(p,void 0,b),w={page:y};S||(w.o=m),setTimeout(()=>i(w))},f=(p,b)=>{const S=a.value,{page:y,offset:m}=u(S.page,S.o,p);setTimeout(()=>i({page:y,o:m})),es(b)&&b({page:y,offset:m})},h=()=>{const p={},{query:b={}}=e;return Object.entries(b).forEach(([S,y])=>{n(S,y)&&(p[S]=y)}),p},_=()=>{if(e.name!=="all")return!1;const p=T({},a.value);return delete p.keyword,Object.keys(p).length==0};return fe(e,()=>{a.value=h(),s.value=_()},{immediate:!0}),{isSearchAll:s,validQueryParams:a,updateQueryParams:i,initQueryParams:r,getValidPageInfo:u,updatePageParams:v,initPageParams:f}},$n=e=>{const{validQueryParams:t,initPageParams:s,updatePageParams:a,getValidPageInfo:n}=dt(),o=A(!1),i=A(1),r=A(0),u=()=>{const{page:v,offset:f}=n(t.value.page,t.value.o,e.value);i.value=v,r.value=f};return u(),fe(i,v=>{o.value||(r.value=(v-1)*e.value,a(v,e.value))}),fe(e,v=>{const{page:f,offset:h}=n(void 0,t.value.o,v);o.value=!0,i.value=f,r.value=h,a(f,v,!0),We(()=>o.value=!1)}),s(e.value,({page:v,offset:f})=>{o.value=!0,i.value=v,r.value=f,We(()=>o.value=!1)}),{page:i,offset:r,resetPageParams:u}},Kt=({submitSearchHandler:e,routeChangedHandler:t})=>{const s=j(ot);es(e)&&(s==null||s.on("submitSearch",e)),es(t)&&(s==null||s.on("routeChanged",t)),$t(()=>{es(e)&&(s==null||s.off("submitSearch",e)),es(t)&&(s==null||s.off("routeChanged",t))})},En=(e,t=200)=>{const s=A(!1),a=A(!1),n=()=>{a.value||(s.value=!s.value)},o=()=>{const i=e.value;if(i){if(s.value){i.classList.remove("hide"),i.style.height="auto",i.style.transition="none";const r=window.getComputedStyle(i).height;i.style.height="0",setTimeout(()=>{i.style.transition="height .2s",i.style.height=r}),setTimeout(()=>{i.style.height="auto",i.classList.remove("ov_hidden")},t)}else{i.classList.add("ov_hidden"),i.style.height="auto",i.style.transition="none";const r=window.getComputedStyle(i).height;i.style.height=r,setTimeout(()=>{i.style.transition="height .2s",i.style.height="0"})}a.value=!0,setTimeout(()=>a.value=!1,t+50)}};return fe(s,()=>o(),{flush:"post"}),ze(()=>{setTimeout(()=>o())}),{isShowMoreConditions:s,toggleSlideMoreConditions:n}};const nv=wa("searchResponse",{state:()=>({searchAllResponse:{},qvId:ba(32,"0-9a-zA-Z"),isSSR:ce,isSSRVisit:!1}),actions:{querySearchAll(e,t){return q(this,null,function*(){let s="x/web-interface/search/all/v2";const a=Object.assign({},e,{web_location:1430654});this.searchAllResponse=yield Ye.get(s,a,{ctx:t,com2co:ce,encode:ce,preload:!1,encWbi:!0,encWbiKeys:{wbiImgKey:"76e91e21c4df4e16af9467fd6f3e1095",wbiSubKey:"ddfca332d157450784b807c59cd7921e"},timeout:Ka})})}}}),Vt=wa("searchTypeResponse",{state:()=>({searchTypeResponse:{},isSSR:ce,isSSRVisit:!1}),actions:{querySearchByType(e,t){return q(this,null,function*(){const s=`${kt}x/web-interface/search/type`,a=Object.assign({},e,{web_location:1430654}),n=yield Ye.get(s,a,{ctx:t,com2co:ce,encode:ce,preload:!1,encWbi:!0,encWbiKeys:{wbiImgKey:"76e91e21c4df4e16af9467fd6f3e1095",wbiSubKey:"ddfca332d157450784b807c59cd7921e"},timeout:Ka});return this.searchTypeResponse=Za(n),this.searchTypeResponse})}}});const Fn=e=>(Qe("data-v-190300f0"),e=e(),Ge(),e),av={class:"search-layout clearfix"},iv={key:1},ov={class:"search-header"},rv={class:"search-input"},lv={class:"search-tabs i_wrapper"},cv=Fn(()=>c("hr",{class:"search-line"},null,-1)),uv={class:"conditions-order flex_between"},dv={class:"search-condition-row"},_v={class:"search-condition-row"},vv={class:"search-condition-row"},hv=["onMouseover","onMouseleave"],pv={class:"search-sub-wrapper pt_xs invisible"},fv={key:0,class:"search-sub-channel flex_start"},mv=["onClick"],gv={class:"search-page-wrapper"},yv={key:3,class:"side-buttons-container p_fixed"},wv={class:"side-buttons-wrapper i_wrapper"},bv={class:"p_relative"},kv={class:"side-buttons flex_col_end p_absolute"},Cv={href:"//www.bilibili.com/v/customer-service",target:"_blank"},Av=Fn(()=>c("br",null,null,-1)),$v={class:"btn-to-top-wrap"},Ev=Fn(()=>c("br",null,null,-1)),nn="channel-item-display",ca="channel-item-opaque",Fv=ae({__name:"index",setup(e){const t=j(ot),s=jt(),a=ya(),{isSearchAll:n,validQueryParams:o,initQueryParams:i,updateQueryParams:r}=dt(),u=A(o.value.keyword||""),v=A(u.value),f=A(u.value?1:-1),h=A(!0),_=[{tab:"\u7EFC\u5408",route:"all",field:"",num:0},{tab:"\u89C6\u9891",route:"video",field:"video",num:0},{tab:"\u756A\u5267",route:"bangumi",field:"media_bangumi",num:0},{tab:"\u5F71\u89C6",route:"pgc",field:"media_ft",num:0},{tab:"\u76F4\u64AD",route:"live",field:"live",num:0},{tab:"\u4E13\u680F",route:"article",field:"article",num:0}],p=[{name:"\u7EFC\u5408\u6392\u5E8F",order:"totalrank"},{name:"\u6700\u591A\u64AD\u653E",order:"click"},{name:"\u6700\u65B0\u53D1\u5E03",order:"pubdate"},{name:"\u6700\u591A\u5F39\u5E55",order:"dm"},{name:"\u6700\u591A\u6536\u85CF",order:"stow"}],b=[{name:"\u5168\u90E8\u65F6\u957F",duration:0},{name:"10\u5206\u949F\u4EE5\u4E0B",duration:1},{name:"10-30\u5206\u949F",duration:2},{name:"30-60\u5206\u949F",duration:3},{name:"60\u5206\u949F\u4EE5\u4E0A",duration:4}],S=ce?At():null;let y=ln([]);y=ln([..._,{tab:"\u7528\u6237",route:"upuser",field:"bili_user",num:0}]);const m=nv(),w=Vt(),B=os,$=A("totalrank"),g=A(0),C=A(0),k=A(0),L=A("all"),Y=A(0);$d.includes(s.name)?L.value=s.name:L.value=null;const I=M(()=>L.value==="all"||L.value==="video"),U=A(!1),Q=A(!1),te=A(!1),G=A(null),{isShowMoreConditions:ve,toggleSlideMoreConditions:$e}=En(G),{screenWidth:H,isMinMd:Z,pageVideos:P}=Yt(),W=$n(P),J=A(0),oe=A(""),pe=A(),Be=A(!1),Ie=A(m.qvId),He=A(!1),we=M(()=>{var Fe,ye,Se;const ee=y.find(De=>De.route==L.value),be=(Fe=s==null?void 0:s.query)==null?void 0:Fe.search_source;return{query:u.value,qv_id:Ie.value,trackid:n.value?m.searchAllResponse.seid:oe.value,tab_id:L.value,tab_name:ee==null?void 0:ee.tab,page:((ye=o.value)==null?void 0:ye.page)||1,page_offset:((Se=o.value)==null?void 0:Se.o)||0,search_source:Y.value||be||0}}),re=M(()=>{var Fe,ye;const{tids1_name:ee,tids2_name:be}=aa(k.value||C.value);return{order_id:$.value,order_name:(Fe=p.find(Se=>Se.order===$.value))==null?void 0:Fe.name,duration_id:g.value,duration_name:(ye=b.find(Se=>Se.duration===Number(g.value)))==null?void 0:ye.name,tids1_id:C.value,tids1_name:ee,tids2_id:k.value,tids2_name:be}}),_e=()=>{var ye,Se,De;const ee=(ye=o.value.keyword)==null?void 0:ye.trim();te.value&&(f.value=ee?1:-1),ee&&u.value!==ee&&(u.value=ee,v.value=ee),$.value=(Se=o.value.order)!=null?Se:"totalrank",g.value=(De=o.value.duration)!=null?De:0;const{tids1:be,tids2:Fe}=aa(o.value.tids);C.value=be,k.value=Fe,(o.value.duration||o.value.tids)&&(ve.value=!0)};_e();const Ce=()=>{$.value="totalrank",g.value=0,C.value=0,k.value=0},Ne=(ee=!1)=>{He.value&&(He.value=!1,!ee)||ce||(Ie.value=ba(32,"0-9a-zA-Z"),m.qvId=Ie.value)},Oe=ee=>{var Fe,ye,Se;const be=ee.top_tlist||{};y.forEach(De=>{De.num=be[De.field]||0}),ee.egg_hit&&(pe.value=ee.egg_info),((Fe=ee==null?void 0:ee.app_display_option)==null?void 0:Fe.is_search_page_grayed)===1?(Be.value=!0,!S&&((ye=document.querySelector("html"))==null||ye.classList.add("gray-class"))):(Be.value=!1,!S&&((Se=document.querySelector("html"))==null||Se.classList.remove("gray-class")))},he=(ee,be)=>q(this,null,function*(){var ye,Se;if(!u.value)return;Q.value=!0,U.value=!1,n.value&&Ne();const Fe=ii(u.value,Ie.value,ee);try{yield m.querySearchAll(Fe,S),Q.value=!1}catch(De){U.value=!0,Q.value=!1}!ce&&((ye=m.searchAllResponse)==null?void 0:ye.v_voucher)&&Ct((De,Je)=>q(this,null,function*(){return yield he(Je==null?void 0:Je.token,De)}),{v_voucher:(Se=m.searchAllResponse)==null?void 0:Se.v_voucher},be)});zi(m.searchAllResponse)&&!ce&&n.value&&he(),Dt(()=>q(this,null,function*(){yield he(),Oe(m.searchAllResponse),S&&m.searchAllResponse&&(S.pureData=m.searchAllResponse)}));const ie=(ee=!1,be=!1)=>{var ye;const Fe=v.value.trim();if(Fe||be){const Se=u.value;Fe&&u.value!==Fe&&(Ne(!0),u.value=Fe),(!ee||s.name!=="all")&&(n.value||!((ye=m.searchAllResponse.result)!=null&&ye.length)||Fe&&Se!==Fe)&&(he(),n.value||(He.value=!0)),setTimeout(()=>t==null?void 0:t.emit("submitSearch"),100)}},V=ka(ie,600),se=ee=>{Y.value=ee},me=ee=>{u.value=ee,v.value=ee,f.value=1,setTimeout(()=>V())},Re=ee=>{Ys(),h.value=!1,ve.value=!1,W.page.value=1,Ce(),i(),setTimeout(()=>{if(a.push({name:ee,query:s.query}),ee==="all"){const be=m.searchAllResponse.top_tlist;m.searchAllResponse={top_tlist:be}}setTimeout(()=>{h.value=!0,V(s.name!=="all",!0)})})},Xe=ee=>{ee!==$.value&&($.value=ee,setTimeout(()=>V()))},ge=ee=>{ee!==g.value&&(g.value=ee,setTimeout(()=>V()))},Te=ee=>{ee===C.value&&k.value===0||(C.value=ee,k.value=0,setTimeout(()=>V()))},et=(ee,be)=>{be!==k.value&&(C.value=ee,k.value=be,setTimeout(()=>V()))},_t=()=>{r({order:$.value,duration:g.value,tids:k.value||C.value,keyword:u.value})};let vt={};const ht=(ee,be,Fe)=>{var Se;const ye=(Se=ma(ee,".search-channel-item"))==null?void 0:Se.querySelector(".search-sub-wrapper");ye&&(Fe?Qi(ye,nn)||(ye.classList.add(nn,ca),clearTimeout(vt[be]),setTimeout(()=>{const{left:De,right:Je}=ye.getBoundingClientRect();De<=0&&(ye.style.left=`calc(50% + ${-De}px)`),Je>=H.value&&(ye.style.left=`calc(50% - ${Je-H.value}px)`),ks(ye,"invisible")})):(ks(ye,ca),vt[be]=setTimeout(()=>{ye.style.left="50%",ks(ye,nn),Ca(ye,"invisible")},200)))},Et=(ee,be)=>ht(ee.target,be,!0),mi=(ee,be)=>ht(ee.target,be,!1),In=()=>{_e(),t==null||t.emit("routeChanged"),L.value!==s.name?L.value=s.name:setTimeout(()=>V())},Js=()=>{qi({speed:1})},gi=ee=>{Js(),L.value=ee},Dn=()=>{J.value=ga().scrollTop},Ys=()=>{v.value.trim()||(v.value=u.value)},Tn=()=>{He.value=!0,Ys()};return Me(Tt,u),Me(Ve,we),Me(Xa,U),Me(ei,Q),Me(ti,M(()=>m.searchAllResponse)),Me(xt,oe),Me(Ad,re),Me(Cn,W),Me(si,gi),Me(ut,Js),Me(ni,ie),Me(An,V),Me(Lt,Ie),Me(Pt,Ne),fe(L,()=>{Ut({c:"search-navbar",d:"all",e:"click",type:"click"},{msg:JSON.stringify(ke(T({},we.value),{trackid:void 0}))})},{immediate:!0}),fe(()=>m.searchAllResponse,Oe,{immediate:!0}),ce||(fe(()=>m.searchAllResponse,ee=>{var ye,Se,De,Je,pt,Ft;if(ee.in_black_key===void 0&&ee.in_white_key===void 0)return;document.title=oa(s.path,u.value,{isBlackKeyword:!!((ye=m.searchAllResponse)!=null&&ye.in_black_key),isWhiteKeyword:!!((Se=m.searchAllResponse)!=null&&Se.in_white_key)});const be=document.querySelector('meta[name="description"]'),Fe=document.querySelector('meta[name="keywords"]');be==null||be.setAttribute("content",ra(s.path,u.value,{isBlackKeyword:!!((De=m.searchAllResponse)!=null&&De.in_black_key),isWhiteKeyword:!!((Je=m.searchAllResponse)!=null&&Je.in_white_key)})),Fe==null||Fe.setAttribute("content",la(s.path,u.value,{isBlackKeyword:!!((pt=m.searchAllResponse)!=null&&pt.in_black_key),isWhiteKeyword:!!((Ft=m.searchAllResponse)!=null&&Ft.in_white_key)}))}),fe(()=>w.searchTypeResponse,ee=>{var ye,Se,De,Je,pt,Ft;if(ee.in_black_key===void 0&&ee.in_white_key===void 0)return;document.title=oa(s.path,u.value,{isBlackKeyword:!!((ye=w.searchTypeResponse)!=null&&ye.in_black_key),isWhiteKeyword:!!((Se=w.searchTypeResponse)!=null&&Se.in_white_key)});const be=document.querySelector('meta[name="description"]'),Fe=document.querySelector('meta[name="keywords"]');be==null||be.setAttribute("content",ra(s.path,u.value,{isBlackKeyword:!!((De=w.searchTypeResponse)!=null&&De.in_black_key),isWhiteKeyword:!!((Je=w.searchTypeResponse)!=null&&Je.in_white_key)})),Fe==null||Fe.setAttribute("content",la(s.path,u.value,{isBlackKeyword:!!((pt=w.searchTypeResponse)!=null&&pt.in_black_key),isWhiteKeyword:!!((Ft=w.searchTypeResponse)!=null&&Ft.in_white_key)}))})),fe(u,()=>{Ce()}),fe([u,$,g,C,k],()=>{Ys(),W.page.value=1,_t()}),_t(),!m.isSSR&&!w.isSSR?setTimeout(()=>{V(!0)}):n.value&&!w.isSSRVisit&&(w.isSSRVisit=!0),ze(()=>{te.value=!0,f.value=u.value?1:-1;const ee=document.querySelector("#biliMainFooter");ee&&(ee.style.display="block"),t==null||t.on("onPageChange",Tn),window.addEventListener("popstate",In),window.addEventListener("scroll",Dn),Be.value&&document.querySelector("html").classList.add("gray-class")}),$t(()=>{t==null||t.off("onPageChange",Tn),window.removeEventListener("popstate",In),window.removeEventListener("scroll",Dn)}),(ee,be)=>{const Fe=R_,ye=O("v-tab-item"),Se=O("v-tabs"),De=O("v-button"),Je=O("WidgetArrow"),pt=js,Ft=O("router-view"),St=Ee("report");return l(),d("div",av,[E(Fe),pe.value?(l(),N(H_,{key:0,info:pe.value},null,8,["info"])):F("",!0),f.value===1?(l(),d("div",iv,[c("div",ov,[c("div",rv,[E(ri,{keyword:v.value,"onUpdate:keyword":be[0]||(be[0]=Ae=>v.value=Ae),onSubmitSearch:R(V),onTypeChange:se},null,8,["keyword","onSubmitSearch"])]),c("div",lv,[E(Se,{activeKey:L.value,"onUpdate:activeKey":be[1]||(be[1]=Ae=>L.value=Ae),"slide-to-hover":!1,onTabChange:Re},{default:z(()=>[(l(!0),d(X,null,de(R(y),Ae=>(l(),N(ye,{key:Ae.route,tab:Ae.tab,num:Ae.num,"show-zerro":Ae.route!=="all"},null,8,["tab","num","show-zerro"]))),128))]),_:1},8,["activeKey"])]),cv,E(pt,{"auto-report":{show:!0,spm:"search-filter.all",msg:ke(T({},we.value),{trackid:void 0})}},{default:z(()=>[I.value?(l(),d("div",{key:0,class:K(["search-conditions i_wrapper mt_lg",{mt_xxl:R(Z)}])},[c("div",uv,[c("div",dv,[(l(),d(X,null,de(p,Ae=>x(E(De,{key:Ae.order,type:"tab",class:"mr_sm",active:Ae.order===$.value,onClick:Ke=>Xe(Ae.order)},{default:z(()=>[ne(D(Ae.name),1)]),_:2},1032,["active","onClick"]),[[St,ke(T({},re.value),{click_type:"order",order_id:Ae.order,order_name:Ae.name}),"msg"]])),64))]),x(E(De,{class:"i_button_more","active-shrink":"",onClick:R($e)},{default:z(()=>[ne(" \u66F4\u591A\u7B5B\u9009 "),E(Je,{class:K(["i_icon_more ts_all_fast rotate_90",{rotate_n90:R(ve)}])},null,8,["class"])]),_:1},8,["onClick"]),[[St,{spm:"search.filter-toggle",msg:{show:!R(ve)}},"msg"]])]),c("div",{ref_key:"moreConditions",ref:G,class:"more-conditions hide ov_hidden"},[c("div",_v,[(l(),d(X,null,de(b,Ae=>x(E(De,{key:Ae.duration,type:"tab",class:"mt_sm mr_sm",active:Ae.duration===+g.value,onClick:Ke=>ge(Ae.duration)},{default:z(()=>[ne(D(Ae.name),1)]),_:2},1032,["active","onClick"]),[[St,ke(T({},re.value),{click_type:"duration",duration_id:Ae.duration,duration_name:Ae.name}),"msg"]])),64))]),c("div",vv,[(l(!0),d(X,null,de(R(B),Ae=>(l(),d("div",{key:Ae.tids,class:"search-channel-item mt_sm",onMouseover:Ke=>Et(Ke,Ae.tids),onMouseleave:Ke=>mi(Ke,Ae.tids)},[x(E(De,{type:"tab",class:"mr_sm",active:Ae.tids===+C.value,onClick:Ke=>Te(Ae.tids)},{default:z(()=>[ne(D(Ae.name),1)]),_:2},1032,["active","onClick"]),[[St,ke(T({},re.value),{click_type:"tids1",tids1_id:Ae.tids,tids1_name:Ae.name}),"msg"]]),c("div",pv,[Ae.children.length?(l(),d("ul",fv,[(l(!0),d(X,null,de(Ae.children,Ke=>(l(),d("li",{key:Ke.tids,class:"sub-channel-item"},[x(c("a",{class:K(["text2 text_nowrap",{brand_blue:Ke.tids===+k.value}]),onClick:Vy=>et(Ae.tids,Ke.tids)},D(Ke.name),11,mv),[[St,ke(T({},re.value),{click_type:"tids2",tids2_id:Ke.tids,tids2_name:Ke.name}),"msg"]])]))),128))])):F("",!0)])],40,hv))),128))])],512)],2)):F("",!0)]),_:1},8,["auto-report"])]),c("div",{class:K(["search-content",{"search-content--gray":L.value==="all"}])},[x(c("div",gv,[E(Ft)],512),[[Ue,h.value]])],2)])):F("",!0),f.value===-1?(l(),N(sv,{key:2,onEmptyChange:me})):F("",!0),f.value?(l(),d("div",yv,[c("div",wv,[c("div",bv,[E(pt,{"auto-report":{spm:"search-side-btns.all",msg:T({},we.value)}},{default:z(()=>[c("div",kv,[x(c("div",null,[x(c("a",Cv,[E(De,{"active-shrink":"","no-auto-report":""},{default:z(()=>[E(R(as),{icon:"BDC/headset_customer_line/2",fill:"currentColor",class:"icon_service"}),Av,ne("\u5BA2\u670D ")]),_:1})],512),[[St,{click_type:"customerService"},"msg"]])],512),[[Ue,J.value>250]]),c("div",$v,[x(E(De,{"active-shrink":"",class:K(["btn-to-top",{visible:J.value>250}]),onClick:Js},{default:z(()=>[E(R(as),{icon:"BDC/arrow_up_triangle_fill/1",fill:"currentColor",class:"icon_to_top"}),Ev,ne("\u9876\u90E8 ")]),_:1},8,["class"]),[[St,{click_type:"toTop"},"msg"]])])])]),_:1},8,["auto-report"])])])])):F("",!0)])}}});var Sv=ue(Fv,[["__scopeId","data-v-190300f0"]]);const Bv={class:"activity-card"},Iv=["href"],Dv={class:"activity-card-content"},Tv={class:"activity-card-content-head"},xv={class:"activity-card-content-head-title"},Lv=["title","href"],Pv={class:"activity-card-content-head-desc"},Rv=["href"],Vv=ae({__name:"ActivityCard",props:{info:{type:Object,default:()=>({})}},setup(e){const t=e,s=j(Ve),a=M(()=>({spm:"search-card.all",msg:T({spmid:"search.search-result.activity.all",url:t.info.url,id:t.info.id},s.value)})),n=M(()=>{var o;return(o=t==null?void 0:t.info)==null?void 0:o.corner});return(o,i)=>{const r=O("VImg"),u=O("VButton"),v=Ee("report");return x((l(),d("div",Bv,[x(c("a",{class:"activity-card-image",href:e.info.url,target:"_blank"},[E(r,{src:t.info.cover,alt:t.info.title,width:336,height:189,rule:"1c_100q","bfs-style":"web-search-common-cover"},null,8,["src","alt"])],8,Iv),[[v,T({},a.value),"click"]]),c("div",Dv,[c("div",Tv,[c("div",xv,[n.value?(l(),N(Gt,{key:0,value:n.value,class:"corner-tag"},null,8,["value"])):F("",!0),x(c("a",{title:e.info.title,href:e.info.url,target:"_blank",class:"text_ellipsis"},D(e.info.title),9,Lv),[[v,T({},a.value),"click"]])]),c("div",Pv,D(e.info.desc),1)]),x(c("a",{class:"activity-card-content-footer",href:e.info.url,target:"_blank"},[E(u,{type:"blue",class:"pgc_btn_size"},{default:z(()=>[ne("\u67E5\u770B\u8BE6\u60C5")]),_:1})],8,Rv),[[v,T({},a.value),"click"]])])],512)),[[v,T({},a.value),"show"]])}}});var Mv=ue(Vv,[["__scopeId","data-v-1487c6e0"]]);const Nv={},Ov={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Uv=c("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.59626 2.11084C4.401 1.91558 4.08442 1.91558 3.88916 2.11084C3.69389 2.3061 3.69389 2.62269 3.88916 2.81795L7.07121 6L3.88916 9.18206C3.6939 9.37732 3.6939 9.6939 3.88916 9.88916C4.08443 10.0844 4.40101 10.0844 4.59627 9.88916L8.1318 6.35363C8.23479 6.25064 8.28346 6.1139 8.27781 5.97901C8.27278 5.85811 8.22411 5.73869 8.1318 5.64638L4.59626 2.11084Z",fill:"currentColor"},null,-1),Hv=[Uv];function Wv(e,t){return l(),d("svg",Ov,Hv)}var jv=ue(Nv,[["render",Wv]]);const zv={},qv={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qv=c("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.42578 3.40011C5.42578 2.90305 5.82872 2.50011 6.32578 2.50011H7.67929C8.17635 2.50011 8.57929 2.90305 8.57929 3.40011V11.4876H5.42578V3.40011ZM1.65039 6.71127C1.65039 6.21421 2.05333 5.81127 2.55039 5.81127H4.21841V11.4876H2.55039C2.05333 11.4876 1.65039 11.0847 1.65039 10.5876V6.71127ZM11.4541 7.23037H9.78638V11.4876H11.4541C11.9511 11.4876 12.3541 11.0847 12.3541 10.5876V8.13037C12.3541 7.63331 11.9511 7.23037 11.4541 7.23037Z",fill:"currentColor"},null,-1),Gv=[Qv];function Jv(e,t){return l(),d("svg",qv,Gv)}var Yv=ue(zv,[["render",Jv]]);const Kv=e=>(Qe("data-v-a44ae250"),e=e(),Ge(),e),Zv={class:"score"},Xv={class:"score-text"},eh={class:"score-value"},th=Kv(()=>c("span",null,"\u5206",-1)),sh=ae({__name:"Score",props:{text:{type:String,default:"\u8BC4\u5206"},score:{type:Number,default:0}},setup(e){const t=e;return(s,a)=>(l(),d("div",Zv,[c("span",Xv,D(t.text),1),c("span",eh,[ne(D(t.score.toFixed(1)),1),th])]))}});var li=ue(sh,[["__scopeId","data-v-a44ae250"]]);const nh=["href"],ah={class:"game-card-image"},ih={class:"game-card-content"},oh={class:"game-card-content-head"},rh={class:"game-card-content-head-title"},lh={class:"text_ellipsis"},ch={key:0,class:"game-card-content-head-text"},uh={key:0,class:"game-card-content-head-recommend"},dh={key:1},_h={key:1,class:"game-card-content-head-text game-card-content-head-summary"},vh={class:"game-card-content-footer"},hh={class:"game-card-content-footer-info"},ph={key:0,class:"game-card-content-footer-num"},fh={class:"game-card-content-footer-btns"},ys="2000040011",mh=ae({__name:"GameCard",props:{info:{type:Object,default:()=>({})},type:{type:String,default:"large"}},setup(e){const t=e,s=j(Ve),a=A(""),n=A(Pd[t.info.game_status]),o=M(()=>{let w="";return t.info.notice&&t.info.notice_title?w=`${t.info.notice_title}\uFF1A${t.info.notice}`:t.info.summary&&(w=`\u7B80\u4ECB\uFF1A${t.info.summary}`),w}),i=M(()=>{const{game_tags:w,platform:B}=t.info,$=[];return w&&$.push(w),B&&$.push(`\u652F\u6301${B.replace(//g,"/")}`),$.join("\uFF0C")}),r=M(()=>t.info.game_link.replace(/sourceFrom=\d+/,`sourceFrom=${ys}`)),u=M(()=>{var B;let w=(B=t.info.rank_info)==null?void 0:B.rank_link;return w&&(/sourceFrom=.+/.test(w)?w.replace(/sourceFrom=.+/,`sourceFrom=${ys}`):w.indexOf("?")>=0?w=w+=`&sourceFrom=${ys}`:w=w+=`?sourceFrom=${ys}`),w}),v=w=>{a.value=w,y()},f=w=>{var B;((B=w.type)==null?void 0:B.type)==="login"&&bs.refresh()},h=w=>{u.value&&(window.open(u.value),w.preventDefault(),w.noother=!0)},_=w=>{var B;return{spm:"search-card.all",msg:T({spmid:"search.search-result.game."+w,url:t.info.game_link,game_id:t.info.game_base_id,game_name:t.info.game_name,list_copywriting:(B=t.info.rank_info)==null?void 0:B.rank_content,recommendation_reason:t.info.recommend_reason,exhibition_type:t.type==="small"?1:0,main_button_name:a.value||n.value},s.value)}},p=w=>{!w.defaultPrevented&&!w.noother&&wt({c:"search-card",d:"all",e:"click",type:"click"},{msg:JSON.stringify(T({},_("other").msg))})};let b=!1,S=!1;const y=w=>{w&&(S=!0),a.value&&S&&!b&&(b=!0,wt({c:"search-card",d:"all",e:"show",type:"appear"},{msg:JSON.stringify(T({},_("all").msg))}))},m=w=>{let B;switch(w){case 1:B=1;break;case 2:B=3;break;case 0:B=2;break;case 4:B=4;break;case 5:B=5}let $=r.value;B&&($=`${$}${t.info.game_link.indexOf("?")>-1?"&":"?"}action=${w}`),window.open($)};return(w,B)=>{var L;const $=O("GameButton"),g=O("client-only"),C=O("VButton"),k=Ee("report");return x((l(),d("a",{class:"game-card",target:"_blank",href:r.value,onClick:p},[c("div",ah,[E(R(it),{src:t.info.game_icon,alt:t.info.game_name,width:140,height:140,rule:"1c","bfs-style":"web-search-game-cover"},null,8,["src","alt"])]),c("div",ih,[c("div",oh,[c("div",rh,[E(Gt,{value:"\u6E38\u620F"}),c("span",lh,D(e.info.game_name),1)]),i.value||e.info.recommend_reason||o.value?(l(),d("div",ch,[e.info.recommend_reason?(l(),d("div",uh,D(e.info.recommend_reason),1)):F("",!0),i.value||o.value?(l(),d("div",dh,D(i.value||o.value),1)):F("",!0)])):F("",!0),o.value&&i.value?(l(),d("div",_h,[c("div",null,D(o.value),1)])):F("",!0)]),c("div",vh,[c("div",hh,[e.info.book_num?(l(),d("div",ph,D(R(at)(e.info.book_num))+"\u4EBA\u9884\u7EA6",1)):F("",!0),e.info.grade?(l(),N(li,{key:1,class:"game-card-content-footer-score",score:e.info.grade},null,8,["score"])):F("",!0),(L=e.info.rank_info)!=null&&L.rank_content?x((l(),d("div",{key:2,class:"game-card-content-footer-rank",style:je({color:e.info.rank_info.search_font_day_color,backgroundColor:e.info.rank_info.search_bkg_day_color}),onClick:h},[e.info.rank_info.search_day_icon_url?(l(),N(R(it),{key:0,src:e.info.rank_info.search_day_icon_url,class:"game-card-content-footer-icon"},null,8,["src"])):(l(),N(Yv,{key:1,class:"game-card-content-footer-icon"})),c("span",null,D(e.info.rank_info.rank_content),1),u.value?(l(),N(jv,{key:2})):F("",!0)],4)),[[k,T({},_("list")),"click"]]):F("",!0)]),c("div",fh,[E(g,null,{default:z(()=>[x(E($,{ref:"gameBtn",class:"vui_button vui_button--blue game-card-btn pgc_btn_size",mode:"blue",game_base_id:e.info.game_base_id,source_from:"2000040011",onUpdate:v,onLoginUpdate:f,onClick:B[0]||(B[0]=It(()=>{},["prevent"]))},null,8,["game_base_id"]),[[k,T({},_("enter")),"click"]])]),_:1}),e.info.comment_num?x((l(),N(C,{key:0,plain:"",class:"game-card-btn game-card-gray pgc_btn_size",onClick:B[1]||(B[1]=It(Y=>m(5),["prevent"]))},{default:z(()=>[ne("\u5B98\u65B9\u52A8\u6001")]),_:1},512)),[[k,T({},_("official-developments")),"click"]]):F("",!0),e.info.comment_num?x((l(),N(C,{key:1,plain:"",class:"game-card-gray pgc_btn_size",onClick:B[2]||(B[2]=It(Y=>m(4),["prevent"]))},{default:z(()=>[ne("\u8BC4\u8BBA ("+D(R(at)(e.info.comment_num))+"\u6761)",1)]),_:1},512)),[[k,T({},_("comment")),"click"]]):F("",!0)])])])],8,nh)),[[k,()=>y(!0),"show"]])}}});var gh=ue(mh,[["__scopeId","data-v-567653bb"]]);const yh={key:0,class:"activity-game-list i_wrapper search-all-list"},wh={class:"activity-game-list-wrap"},bh={class:"row"},kh=ae({__name:"ActivityGameList",props:{info:{type:Array,default:()=>[]},topTList:{type:Object,default:()=>({})}},setup(e){const t=e,s=j("bangumi"),a=j("pgc"),n=M(()=>s.value.length>=t.topTList.media_bangumi&&a.value.length>=t.topTList.media_ft&&s.value.length<=2&&a.value.length<=3?s.value.length+a.value.length>2:s.value.length?s.value.length>2:a.value.length?a.value.length>2:!1),o=M(()=>{var r;return(r=i.value)!=null&&r.some(u=>u.type===Ze.activity)?"small":"large"}),i=M(()=>t.info.filter(r=>(r==null?void 0:r.card_type)!==2));return(r,u)=>i.value.length?(l(),d("div",yh,[c("div",wh,[c("div",bh,[(l(!0),d(X,null,de(i.value,(v,f)=>(l(),d("div",{key:f,class:K(["col_6 activity-game-list-item",{col_md_4:n.value}])},[(v==null?void 0:v.type)===R(Ze).activity?(l(),N(Mv,{key:0,info:v},null,8,["info"])):(l(),N(gh,{key:1,info:v,type:o.value},null,8,["info","type"]))],2))),128))])])])):F("",!0)}});var Ch=ue(kh,[["__scopeId","data-v-20819b52"]]),ci="data:image/gif;base64,R0lGODlhJAAkAIABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDQ2MCwgMjAyMC8wNS8xMi0xNjowNDoxNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDdCNUJFRjlGQjIzMTFFQTgzNjRCQUFBRjZFMzg3NjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDdCNUJFRkFGQjIzMTFFQTgzNjRCQUFBRjZFMzg3NjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowN0I1QkVGN0ZCMjMxMUVBODM2NEJBQUFGNkUzODc2NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowN0I1QkVGOEZCMjMxMUVBODM2NEJBQUFGNkUzODc2NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkDAAEALAAAAAAkACQAAAJvjI+py+0Po5y02quABhhu3TUfGC4jV2Zjqn5scr5ILBs0vF337Fa7vfIFeT3KL3D0DA/Jx7HpeC6ZuVaVeMWitFtq0ZsFfsVh5NQ8Rpelafb67CZxrXJwnXxX5+NdfF//x0cXCHeGJpLnVbPI+FIAACH5BAkDAAEALAAAAAAkACQAAAJrjI+py+0Po5y02rsAlqDr3XgeyIgdmZmoYn7r0b5ILBt0fcv5vO32aPH5IEJVpSgqhYwzZvPEcv6SCSTweYVJA1Yo1qulfl3h7NTM3XbJZ3CbnRaX3XH0Oip/4+3qfr5Od4e3BBdWc4j4UgAAIfkECQMAAQAsAAAAACQAJAAAAmiMj6nL7Q+jnLTai7OeoIPNeB6oiB2ZmB96qGxrvoYr06/N4qiOrBYfEDVOCx5QWIqllD0mDNmEPkdL6cx5tQaxW62R+/WCx+IyNXqeEtFrtc+dNLezafq8W8ffw3n+vTv0lyVDWLhRAAAh+QQJAwABACwAAAAAJAAkAAACaYyPqcvtD6OctNqLs95cgc4A4gci41gep5gaK5m+bSC3dbxmcHJT59KTBGk54M5URP48KOZS2YSyeElV1XUlPq1bbFcb5Ya9Y/BUejSnh+xs+/sux89iOtmudsrdfHi/rNUA6DVTaIhRAAAh+QQJAwABACwAAAAAJAAkAAACaIyPqcvtD6OctNqLs968ew98C0CGolGWZ5CSa2tasQJf6djKeVJXPfKbBFE7ypBV5DWOR6SLliTeeFGnijoFVpnbbvbA/UqvWrH1WSaDveoxem0Ot88zd50OjbPf9vzcucRXtkJYiFEAACH5BAkDAAEALAAAAAAkACQAAAJmjI+py+0Po5y02ouz3rz7D4biApQAY55XqiasxbZHDL+uTdF3WvO72QP+SkHiUCbRIZRL4VHBnPmaU2nVEA1ktzir02ukfrFd8lVbRp+56zR7rIa/w2BknG6Wu/dndQNuNSI4WFEAACH5BAkDAAEALAAAAAAkACQAAAJnjI+py+0Po5y02ouz3rx7CXwLQIaiUZZnkJJra4owE1uzkl43sk892rIFE79IsYhqHIdEFY55WOaaUx4UWI1eWVup05rFfrVhbtnroo7FafDa/EbX2HN4mxzv6s/7t1l5R7UySIhRAAAh+QQJAwABACwAAAAAJAAkAAACZ4yPqcvtD6OctNqLs94W8AaE3peIIomYIXqoI+uyRizTsCoHtvJWe3vq4EpDXi9VBJoWS2MT+VQGoVPpihidJbVZ3dbb/YGrXPL4SkVbj2e2+P2Fh+P0ud0sx9f1d7US5AeVM0iIUQAAIfkECQMAAQAsAAAAACQAJAAAAmeMj6nL7Q+jnLTai7M+oIPNeB6oiB2ZmB/KmWwrvoYqB7R8vzm7V2vpssSAQ2AoiOjNRkRmEglzRk8p6LI4/WWb1Cf2KgV3t9WvzXo2K9dotroNf8vDabrbHsfPx2ItrEH3VzNIeFEAACH5BAkDAAEALAAAAAAkACQAAAJmjI+py+0Po5y0WgnuBDxr13VfE3IjU3pnkq5K6yJwbMy0HeMbWV7hooPogo9hr2L8AXlK2ZElej0PyaizSZ3WtIGqCYrdhrtcryo7NkvT5Tb7bUXHxXMy/Hutq8F6rp0JSCM4KFgAACH5BAkDAAEALAAAAAAkACQAAAJsjI+py+0Po5y02ggyuFhv3ngZGIokI35nkq5K6yJwbMyUt9iTyfK3f9B1cD3izxgESoRCCFM51LygAWTSWqVCn1iutPiVbcddcvh6rplHYLa4DE9n4250XU1X2fV4ufc+56cFeFXCR4OYuFIAACH5BAkDAAEALAAAAAAkACQAAAJtjI+py+0Po5y0WgnuBDxr13VfE3IjU3pnkmqq0lrhElP1cWMlvFd58IP8go9hz3bEJXUz1jJibMJIz6AUERU5r4asaavFVsdcIDmsLHtf3fNXrHazzfE6um1/p+90/pqXN2elt0U1t4KYqJhQAAAh+QQJAwABACwAAAAAJAAkAAACcIyPqcvtD6OctNqLsz6gg814XvYtYneJ5mmdJeK2bBJXNTxTN5dPu/GLBIOQYU9iVNmOAWLzRWMSlVEqzwqUarFPbnJUBeO8W/HVnCWr0V32FxWGj91l+dmepq/xbf4bmudXB9hH2NXAdgWyyNj4UAAAIfkECQMAAQAsAAAAACQAJAAAAnCMj6nL7Q+jnLTai7PeCHjggNf3LeRIil1qperhtmwSV/V62jNe6jnvkf1gu8mNOKQxjgZms0crPpMBp1VaxV6pWyjSOwVnudoy+SzuBqPoNfAVdn/lcfg4bca37Wp+nn4H2KcwSAiI1CDGscjYmFAAACH5BAkDAAEALAAAAAAkACQAAAJyjI+py+0Po5y02nsBlqDr3XgeyIgduZifslpqOromO1dvclP5sXM10uOFfjxi8UQTJWNAYyAIdUaVOKmV2sQemVtklmuYgp/XsdjbbYXL6LXWbWaryW96vH6e55dte39fhSfHpzcYOEY3NHeE0uj4+FAAACH5BAkDAAEALAAAAAAkACQAAAJyjI+py+0Po5y02muBBhhu3TUfGC4jVypnqo5ssr5HDG/MZ7qtvZMIPdP9hEFczThEFnlJ5tL3RDWhBmCVeFVmnVtqwPrFhrVjbtkLTovVZLbZjV7L2/N3PU7P2/X4vb8PKBXVE0go2HWYJeJVJOP4+FgAACH5BAkDAAEALAAAAAAkACQAAAJyjI+py+0Po5y02nsBlqDr3XgeyIgduZiftSpqNromOydvdSP5tBv90bLVdEPiSSZCxoxLYNH3DPymUWpSeGUetUFp9Zt1hqFjb9naJKfNa/RW3AbHz/K32s7Gu7t7pb7OB+gXSFc4t2YWgieG0uj4+FAAACH5BAkDAAEALAAAAAAkACQAAAJxjI+py+0Po5y02ouz3gh4oIHL913kSIpUqh6s9SbxmirzdBt5tO9QX6sAT4xWJ3gkyko2pMupgwaGzGT1qcReo1nudiqleppdcFlsNH/R5HX4fYa74/S5fbys4617bd/7pxbIlneXZtbwhcXB2Oj4UAAAIfkECQMAAQAsAAAAACQAJAAAAm+Mj6nL7Q+jnLTai7OeoIPNeF7zXWK3iOapnCXltmwVJzU8IzeXH7v0CwQhweGj2AMmhUsDKrUcqmRTXfRa9WFHtu3TmnV6X9ow04xEj6lccLv8Fqvn8XM9fV936V94X57HRwb4J0dSWAaiuMj4UAAAIfkEBQMAAQAsAAAAACQAJAAAAnGMj6nL7Q+jnLTauwCWoOvdeB7IiB2ZmahifuzWpqcVJzV1Hzmn2j3+0wV5ItYwsgskIcnlo3k0uIxFX9U6FV61I+wMAd1Kj+EumIwWK9Nm7tedXavL7/GcXZe37Xt9nh4HSNUn6BUnF5KntcLY6LhQAAA7";const qs=e=>(Qe("data-v-766b7086"),e=e(),Ge(),e),Ah=qs(()=>c("div",{class:"a-cycle a-cycle-1"},null,-1)),$h=qs(()=>c("div",{class:"a-cycle a-cycle-2"},null,-1)),Eh=qs(()=>c("div",{class:"a-cycle a-cycle-3"},null,-1)),Fh={key:0,class:"live-tab p_center_x text_white bg_brand_pink bd_radius_md fs_6 flex_center text_nowrap"},Sh=qs(()=>c("img",{class:"live-gif w_md mr_xs",src:ci,alt:"live"},null,-1)),Bh=ae({__name:"UserAvatar",props:{isShowLive:Boolean,isSmall:Boolean,isShowLiveAni:Boolean,info:{type:Object,default:()=>({})},bfsStyle:{type:String,default:""}},setup(e){const t=e,s=M(()=>t.isShowLive&&t.info.is_live),a=M(()=>{var o,i;if(!s.value){if(((o=t.info.official_verify)==null?void 0:o.type)===1)return"business";if(((i=t.info.official_verify)==null?void 0:i.type)===0)return"personal"}}),n=A(null);return ze(()=>{var i;new Gi({}).append({avatar:t.info.upic,avatarWidth:86,renderWidth:86,isNFT:!!t.info.face_nft,NFTIconType:((i=t.info)==null?void 0:i.face_nft_type)||0,isCenterScale:!0,iconType:a.value,bfsStyle:t.bfsStyle},n.value,"avatar")}),(o,i)=>(l(),d("div",{class:K(["search-user-avatar p_relative",{"avatar-small":e.isSmall}])},[c("div",{class:K(["avatar-wrap p_relative",{"live-ani":s.value&&e.isShowLiveAni}])},[c("div",{ref_key:"avatarRef",ref:n,class:"avatar-inner"},null,512),s.value&&e.isShowLiveAni?(l(),d(X,{key:0},[Ah,$h,Eh],64)):F("",!0)],2),s.value&&e.info.is_live?(l(),d("div",Fh,[Sh,ne(" \u76F4\u64AD\u4E2D ")])):F("",!0)],2))}});var Qs=ue(Bh,[["__scopeId","data-v-766b7086"]]);const Sn=e=>(Qe("data-v-3f72b29e"),e=e(),Ge(),e),Ih={key:0,class:"bili-100-bg p_cover"},Dh=Sn(()=>c("div",{class:"bg-gradient w_100 h_100"},null,-1)),Th=[Dh],xh={class:"video-card-content i_wrapper"},Lh={class:"user-info flex_start p_relative"},Ph={class:"info-card flex_start"},Rh=["href"],Vh={class:"user-content p_relative"},Mh={key:0,class:"bili-100-img u_drag_none",src:"//i0.hdslb.com/bfs/static/laputa-search/assets/bili_100.142ea65c.png",alt:"\u767E\u5927UP\u4E3B"},Nh={class:"b_text i_card_title mt_0"},Oh=["href"],Uh=["href"],Hh={class:"choose-button-list"},Wh=["href"],jh={class:"b_text text2 text_ellipsis brand-ad-desc"},zh={class:"brand-ad-desc-text"},qh={key:0,class:"user-tip-row"},Qh={class:"tip-content-wrap pr_md p_relative"},Gh=["src"],Jh=["textContent"],Yh=Sn(()=>c("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.27145 1.27145 C4.07618 1.46671 4.07618 1.78329 4.27145 1.97855 L8.29289 6 L4.27145 10.0214C4.07618 10.2167 4.07618 10.5333 4.27145 10.7286 C4.46671 10.9238 4.78329 10.9238 4.97855 10.7286L9.17678 6.53033 C9.46967 6.23744 9.46967 5.76256 9.17678 5.46967L4.97855 1.27145 C4.78329 1.07618 4.46671 1.07618 4.27145 1.27145Z"},null,-1)),Kh=[Yh],Zh={key:1,class:"user-video-info mt_md p_relative"},Xh={class:"video-list row"},ep={key:2,class:"brand-ad-activity-cards p_relative"},tp={class:"activity-cards-list row"},sp=["href"],np={class:"activity-card-content"},ap={class:"activity-card-content-top"},ip=["href"],op=["href"],rp={class:"activity-card-content-bottom"},lp=["href"],cp={key:3,class:"brand-ad-activity-cards p_relative"},up={class:"activity-cards-list row"},dp=["href"],_p={class:"activity-card-video"},vp=["poster","src"],hp={class:"activity-card-content"},pp={class:"activity-card-content-top"},fp=["href"],mp=["href"],gp={class:"activity-card-content-bottom"},yp=["href"],wp={class:"i_wrapper p_relative"},bp=Sn(()=>c("div",{class:"card-bottom"},null,-1)),kp=["href"],Cp=ae({__name:"BrandAdverCard",props:{info:{},show3col:{type:Boolean}},emits:["follow","unfollow"],setup(e,{emit:t}){const s=t,a=e,n=g=>Ms(g!=null?g:""),o=M(()=>{var g,C,k;return(k=(C=(g=a.info)==null?void 0:g.card)==null?void 0:C.adver)!=null?k:{}}),i=M(()=>{var g,C;return(C=(g=a.info)==null?void 0:g.bili_user)!=null?C:{}}),r=M(()=>{var g,C;return((C=(g=a.info)==null?void 0:g.card)==null?void 0:C.covers)||[]}),u=M(()=>{var g,C;return((C=(g=a.info)==null?void 0:g.card)==null?void 0:C.videos)||[]}),v=M(()=>{var g;return(((g=i.value)==null?void 0:g.res)||[]).map(C=>zs(C)).slice(0,8)}),f=M(()=>i.value.mid?i.value.is_live?`//live.bilibili.com/${i.value.room_id}?live_from=84002`:`//space.bilibili.com/${i.value.mid}`:o.value.adver_page_url?n(o.value.adver_page_url):"javascript:void(0)"),h=M(()=>i.value.mid?`//space.bilibili.com/${i.value.mid}`:o.value.adver_page_url?n(o.value.adver_page_url):"javascript:void(0)"),_=M(()=>{var g,C;return n(`${(C=(g=i.value.expand)==null?void 0:g.system_notice)==null?void 0:C.icon}@28h`)}),p=()=>{var g,C;(C=(g=i.value.expand)==null?void 0:g.system_notice)!=null&&C.url&&window.open(i.value.expand.system_notice.url,"_blank")},b=A(null);ze(()=>{var C;const g=(C=b.value)==null?void 0:C.querySelectorAll(".activity-card-video-wrap");if(!!g)for(let k=0;k<g.length;k++){const L=g[k],Y=L.querySelector(".activity-card-cover"),I=L.querySelector(".activity-card-video video");if(!I)continue;L==null||L.addEventListener("mouseenter",()=>{I.play()}),L==null||L.addEventListener("mouseleave",()=>{I.pause(),I.currentTime&&(I.currentTime=0)});const U=()=>{Y.classList.add("cover-fade"),I.removeEventListener("canplay",U)};I.addEventListener("canplay",U)}});const S=j(Ve),y=M(()=>{var g,C,k,L,Y,I,U,Q,te,G,ve,$e,H,Z,P,W,J,oe,pe,Be,Ie,He,we,re,_e,Ce,Ne,Oe,he,ie,V;return T({up_mid:(k=(C=(g=a.info)==null?void 0:g.bili_user)==null?void 0:C.mid)!=null?k:"",ad_name:(U=(I=(Y=(L=a.info)==null?void 0:L.card)==null?void 0:Y.adver)==null?void 0:I.adver_name)!=null?U:"",card_type:(G=(te=(Q=a.info)==null?void 0:Q.card)==null?void 0:te.card_type)!=null?G:"",creative_id:(H=($e=(ve=a.info)==null?void 0:ve.origin_data)==null?void 0:$e.ad_content.creative_id)!=null?H:"",content_type:((P=(Z=a.info)==null?void 0:Z.card)==null?void 0:P.card_type)===Wt.BLUE_V_ARCHVIE?1:0,content_id:((J=(W=a.info)==null?void 0:W.card)==null?void 0:J.card_type)===Wt.BLUE_V_ARCHVIE?(He=(Ie=(Be=(pe=(oe=a.info.bili_user)==null?void 0:oe.res)==null?void 0:pe.map)==null?void 0:Be.call(pe,se=>se.aid))==null?void 0:Ie.join(","))!=null?He:"":r.value.length?(_e=(re=(we=r.value).map)==null?void 0:re.call(we,se=>{var me,Re;return(Re=(me=se.button_list)==null?void 0:me[0])==null?void 0:Re.jump_url}))==null?void 0:_e.join(","):(Oe=(Ne=(Ce=u.value).map)==null?void 0:Ne.call(Ce,se=>{var me,Re;return(Re=(me=se.button_list)==null?void 0:me[0])==null?void 0:Re.jump_url}))==null?void 0:Oe.join(","),is_live:(V=(ie=(he=a.info)==null?void 0:he.bili_user)==null?void 0:ie.is_live)!=null?V:!1},S.value)}),m=(g,C)=>{var k,L,Y,I,U;return ke(T(T({url:C!=null?C:"",src_id:(L=(k=a.info)==null?void 0:k.origin_data)==null?void 0:L.source_id},((Y=a.info)==null?void 0:Y.origin_data)||{}),((U=(I=a.info)==null?void 0:I.origin_data)==null?void 0:U.ad_content)||{}),{event_from:g!=null?g:""})};let w="";ze(()=>{var g,C,k,L;w=(L=(g=window.BiliCm)==null?void 0:g.Base)==null?void 0:L.getSyncUrl(m(),(k=(C=a.info)==null?void 0:C.origin_data)==null?void 0:k.resource_id)});const B=g=>{let C=new window.Image(1,1);C.onload=function(){C=null},C.onerror=function(){C=null},C.src=g},$=()=>{var g,C,k,L;w||(w=(L=(g=window.BiliCm)==null?void 0:g.Base)==null?void 0:L.getSyncUrl(m(),(k=(C=a.info)==null?void 0:C.origin_data)==null?void 0:k.resource_id)),B(w)};return(g,C)=>{var U,Q,te,G,ve,$e,H,Z,P,W,J,oe,pe,Be,Ie,He,we,re,_e,Ce,Ne,Oe,he,ie;const k=O("v-button"),L=O("bili-video-card"),Y=O("WidgetArrow"),I=Ee("report");return l(),d(X,null,[x(c("div",{ref_key:"brandAdverCard",ref:b,class:"brand-adver-card p_relative"},[(U=i.value.expand)!=null&&U.is_power_up?(l(),d("div",Ih,Th)):F("",!0),c("div",xh,[c("div",Lh,[c("div",Ph,[x(c("a",{class:"user-avatar-wrap",href:f.value,target:"_blank",onClick:$},[E(Qs,{class:"mr_md cs_pointer",info:i.value.mid?i.value:{upic:o.value.adver_logo},"is-small":!0,"is-show-live":!0,"is-show-live-ani":!0},null,8,["info"])],8,Rh),[[I,{spm:"search-card.all",msg:ke(T({spmid:"search.search-result.ad_card.1"},y.value),{room_id:i.value.room_id,up_id:i.value.mid,live_status:i.value.is_live?"live":"preparing"})},"click"]]),c("div",Vh,[(Q=i.value.expand)!=null&&Q.is_power_up?(l(),d("img",Mh)):F("",!0),c("h2",Nh,[x(c("a",{class:"user-name cs_pointer v_align_middle",href:h.value,target:"_blank",onClick:$},D(i.value.mid?i.value.uname:o.value.adver_name),9,Oh),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.1"},y.value)},"click"]]),i.value.mid?x((l(),d("div",{key:0,class:"user-actions d_inline_block",onClick:$},[i.value.relation?(te=i.value.relation)!=null&&te.followed?(l(),N(k,{key:2,type:"grey",onClick:C[1]||(C[1]=V=>s("unfollow"))},{default:z(()=>[ne("\u5DF2\u5173\u6CE8")]),_:1})):(l(),N(k,{key:1,type:"blue",onClick:C[0]||(C[0]=V=>s("follow"))},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1})):(l(),N(k,{key:0,disabled:"",type:"blue"},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1}))],512)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.2",action:(G=i.value.relation)!=null&&G.followed?2:1},y.value)},"click"]]):x((l(),d("a",{key:1,class:"adver-actions",href:n(($e=(ve=g.info.card)==null?void 0:ve.button)==null?void 0:$e.jump_url),target:"_blank",onClick:$},D((Z=(H=g.info.card)==null?void 0:H.button)==null?void 0:Z.text),9,Uh)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.3"},y.value)},"click"]]),c("div",Hh,[(l(!0),d(X,null,de((P=g.info.card)==null?void 0:P.choose_button_list,(V,se)=>x((l(),d("a",{key:V.text,class:"choose-button",href:n(V.jump_url),target:"_blank",onClick:$},D(V.text),9,Wh)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.4",adjust_name:V.text,adjust_pos:se+1},y.value)},"click"]])),128))])]),c("p",jh,[E(R(Xo),{class:"brand-ad-icon"}),c("span",zh,D(((J=(W=i.value)==null?void 0:W.official_verify)==null?void 0:J.desc)||o.value.adver_desc),1)])])])]),(oe=i.value.expand)!=null&&oe.system_notice?(l(),d("div",qh,[c("div",{class:"tip-content mt_xs",style:je({background:i.value.expand.system_notice.bg_color||"transparent",color:i.value.expand.system_notice.text_color||"#18191c",cursor:i.value.expand.system_notice.url?"pointer":"default"}),onClick:p},[c("div",Qh,[i.value.expand.system_notice.icon?(l(),d("img",{key:0,class:"tip-icon",src:_.value},null,8,Gh)):F("",!0),c("span",{class:"tip-text",textContent:D(i.value.expand.system_notice.content)},null,8,Jh),(pe=i.value.expand)!=null&&pe.system_notice.url?(l(),d("svg",{key:1,width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",class:"p_center_y r_0",style:je({fill:i.value.expand.system_notice.text_color})},Kh,4)):F("",!0)])],4)])):F("",!0),((Be=g.info.card)==null?void 0:Be.card_type)===R(Wt).BLUE_V_ARCHVIE?(l(),d("div",Zh,[c("div",Xh,[(l(!0),d(X,null,de(v.value,(V,se)=>x((l(),d("div",{key:V.bvid,class:K([{to_hide_xs:se>4,to_hide_md:se>5,to_hide_xl:se>6},"video-list-item col_1_5 col_xs_2 col_md_1_7 col_xl_1_8"]),onClick:$},[E(L,{"disable-frame":"","disable-scale":"",index:se,info:V},null,8,["index","info"])],2)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.0",location:se+1},y.value)},"show"],[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]])),128))])])):F("",!0),((Ie=g.info.card)==null?void 0:Ie.card_type)===R(Wt).ACTIVITY_IMAGE?(l(),d("div",ep,[c("div",tp,[(l(!0),d(X,null,de(r.value,(V,se)=>{var me,Re,Xe,ge,Te,et,_t,vt,ht,Et;return x((l(),d("div",{key:se,class:K(["activity-card col_6",{col_md_4:g.show3col}])},[x(c("a",{class:"activity-card-cover-wrap",href:n((Re=(me=V.button_list)==null?void 0:me[0])==null?void 0:Re.jump_url),target:"_blank",onClick:$},[E(R(it),{class:"activity-card-cover",src:V.url,alt:V.title,width:278,height:156,loading:"lazy",rule:"1c","bfs-style":"web-search-common-cover"},null,8,["src","alt"])],8,sp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]]),c("div",np,[c("div",ap,[x(c("a",{class:"activity-card-title",href:n((ge=(Xe=V.button_list)==null?void 0:Xe[0])==null?void 0:ge.jump_url),target:"_blank",onClick:$},D(V.title),9,ip),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]]),x(c("a",{class:"activity-card-desc",href:n((et=(Te=V.button_list)==null?void 0:Te[0])==null?void 0:et.jump_url),target:"_blank",onClick:$},D(V.desc),9,op),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]])]),c("div",rp,[x(c("a",{class:"activity-card-btn",href:n((vt=(_t=V.button_list)==null?void 0:_t[0])==null?void 0:vt.jump_url),target:"_blank",onClick:$},D((Et=(ht=V.button_list)==null?void 0:ht[0])==null?void 0:Et.text),9,lp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]])])])],2)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.0",location:se+1},y.value)},"show"]])}),128))])])):F("",!0),((He=g.info.card)==null?void 0:He.card_type)===R(Wt).ACTIVITY_VIDEO?(l(),d("div",cp,[c("div",up,[(l(!0),d(X,null,de(u.value,(V,se)=>{var me,Re,Xe,ge,Te,et,_t,vt,ht,Et;return x((l(),d("div",{key:se,class:K(["activity-card col_6",{col_md_4:g.show3col}])},[x(c("a",{class:"activity-card-cover-wrap activity-card-video-wrap",href:n((Re=(me=V.button_list)==null?void 0:me[0])==null?void 0:Re.jump_url),target:"_blank",onClick:$},[E(R(it),{class:"activity-card-cover",src:V.cover,alt:V.title,width:278,height:156,loading:"lazy",rule:"1c","bfs-style":"web-search-common-cover"},null,8,["src","alt"]),c("div",_p,[c("video",{poster:V.cover,src:V.url,muted:"",loop:"",preload:"none",disablepictureinpicture:""},null,8,vp)])],8,dp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]]),c("div",hp,[c("div",pp,[x(c("a",{class:"activity-card-title",href:n((ge=(Xe=V.button_list)==null?void 0:Xe[0])==null?void 0:ge.jump_url),target:"_blank",onClick:$},D(V.title),9,fp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]]),x(c("a",{class:"activity-card-desc",href:n((et=(Te=V.button_list)==null?void 0:Te[0])==null?void 0:et.jump_url),target:"_blank",onClick:$},D(V.desc),9,mp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]])]),c("div",gp,[x(c("a",{class:"activity-card-btn",href:n((vt=(_t=V.button_list)==null?void 0:_t[0])==null?void 0:vt.jump_url),target:"_blank",onClick:$},D((Et=(ht=V.button_list)==null?void 0:ht[0])==null?void 0:Et.text),9,yp),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.5"},y.value)},"click"]])])])],2)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.0",location:se+1},y.value)},"show"]])}),128))])])):F("",!0)])],512),[[I,{data:m(),id:(re=(we=g.info)==null?void 0:we.origin_data)==null?void 0:re.resource_id},"show",{ad:!0}],[I,{data:m(),id:(Ce=(_e=g.info)==null?void 0:_e.origin_data)==null?void 0:Ce.resource_id},"show",{ad:!0,strict:!0}]]),c("div",wp,[bp,(Ne=i.value)!=null&&Ne.mid?x((l(),d("a",{key:0,class:"watch-more",href:`//space.bilibili.com/${(Oe=i.value)==null?void 0:Oe.mid}/${(ie=(he=i.value)==null?void 0:he.res)!=null&&ie.length?"video":""}`,target:"_blank",onClick:$},[E(k,{type:"link",class:"p_center"},{default:z(()=>{var V,se;return[ne(D((se=(V=i.value)==null?void 0:V.res)!=null&&se.length?"\u67E5\u770BTA\u7684\u6240\u6709\u7A3F\u4EF6":"\u524D\u5F80TA\u7684\u7A7A\u95F4")+" ",1),E(Y,{class:"i_icon_more"})]}),_:1})],8,kp)),[[I,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.6"},y.value)},"click"]]):F("",!0)])],64)}}});var Ap=ue(Cp,[["__scopeId","data-v-3f72b29e"]]);const $p={class:"brand-ad-list search-all-list"},Ep=ae({__name:"BrandAdList",props:{info:{type:Array,default:()=>[]},topTList:{type:Object,default:()=>({})}},setup(e){const t=e,s=j("bangumi"),a=j("pgc"),n=M(()=>s.value.length>=t.topTList.media_bangumi&&a.value.length>=t.topTList.media_ft&&s.value.length<=2&&a.value.length<=3?s.value.length+a.value.length>2:s.value.length?s.value.length>2:a.value.length?a.value.length>2:!1),o=A([...t.info]),i=A(t.info.filter(b=>{var S;return(S=b.bili_user)==null?void 0:S.mid})),r=jt(),u=()=>{const b=i.value.map(S=>{var y;return(y=S.bili_user)==null?void 0:y.mid});!b.length||Os(b).then(S=>{i.value=i.value.map(y=>{var m;return y.bili_user.relation=S[(m=y.bili_user)==null?void 0:m.mid],y})}).catch(()=>{i.value=i.value.map(S=>{var y;return S.bili_user.relation={followed:!1,mid:(y=S.bili_user)==null?void 0:y.mid},S})})},f=bt(b=>{const S=r.query.keyword;Us(b,S).then(()=>{const y=i.value.find(m=>{var w;return((w=m.bili_user)==null?void 0:w.mid)===b.mid});y!=null&&y.bili_user&&(y.bili_user.relation.attribute=2,y.bili_user.relation.followed=!0)})},500),_=bt(b=>{const S=r.query.keyword;Hs(b,S).then(()=>{const y=i.value.find(m=>{var w;return((w=m.bili_user)==null?void 0:w.mid)===b.mid});y!=null&&y.bili_user&&(y.bili_user.relation.attribute=void 0,y.bili_user.relation.followed=!1)})},500);u();const p=j(Ve);return(b,S)=>{const y=Ee("report");return l(),d("div",$p,[(l(!0),d(X,null,de(o.value,m=>{var w,B,$,g,C,k,L,Y,I,U,Q,te;return x((l(),d("div",{key:m.id},[E(Ap,{info:m,show3col:n.value,class:K({not_100:!((B=(w=m.bili_user)==null?void 0:w.expand)!=null&&B.is_power_up)}),onFollow:G=>{var ve;return R(f)((ve=m.bili_user)==null?void 0:ve.relation)},onUnfollow:G=>{var ve;return R(_)((ve=m.bili_user)==null?void 0:ve.relation)}},null,8,["info","show3col","class","onFollow","onUnfollow"])])),[[y,{spm:"search-card.all",msg:T({spmid:"search.search-result.ad_card.all",up_mid:(g=($=m.bili_user)==null?void 0:$.mid)!=null?g:"",ad_name:(L=(k=(C=m.card)==null?void 0:C.adver)==null?void 0:k.adver_name)!=null?L:"",is_adjust:!!((I=(Y=m.card)==null?void 0:Y.choose_button_list)!=null&&I.length),adjust_list:(Q=(U=m.card)==null?void 0:U.choose_button_list)!=null?Q:[],is_live:(te=m.bili_user)==null?void 0:te.is_live},R(p))},"show"]])}),128))])}}});var Fp=ue(Ep,[["__scopeId","data-v-5279fd58"]]);const Gs=e=>(Qe("data-v-341f5be8"),e=e(),Ge(),e),Sp={class:"esport-card-title"},Bp=["title"],Ip=["title"],Dp={class:"esport-card-row"},Tp={class:"esport-card-row-team"},xp=["title"],Lp={class:"esport-card-row-center"},Pp={key:0,class:"esport-card-row-center-vs"},Rp=Gs(()=>c("svg",{width:"16",height:"26",viewBox:"0 0 16 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:`M9.79866 22L15.6249 9.44138e-05H10.858
            L7.85658 14.0592H7.7683L4.76691 9.44138e-05H0L5.82623 22H9.79866Z`,fill:"var(--text1)"})],-1)),Vp=Gs(()=>c("svg",{width:"16",height:"26",viewBox:"0 0 16 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:`M7.22916 21.9999C8.20914 21.9999 9.11488 21.8303 9.94638 21.4912
            C10.7779 21.1521 11.4906 20.6858 12.0845 20.0924C12.6785 19.499 13.1462 18.8137 13.4877 18.0365
            C13.8292 17.2594 13.9999 16.4187 13.9999 15.5144C13.9999 14.2427 13.6807 13.07 13.0422 11.9961
            C12.4038 10.9222 11.2382 10.0745 9.545 9.453L6.8728 8.43542
            C6.0116 8.12456 5.47707 7.77839 5.269 7.397C5.06132 7.01538 4.957 6.62682 4.957 6.23
            C4.957 5.666 5.15041 5.1644 5.53646 4.72638C5.92252 4.28836 6.4719 4.06935 7.185 4.07
            C7.77854 4.06935 8.30565 4.25303 8.766 4.6204C9.22624 4.98778 9.47 5.539 9.5 6.27358
            H13.7772C13.7772 5.39754 13.6139 4.570 13.2872 3.79382C12.9606 3.017 12.5151 2.34553 11.95 1.78
            C11.3867 1.215 10.7111 0.777 9.924 0.4669C9.13715 0.1554 8.283 0 7.36 0
            C6.4422 0 5.581 0.148362 4.7792 0.445085C3.9774 0.7418 3.27953 1.17276 2.68561 1.73795
            C2.06198 2.30314 1.57199 2.9743 1.21563 3.75C0.859 4.529 0.681 5.369 0.681 6.27358
            C0.681 7.7148 1.08942 8.937 1.9 9.94C2.72273 10.9434 3.84377 11.6994 5.269 12.208L7.45
            12.971C8.313 13.2819 8.907 13.6493 9.23367 14.0732C9.56033 14.497 9.72366 15 9.72366 15.5992
            C9.72366 16.3339 9.46381 16.9062 8.94413 17.3159C8.42444 17.7257 7.838 17.9306 7.185 17.9306
            C6.32342 17.9306 5.72206 17.6762 5.38056 17.1676C5.03905 16.6589 4.828 16.1078 4.73466 15.5144H0.4583
            C0.488 16.5882 0.695945 17.5279 1.082 18.3333C1.468 19.1386 1.97289 19.8098 2.59652 20.3467
            C3.844 21.4488 5.388 22 7.22916 22Z`,fill:"var(--text1)"})],-1)),Mp=[Rp,Vp],Np=["title"],Op={class:"esport-card-row-center-score-left"},Up=Gs(()=>c("div",{class:"esport-card-row-center-score-center"},":",-1)),Hp={class:"esport-card-row-center-score-right"},Wp={class:"esport-card-row-team"},jp=["title"],zp={class:"esport-card-options"},qp={key:1,class:"esport-card-options-item text",type:"text"},Qp=["href"],Gp=Gs(()=>c("img",{class:"w_md mr_xs",src:ci,alt:"live"},null,-1)),Jp={key:1,class:"esport-card-options-item text",type:"text"},Yp=["href"],Kp=["href"],Zp={key:2,class:"esport-card-options-item text",type:"text"},Xp="search.search-result.e_sports_schedule_card.4",ef="search.search-result.e_sports_schedule_card.5",tf=ae({__name:"EsportCard",props:{item:{type:Object,required:!0},cardInnerReportMsg:{type:Object}},setup(e){var y;const t=e,s=M(()=>{var m;return cs((m=t.item.season)==null?void 0:m.title,30)}),a=M(()=>{var m;return cs((m=t.item)==null?void 0:m.gameStage,14)}),n=M(()=>{var m,w;return cs((w=(m=t.item)==null?void 0:m.awayTeam)==null?void 0:w.title,12)}),o=M(()=>{var m,w;return cs((w=(m=t.item)==null?void 0:m.homeTeam)==null?void 0:w.title,12)}),i=M(()=>{var m;return((m=t.item)==null?void 0:m.homeScore)||0}),r=M(()=>{var m;return((m=t.item)==null?void 0:m.awayScore)||0}),u=A(!1),v=A([1,3].includes(((y=t.item)==null?void 0:y.isSubscribed)||0)),f=M(()=>{var m;switch(t.item.contestStatus){case 2:return"\u8FDB\u884C\u4E2D";case 3:return"\u5DF2\u7ED3\u675F";case 1:default:{const w=new Date(((m=t.item)==null?void 0:m.stime)*1e3),B=new Date,$=`0${w.getMonth()+1}`.slice(-2),g=`0${w.getDate()}`.slice(-2),C=`0${w.getHours()}`.slice(-2),k=`0${w.getMinutes()}`.slice(-2);if(B.getFullYear()===w.getFullYear()&&B.getMonth()===w.getMonth()){if(B.getDate()===w.getDate())return`\u4ECA\u5929 ${C}:${k}`;if(B.getDate()+1===w.getDate())return`\u660E\u5929 ${C}:${k}`}return`${$}-${g} ${C}:${k}`}}}),h=M(()=>{const m=`https://www.bilibili.com/v/game/match/singledata/${t.item.ID}`;switch(t.item.contestStatus){case 2:return`//live.bilibili.com/${t.item.liveRoom}?live_from=84003`;case 3:return t.item.playback||t.item.collectionURL||m;case 1:default:return m}});function _(m){var w;((w=m==null?void 0:m.target)==null?void 0:w.tagName)!=="A"&&(S("card"),h.value&&window.open(h.value))}function p(m){return m>999?"...":m}function b(m){return q(this,null,function*(){if(m.stopPropagation(),!u.value){u.value=!0;try{const{code:w}=v.value?yield $c(t.item.ID):yield Ac(t.item.ID);w===0&&(v.value=!v.value)}catch(w){console.log(w)}finally{u.value=!1}S("subscribe")}})}const S=m=>{var w,B,$;wt({c:"search-card",d:"all",e:"click",type:"click"},{msg:JSON.stringify(T(ke(T({},t.cardInnerReportMsg),{spmid:m==="card"?Xp:ef,is_subscribe:v.value?1:0,button_type:m}),((w=t.item)==null?void 0:w.contestStatus)===2?{room_id:(B=t.item)==null?void 0:B.liveRoom,up_id:($=t.item)==null?void 0:$.mid,live_status:"live"}:{}))})};return(m,w)=>{var $,g,C,k,L;const B=O("VImg");return l(),d("div",{class:"esport-card",onClick:_},[c("div",Sp,[c("div",{class:"esport-card-title-main",title:($=t.item.season)==null?void 0:$.title},D(s.value),9,Bp),c("div",{class:"esport-card-title-sub",title:e.item.gameStage+" "+f.value},D(a.value+" "+f.value),9,Ip)]),c("div",Dp,[c("div",Tp,[E(B,{class:"esport-card-row-team-logo",src:"//i0.hdslb.com"+e.item.homeTeam.logo,width:100,height:100,rule:"1c","bfs-style":"web-search-esport-cover"},null,8,["src"]),c("div",{class:"esport-card-row-team-name",title:(C=(g=e.item)==null?void 0:g.homeTeam)==null?void 0:C.title},D(o.value),9,xp)]),c("div",Lp,[e.item.contestStatus===1?(l(),d("div",Pp,Mp)):F("",!0),e.item.contestStatus!==1?(l(),d("div",{key:1,title:i.value+":"+r.value,class:"esport-card-row-center-score"},[c("div",Op,D(p(i.value)),1),Up,c("div",Hp,D(p(r.value)),1)],8,Np)):F("",!0)]),c("div",Wp,[E(B,{class:"esport-card-row-team-logo",src:"//i0.hdslb.com"+e.item.awayTeam.logo,width:100,height:100,rule:"1c","bfs-style":"web-search-esport-cover"},null,8,["src"]),c("div",{class:"esport-card-row-team-name",title:(L=(k=e.item)==null?void 0:k.awayTeam)==null?void 0:L.title},D(n.value),9,jp)])]),c("div",zp,[e.item.contestStatus===1?(l(),d(X,{key:0},[e.item.liveRoom?(l(),d("div",{key:0,class:K(["esport-card-options-item btn",{"disabled-btn":v.value}]),onClick:b},D(v.value?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"),3)):F("",!0),e.item.liveRoom?F("",!0):(l(),d("div",qp,"\u656C\u8BF7\u671F\u5F85"))],64)):F("",!0),e.item.contestStatus===2?(l(),d(X,{key:1},[e.item.liveRoom?(l(),d("a",{key:0,href:`//live.bilibili.com/${e.item.liveRoom}?live_from=84003`,target:"_blank",class:"esport-card-options-item fill",onClick:w[0]||(w[0]=Y=>S("live"))},[Gp,ne("\u89C2\u770B\u76F4\u64AD ")],8,Qp)):F("",!0),e.item.liveRoom?F("",!0):(l(),d("div",Jp,"\u6BD4\u8D5B\u8FDB\u884C\u4E2D"))],64)):F("",!0),e.item.contestStatus===3?(l(),d(X,{key:2},[e.item.collectionURL?(l(),d("a",{key:0,href:e.item.collectionURL,target:"_blank",class:"esport-card-options-item btn",onClick:w[1]||(w[1]=Y=>S("collection"))}," \u96C6\u9526 ",8,Yp)):F("",!0),e.item.playback?(l(),d("a",{key:1,href:e.item.playback,target:"_blank",class:"esport-card-options-item btn",onClick:w[2]||(w[2]=Y=>S("playback"))}," \u56DE\u653E ",8,Kp)):F("",!0),e.item.playback||e.item.collectionURL?F("",!0):(l(),d("div",Zp," \u6BD4\u8D5B\u5DF2\u7ED3\u675F "))],64)):F("",!0)])])}}});var sf=ue(tf,[["__scopeId","data-v-341f5be8"]]);const nf=e=>(Qe("data-v-0185c777"),e=e(),Ge(),e),af={key:0,class:"esport-list i_wrapper search-all-list"},of={class:"esport-list-item-title"},rf={class:"esport-list-item-title-wrapper"},lf=nf(()=>c("div",{class:"esport-list-item-title-text"},"\u8D5B\u7A0B\u65E5\u5386",-1)),cf={key:0},uf=["href"],df=["href"],_f={class:"row"},vf=ae({__name:"EsportList",props:{info:{type:Array,default:()=>[]}},setup(e){const t=e,s=j(Ve),a=(i,r,u)=>{var v,f,h;return T({spmid:"search.search-result.e_sports_schedule_card."+i,id:u.ID,esport_id:(v=r==null?void 0:r.config_info)==null?void 0:v.esport_id,competition_name:n(r),competition_team:((f=u==null?void 0:u.homeTeam)==null?void 0:f.title)+","+((h=u==null?void 0:u.awayTeam)==null?void 0:h.title),score:(u.homeScore||"0")+":"+(u.awayScore||"0"),type:Math.max(u.contestStatus-1,0)},s.value)};function n(i){var r;return((r=i==null?void 0:i.contest)==null?void 0:r[0].season.title)||""}function o(i){var r,u,v,f;if((u=(r=i.contest)==null?void 0:r[0])!=null&&u.season){const h=new Date(i.contest[0].stime*1e3);return h.setHours(0,0,0,0),`${(f=(v=i.contest)==null?void 0:v[0])==null?void 0:f.season.URL}&time=${h.getTime()}`}}return(i,r)=>{var h;const u=O("WidgetArrow"),v=O("v-button"),f=Ee("report");return(h=t.info)!=null&&h.length?(l(),d("div",af,[(l(!0),d(X,null,de(t.info,(_,p)=>{var b,S,y,m,w;return x((l(),d("div",{key:p,class:"esport-list-item"},[c("div",of,[c("div",rf,[lf,(S=(b=_==null?void 0:_.config_info)==null?void 0:b.btn_list)!=null&&S.length?(l(),d("div",cf,[(l(!0),d(X,null,de(_.config_info.btn_list,(B,$)=>{var g;return x((l(),d("a",{key:$,class:"esport-list-item-title-link",href:B.link,target:"_blank"},D(B.text),9,uf)),[[f,{c:"search-card",d:"all",msg:{spmid:"search.search-result.e_sports_schedule_card.1",esport_id:(g=_==null?void 0:_.config_info)==null?void 0:g.esport_id,competition_name:n(_),activity_name:B.text,activity_url:B.link}},"both"]])}),128))])):F("",!0)]),o(_)?x((l(),d("a",{key:0,href:o(_),target:"_blank"},[E(v,{class:"btn i_button_more"},{default:z(()=>[ne(" \u5168\u90E8\u8D5B\u4E8B "),E(u,{class:"btn-icon"})]),_:1})],8,df)),[[f,{c:"search-card",d:"all",msg:{spmid:"search.search-result.e_sports_schedule_card.2",esport_id:(y=_==null?void 0:_.config_info)==null?void 0:y.esport_id,competition_name:n(_)}},"click"]]):F("",!0)]),c("div",_f,[(l(!0),d(X,null,de(((m=_.contest)==null?void 0:m.slice(0,5))||[],(B,$)=>{var g,C,k,L,Y,I,U,Q;return l(),d("div",{key:$,class:K(["col_4",{col_sm_3:((g=_.contest)==null?void 0:g.length)>=4,col_lg_1_5:((C=_.contest)==null?void 0:C.length)>=5,to_hide_sm:$>2,to_hide_lg:$>3,to_hide_xl:$>4}])},[x(E(sf,{item:B,"card-inner-report-msg":T({},a(4,_,B))},null,8,["item","card-inner-report-msg"]),[[f,{spm:"search-card.all",msg:T(T({},a(3,_,B)),((L=(k=_==null?void 0:_.contest)==null?void 0:k[0])==null?void 0:L.contestStatus)===2?{room_id:(I=(Y=_==null?void 0:_.contest)==null?void 0:Y[0])==null?void 0:I.liveRoom,up_id:(Q=(U=_==null?void 0:_.contest)==null?void 0:U[0])==null?void 0:Q.mid,live_status:"live"}:{})},"show"]])],2)}),128))])])),[[f,{c:"search-card",d:"all",msg:{spmid:"search.search-result.e_sports_schedule_card.0",competition_name:n(_),esport_id:(w=_==null?void 0:_.config_info)==null?void 0:w.esport_id}},"show"]])}),128))])):F("",!0)}}});var hf=ue(vf,[["__scopeId","data-v-0185c777"]]);const pf=e=>(Qe("data-v-72dc59bc"),e=e(),Ge(),e),ff={key:0,class:"media-footer"},mf=["href"],gf=["textContent"],yf={key:1,class:"seleced-ep"},wf={class:"search-exposed"},bf=["innerHTML"],kf=pf(()=>c("span",{class:"ep"},D("\u9009\u96C6"),-1)),Cf={class:"media-footer-select-content"},Af=["href"],$f=["title","innerHTML"],Ef=["textContent"],Ff=["href"],Sf=ae({__name:"MediaFooter",props:{info:{type:Array,default:()=>[]},showSelection:{type:Boolean,default:!1},ellipsisUrl:{type:String,default:""},seasonId:{type:Number,default:0},type:{type:String,default:""},cardIndex:{type:Number,default:0}},setup(e){const t=e;let s=[];const a=p=>{s.push(p)},n=A(!1),o=A(-1),i={id:-1,title:"...",url:t.ellipsisUrl,index_title:"",long_title:"\u67E5\u770B\u66F4\u591A"},r=j(Ve);Ji(()=>{s=[]});const u=A(t.info),v=M(()=>{var p;return((p=t.info)==null?void 0:p.length)>7?[...t.info.slice(0,6)]:t.info}),f=()=>q(this,null,function*(){var S;yield We();const p=s.length;let b=!0;for(let y=0;y<p;y++)if(((S=s[y])==null?void 0:S.offsetTop)>0){if(y<3){b=!1;break}const m=34,w=8,B=s[y-1].offsetParent.offsetWidth,$=s[y-2].offsetLeft,g=B-$,C=s[p-1].offsetWidth+w+m,k=C+w+s[0].offsetWidth;if(g===B||k>B){b=!1;break}o.value=g>C?y-1:y-2;break}b?u.value=o.value===-1?[...t.info]:[...t.info.slice(0,o.value-1),i,t.info[t.info.length-1]]:u.value=[]}),h=()=>{u.value=t.info,f()},_=()=>{n.value=!0;const b=document.getElementsByClassName("media-footer-select")[0].getBoundingClientRect().width,S=document.getElementsByClassName("media-footer-select-content");Array.from(S).forEach(y=>{y.style.width=`${b}px`})};return ze(()=>{f(),window.addEventListener("resize",h)}),$t(()=>{window.removeEventListener("resize",h)}),(p,b)=>{const S=O("VButton"),y=O("WidgetArrow"),m=O("VDropdown"),w=Ee("report");return e.showSelection?(l(),d("div",ff,[(l(!0),d(X,null,de(u.value,(B,$)=>{var g;return x((l(),d("a",{key:$,ref_for:!0,ref:a,href:B.url,target:"_blank",class:"p_relative"},[E(S,{class:"media-footer-btn"},{default:z(()=>[ne(D(B.title),1)]),_:2},1024),(g=B.badges)!=null&&g.length?(l(),d("span",{key:0,class:"media-footer-badge",style:je({backgroundColor:B.badges[0].bg_color,borderColor:B.badges[0].border_color,color:B.badges[0].text_color}),textContent:D(B.badges[0].text)},null,12,gf)):F("",!0)],8,mf)),[[w,{c:"search-card",d:"all",msg:ke(T({},R(r)),{location:e.cardIndex+1,type:t.type,spmid:"search.search-result.pgcCard."+(B.title==="..."?"ellipsis":"ep"),epid:B.id,seasonid:e.seasonId})},"click"]])}),128))])):(l(),d("div",yf,[E(m,{trigger:"hover",classname:"selected-ep__dropdown",onShow:_,onHide:b[0]||(b[0]=B=>n.value=!1)},{content:z(()=>{var B;return[x(c("div",Cf,[(l(!0),d(X,null,de(v.value,($,g)=>{var C;return x((l(),d("a",{key:g,target:"_blank",class:"media-footer-select-content-item",href:$.url},[c("div",{class:"media-footer-select-content-item-title text_ellipsis",title:R(Ht)($.title,!1),innerHTML:$.title},null,8,$f),(C=$.badges)!=null&&C.length?(l(),d("span",{key:0,class:"media-footer-select-content-item-badge",style:je({backgroundColor:$.badges[0].bg_color,borderColor:$.badges[0].border_color,color:$.badges[0].text_color}),textContent:D($.badges[0].text)},null,12,Ef)):F("",!0)],8,Af)),[[w,{c:"search-card",d:"all",msg:ke(T({},R(r)),{index:g,type:t.type,spmid:"search.search-result.pgcCard.ep",epid:$.id})},"click"]])}),128)),((B=t.info)==null?void 0:B.length)>7?x((l(),d("a",{key:0,class:"media-footer-select-content-more",href:t.ellipsisUrl,target:"_blank"},[ne(" \u67E5\u770B\u66F4\u591A "),E(y,{class:"media-footer-select-icon"})],8,Ff)),[[w,{c:"search-card",d:"all",msg:ke(T({},R(r)),{index:0,type:t.type,spmid:"search.search-result.pgcCard.ellipsis",epid:"..."})},"click"]]):F("",!0)],512),[[Ue,n.value]])]}),default:z(()=>[E(S,{class:"media-footer-select"},{default:z(()=>[c("div",wf,[c("span",{class:"title",innerHTML:v.value[0].title},null,8,bf),kf]),E(y,{class:K(["media-footer-select-icon rotate_90 ts_all_fast",{rotate_n90:n.value}])},null,8,["class"])]),_:1})]),_:1})]))}}});var Bf=ue(Sf,[["__scopeId","data-v-72dc59bc"]]);const ui=e=>(Qe("data-v-384b5d39"),e=e(),Ge(),e),If={key:0,class:"media-card-skeleton"},Df=mn('<div class="media-card-skeleton-image" data-v-384b5d39></div><div class="media-card-skeleton-content" data-v-384b5d39><div class="media-card-skeleton-content-head" data-v-384b5d39><div class="media-card-skeleton-content-title" data-v-384b5d39></div><div class="media-card-skeleton-content-text" data-v-384b5d39></div><div class="media-card-skeleton-content-staff" data-v-384b5d39></div><div class="media-card-skeleton-content-desc" data-v-384b5d39></div></div><div class="media-card-skeleton-content-footer" data-v-384b5d39></div></div>',2),Tf=[Df],xf={key:1,class:"media-card"},Lf=["href"],Pf=["textContent"],Rf={class:"media-card-image-follow"},Vf={class:"media-card-content"},Mf={class:"media-card-content-head"},Nf={class:"media-card-content-head-title"},Of=["title","href","innerHTML"],Uf={class:"media-card-content-head-text media-card-content-head-label"},Hf={key:0},Wf={key:0},jf={key:1},zf={key:0},qf={key:2},Qf={key:0,class:"media-card-content-head-text media-card-content-head-staff text_ellipsis"},Gf=ui(()=>c("div",null,"\u5236\u4F5C\u56E2\u961F:",-1)),Jf=["title","innerHTML"],Yf={key:1,class:"media-card-content-head-text media-card-content-head-cv text_ellipsis"},Kf=["title","innerHTML"],Zf=["title"],Xf=ui(()=>c("div",null,"\u7B80\u4ECB:",-1)),em={class:"media-card-content-footer"},tm={class:"media-card-content-footer-btns"},sm=["href"],nm=ae({__name:"MediaCard",props:{info:{type:Object,default:()=>({})},index:{type:Number,default:0},skeleton:{type:Boolean,default:!1}},setup(e){const t=e,s=A(Boolean(t.info.is_follow)),a=M(()=>{var _,p,b;return(p=(_=t.info)==null?void 0:_.media_score)!=null&&p.user_count?at((b=t.info.media_score)==null?void 0:b.user_count)+"\u4EBA\u8BC4\u5206":""}),n=M(()=>t.info.season_id===26484||t.info.season_id===26481?"\u97F3\u4E50":t.info.season_type_name),o=M(()=>{if(t.info.fix_pubtime_str||t.info.pubtime){const _=t.info.fix_pubtime_str?t.info.fix_pubtime_str:t.info.pubtime;return Yi("YYYY-MM-DD",+_*1e3)}return null}),i=j(Ve),r=M(()=>{var p;const _=(p=t.info.styles)==null?void 0:p.split("/");return _.length>5?_.splice(0,5).join("/"):t.info.styles}),u=M(()=>T({spmid:"search.search-result.pgcCard.",seasonid:t.info.season_id,type:t.info.type,location:t.index+1},i.value)),v=_=>{wt({c:"search-card",d:"all",e:"click",type:"click"},{msg:JSON.stringify(ke(T({},u.value),{spmid:u.value.spmid+_}))})},f=_=>q(this,null,function*(){_.stopPropagation(),_.preventDefault();const{code:p,result:b}=yield kc(t.info.season_id);p===0&&b.status===2&&(s.value=!0),v("follow")}),h=_=>q(this,null,function*(){_.stopPropagation(),_.preventDefault();const{code:p,result:b}=yield Cc(t.info.season_id);p===0&&b.status===0&&(s.value=!1),v("follow")});return(_,p)=>{var y,m,w,B;const b=O("VButton"),S=Ee("report");return t.skeleton?(l(),d("div",If,Tf)):x((l(),d("div",xf,[c("a",{class:"media-card-image",href:e.info.url,target:"_blank",onClick:p[0]||(p[0]=$=>v("other"))},[E(R(it),{src:t.info.cover,alt:t.info.title,width:181,height:241,rule:"1c","bfs-style":"web-search-media-cover"},null,8,["src","alt"]),(y=e.info.badges)!=null&&y.length?(l(),d("div",{key:0,style:je({backgroundColor:e.info.badges[0].bg_color,borderColor:e.info.badges[0].border_color,color:e.info.badges[0].text_color}),class:"media-card-image-tag",textContent:D(e.info.badges[0].text)},null,12,Pf)):F("",!0),c("div",Rf,[s.value?(l(),N(R(Cr),{key:0,onClick:h})):(l(),N(R(wr),{key:1,onClick:f}))]),E(R(Er),{class:"media-card-image-play"})],8,Lf),c("div",Vf,[c("div",Mf,[c("div",Nf,[E(Gt,{value:n.value,type:"primary",class:"media-card-content-head-title-tag"},null,8,["value"]),c("a",{title:R(Ht)(e.info.title,!1),class:"text_ellipsis",href:e.info.url,target:"_blank",onClick:p[1]||(p[1]=$=>v("other")),innerHTML:e.info.title},null,8,Of)]),c("div",Uf,[e.info.styles?(l(),d("span",Hf,[ne(D(r.value)+" ",1),o.value?(l(),d("span",Wf," \xB7 ")):F("",!0)])):F("",!0),o.value?(l(),d("span",jf,[ne(D(o.value)+" ",1),e.info.index_show?(l(),d("span",zf," \xB7 ")):F("",!0)])):F("",!0),e.info.index_show?(l(),d("span",qf,D(e.info.index_show),1)):F("",!0)]),e.info.staff&&e.info.media_type===3?(l(),d("div",Qf,[Gf,c("span",{title:R(Ht)(e.info.staff,!1),innerHTML:R(Ht)(e.info.staff,(m=e.info.hit_columns)==null?void 0:m.includes("staff"))},null,8,Jf)])):e.info.cv?(l(),d("div",Yf,[c("div",null,D(t.info.type==="media_ft"?"\u51FA\u6F14":"\u58F0\u4F18")+":",1),c("span",{title:R(Ht)(e.info.cv,!1),innerHTML:R(Ht)(e.info.cv,(w=e.info.hit_columns)==null?void 0:w.includes("cv"))},null,8,Kf)])):F("",!0),e.info.desc?(l(),d("div",{key:2,title:e.info.desc,class:"media-card-content-head-text media-card-content-head-desc text_ellipsis_3l"},[Xf,c("span",null,D(e.info.desc),1)],8,Zf)):F("",!0)]),c("div",em,[a.value?(l(),N(li,{key:0,class:"media-card-content-footer-score",text:a.value,score:(B=e.info.media_score)==null?void 0:B.score},null,8,["text","score"])):F("",!0),c("div",tm,[x(c("a",{href:e.info.url,target:"_blank"},[E(b,{type:"blue",class:"media-card-btn pgc_btn_size"},{default:z(()=>[ne(" \u7ACB\u5373\u89C2\u770B")]),_:1})],8,sm),[[S,{c:"search-card",d:"all",msg:ke(T({},u.value),{spmid:u.value.spmid+"view"})},"click"]]),e.info.ep_size&&e.info.is_selection?(l(),N(Bf,{key:0,"show-selection":e.info.selection_style==="grid","ellipsis-url":e.info.url,info:e.info.eps,"season-id":e.info.season_id,type:e.info.type,"card-index":e.index},null,8,["show-selection","ellipsis-url","info","season-id","type","card-index"])):F("",!0)])])])],512)),[[S,{c:"search-card",d:"all",msg:ke(T({},u.value),{spmid:u.value.spmid+"all"})},"show"]])}}});var Bn=ue(nm,[["__scopeId","data-v-384b5d39"]]);const am={class:"row media-item"},ua=2,ws=3,an=5,im=ae({__name:"MediaItem",props:{info:{type:Array,default:()=>[]},totalList:{type:Number,default:0},mixin:{type:Boolean,default:!1}},setup(e){const t=e,s=j(Ve),a=j(si),n=M(()=>{var i;return`\u67E5\u770B\u5168\u90E8 ${t.mixin?ws:t.totalList} \u90E8\u76F8\u5173${((i=t.info[t.info.length-1])==null?void 0:i.type)===Ze.media_bangumi?"\u756A\u5267":"\u5F71\u89C6"}\u4F5C\u54C1`}),o=()=>{var r;const i=((r=t.info[t.info.length-1])==null?void 0:r.type)===Ze.media_bangumi?"bangumi":"pgc";a(i)};return(i,r)=>{var h;const u=O("WidgetArrow"),v=O("v-button"),f=Ee("report");return l(),d(X,null,[c("div",am,[(l(!0),d(X,null,de(t.info,(_,p)=>(l(),d("div",{key:p,class:K(["col_6 media-item-col",{to_hide_md:t.mixin?p>an-2:p>ua-1,to_show_md:!t.mixin&&p>ws-1,col_md_4:t.info.length>ws-1}])},[E(Bn,{info:_,index:p},null,8,["info","index"]),c("div",{class:K({line:!0,"hide-more":!0,showMediaMoreMin:t.mixin&&t.info.length>=an&&p<=1})},null,2)],2))),128))]),x(c("div",{class:"show-more-text",onClick:o},[t.totalList?(l(),N(v,{key:0,type:"link",class:K(["p_center",{"hide-more":t.mixin?!0:e.totalList<=t.info.length,showMediaMoreMin:t.mixin?t.info.length>=an:t.info.length>ua,showMediaMoreMax:!t.mixin&&t.info.length>ws}])},{default:z(()=>[ne(D(n.value)+" ",1),E(u,{class:"i_icon_more"})]),_:1},8,["class"])):F("",!0)],512),[[f,{c:"search-card",d:"all",msg:T({spmid:"search.search-result.pgcCard.showmore",type:(h=t.info[t.info.length-1])==null?void 0:h.type},R(s))},"click"]])],64)}}});var on=ue(im,[["__scopeId","data-v-7694e020"]]);const om={key:0,class:"bangumi-pgc-list i_wrapper search-all-list"},rm=ae({__name:"MediaList",props:{info:{type:Object,default:()=>({})},topTList:{type:Object,default:()=>({})}},setup(e){const t=e,s=M(()=>t.info.bangumi.length>=t.topTList.media_bangumi&&t.info.pgc.length>=t.topTList.media_ft&&t.info.bangumi.length<=2&&t.info.pgc.length<=3?[...t.info.bangumi,...t.info.pgc]:[]),a=M(()=>s.value.length||t.info.bangumi.length||t.info.pgc.length);return(n,o)=>{var i,r;return a.value?(l(),d("div",om,[s.value.length?(l(),N(on,{key:0,mixin:"",info:s.value,"total-list":s.value.length},null,8,["info","total-list"])):(l(),d(X,{key:1},[t.info.bangumi.length?(l(),N(on,{key:0,info:t.info.bangumi,"total-list":(i=e.topTList)==null?void 0:i.media_bangumi},null,8,["info","total-list"])):F("",!0),t.info.pgc.length?(l(),N(on,{key:1,info:t.info.pgc,"total-list":(r=e.topTList)==null?void 0:r.media_ft},null,8,["info","total-list"])):F("",!0)],64))])):F("",!0)}}});const di=e=>(Qe("data-v-d8fa03f6"),e=e(),Ge(),e),lm={key:0,class:"tips-list i_wrapper search-all-list"},cm=["href"],um={class:"tips-list-item-title"},dm=di(()=>c("span",{class:"tips-list-item-split"},"|",-1)),_m={class:"tips-list-item-sub"},vm={class:"tips-list-item-title"},hm=di(()=>c("span",{class:"tips-list-item-split"},"|",-1)),pm={class:"tips-list-item-sub"},fm=ae({__name:"TipsList",props:{info:{type:Array,default:()=>[]}},setup(e){const t=e,s=n=>Ms(n),a=j(Ve);return(n,o)=>{var r;const i=Ee("report");return(r=t.info)!=null&&r.length?(l(),d("div",lm,[(l(!0),d(X,null,de(t.info,(u,v)=>x((l(),d("div",{key:v,class:"tips-list-item"},[u.jump_url?x((l(),d("a",{key:0,href:s(u.jump_url),target:"_blank"},[c("span",um,D(u.title),1),dm,c("span",_m,D(u.sub_title),1)],8,cm)),[[i,{c:"search-card",d:"all",msg:T({spmid:"search.search-result.tip.click",id:u.id,url:u.jump_url},R(a))},"click"]]):(l(),d(X,{key:1},[c("span",vm,D(u.title),1),hm,c("span",pm,D(u.sub_title),1)],64))])),[[i,{c:"search-card",d:"all",msg:T({spmid:"search.search-result.tip.show",id:u.id,url:u.jump_url},R(a))},"show"]])),128))])):F("",!0)}}});var mm=ue(fm,[["__scopeId","data-v-d8fa03f6"]]);const gm=c("use",{"xlink:href":"#lv_0"},null,-1),ym=[gm];function wm(e,t){return l(),d("svg",null,[...ym])}const bm=c("use",{"xlink:href":"#lv_1"},null,-1),km=[bm];function Cm(e,t){return l(),d("svg",null,[...km])}const Am=c("use",{"xlink:href":"#lv_2"},null,-1),$m=[Am];function Em(e,t){return l(),d("svg",null,[...$m])}const Fm=c("use",{"xlink:href":"#lv_3"},null,-1),Sm=[Fm];function Bm(e,t){return l(),d("svg",null,[...Sm])}const Im=c("use",{"xlink:href":"#lv_4"},null,-1),Dm=[Im];function Tm(e,t){return l(),d("svg",null,[...Dm])}const xm=c("use",{"xlink:href":"#lv_5"},null,-1),Lm=[xm];function Pm(e,t){return l(),d("svg",null,[...Lm])}const Rm=c("use",{"xlink:href":"#lv_6"},null,-1),Vm=[Rm];function Mm(e,t){return l(),d("svg",null,[...Vm])}const Nm=c("use",{"xlink:href":"#lv_6_plus"},null,-1),Om=[Nm];function rn(e,t){return l(),d("svg",null,[...Om])}const Um=ae({__name:"UserLevel",props:{level:{}},setup(e){const t={0:wm,1:Cm,2:Em,3:Bm,4:Tm,5:Pm,6:Mm,7:rn,8:rn,9:rn};return(s,a)=>(l(),N(Aa(t[+s.level||0]),{class:K({"level-icon":!0,"icon-plus":+s.level>6})},null,8,["class"]))}});var _i=ue(Um,[["__scopeId","data-v-fec65f0c"]]);const vi=e=>(Qe("data-v-1cd59021"),e=e(),Ge(),e),Hm={class:"b-user-video-card p_relative"},Wm={key:0,class:"bili-100-bg p_cover"},jm=vi(()=>c("div",{class:"bg-gradient w_100 h_100"},null,-1)),zm=[jm],qm={class:"video-card-content i_wrapper"},Qm={class:"user-info flex_start p_relative"},Gm={class:"info-card flex_start"},Jm=["href"],Ym={key:0,class:"bili-100-img u_drag_none",src:"//i0.hdslb.com/bfs/static/laputa-search/assets/bili_100.142ea65c.png",alt:"\u767E\u5927UP\u4E3B"},Km={class:"b_text i_card_title mt_0"},Zm=["href"],Xm={class:"user-actions d_inline_block"},e1={class:"b_text text2 text_ellipsis user-video-desc"},t1={class:"user-video-desc-text"},s1={key:0,class:"user-tip-row"},n1={class:"tip-content-wrap pr_md p_relative"},a1=["src"],i1=["textContent"],o1=vi(()=>c("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.27145 1.27145 C4.07618 1.46671 4.07618 1.78329 4.27145 1.97855 L8.29289 6 L4.27145 10.0214C4.07618 10.2167 4.07618 10.5333 4.27145 10.7286 C4.46671 10.9238 4.78329 10.9238 4.97855 10.7286L9.17678 6.53033 C9.46967 6.23744 9.46967 5.76256 9.17678 5.46967L4.97855 1.27145 C4.78329 1.07618 4.46671 1.07618 4.27145 1.27145Z"},null,-1)),r1=[o1],l1={key:1,class:"user-video-info mt_md p_relative"},c1={class:"video-list row"},u1=ae({__name:"UserVideosCard",props:{info:{}},emits:["follow","unfollow"],setup(e,{emit:t}){const s=t,a=e,n=M(()=>({fans:at(a.info.fans||0),videos:at(a.info.videos||0)})),o=A(null),i=M(()=>(a.info.res||[]).map(_=>zs(_)).slice(0,8)),r=M(()=>a.info.is_live?`//live.bilibili.com/${a.info.room_id}?live_from=84002`:`//space.bilibili.com/${a.info.mid}`),u=M(()=>{var _,p;return Ms(`${(p=(_=a.info.expand)==null?void 0:_.system_notice)==null?void 0:p.icon}@28h`)}),v=M(()=>{const{is_senior_member:_,level:p}=a.info;return _?7:p||0}),f=()=>{var _,p;(p=(_=a.info.expand)==null?void 0:_.system_notice)!=null&&p.url&&window.open(a.info.expand.system_notice.url,"_blank")},h=j(Ve);return(_,p)=>{var m,w,B,$;const b=O("v-button"),S=O("bili-video-card"),y=Ee("report");return l(),d("div",Hm,[(m=_.info.expand)!=null&&m.is_power_up?(l(),d("div",Wm,zm)):F("",!0),c("div",qm,[c("div",Qm,[c("div",Gm,[x(c("a",{href:r.value,target:"_blank"},[E(Qs,{class:"mr_md cs_pointer","bfs-style":"search-videos",info:_.info,"is-small":!0,"is-show-live":!0,"is-show-live-ani":!0},null,8,["info"])],8,Jm),[[y,ke(T({spmid:`search.search-result.up_card.${_.info.is_live?3:1}`},R(h)),{room_id:_.info.room_id,up_id:_.info.mid,live_status:_.info.is_live?"live":"preparing"}),"msg"]]),c("div",{ref_key:"userContent",ref:o,class:"user-content p_relative"},[(w=_.info.expand)!=null&&w.is_power_up?(l(),d("img",Ym)):F("",!0),c("h2",Km,[c("a",{class:"user-name cs_pointer v_align_middle",href:`//space.bilibili.com/${_.info.mid}`,target:"_blank"},[ne(D(_.info.uname),1),E(_i,{class:"ml_sm",level:v.value},null,8,["level"])],8,Zm),c("div",Xm,[_.info.relation?_.info.relation.followed?(l(),N(b,{key:2,type:"grey",onClick:p[1]||(p[1]=g=>s("unfollow"))},{default:z(()=>[ne("\u5DF2\u5173\u6CE8")]),_:1})):x((l(),N(b,{key:1,type:"blue",onClick:p[0]||(p[0]=g=>s("follow"))},{default:z(()=>[ne(" + \u5173\u6CE8 ")]),_:1},512)),[[y,{spmid:"search.search-result.up_card.6"},"msg"]]):x((l(),N(b,{key:0,disabled:"",type:"blue"},{default:z(()=>[ne(" + \u5173\u6CE8 ")]),_:1},512)),[[y,{spmid:"search.search-result.up_card.6"},"msg"]])])]),c("p",e1,[ne(" \u7C89\u4E1D\uFF1A"+D(n.value.fans)+" \xB7 \u89C6\u9891\uFF1A"+D(n.value.videos)+" ",1),c("span",t1,D(((B=_.info.official_verify)==null?void 0:B.desc)||_.info.usign),1)])],512)])]),($=_.info.expand)!=null&&$.system_notice?(l(),d("div",s1,[x(c("div",{class:"tip-content mt_xs",style:je({background:_.info.expand.system_notice.bg_color||"transparent",color:_.info.expand.system_notice.text_color||"#18191c",cursor:_.info.expand.system_notice.url?"pointer":"default"}),onClick:f},[c("div",n1,[_.info.expand.system_notice.icon?(l(),d("img",{key:0,class:"tip-icon",src:u.value},null,8,a1)):F("",!0),c("span",{class:"tip-text",textContent:D(_.info.expand.system_notice.content)},null,8,i1),_.info.expand.system_notice.url?(l(),d("svg",{key:1,width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",class:"p_center_y r_0",style:je({fill:_.info.expand.system_notice.text_color})},r1,4)):F("",!0)])],4),[[y,{spm:"search-card.all",msg:T({spmid:"search.search-result.up_card.2",up_mid:_.info.mid,type:_.info.expand.system_notice.notice_type,url:encodeURIComponent(_.info.expand.system_notice.url)},R(h))},"both"]])])):F("",!0),i.value.length?(l(),d("div",l1,[c("div",c1,[(l(!0),d(X,null,de(i.value,(g,C)=>(l(),d("div",{key:g.bvid,class:K([{to_hide_xs:C>4,to_hide_md:C>5,to_hide_xl:C>6},"video-list-item col_1_5 col_xs_2 col_md_1_7 col_xl_1_8"])},[E(S,{"disable-frame":"","disable-scale":"",index:C,info:g},null,8,["index","info"])],2))),128))])])):F("",!0)])])}}});var d1=ue(u1,[["__scopeId","data-v-1cd59021"]]);const _1=e=>(Qe("data-v-89583ab2"),e=e(),Ge(),e),v1={key:0,class:"user-list search-all-list"},h1={class:"i_wrapper p_relative"},p1=_1(()=>c("div",{class:"card-bottom"},null,-1)),f1=["href"],m1=ae({__name:"UserList",props:{info:{type:Array,default:()=>[]}},setup(e){const s=A([...e.info]),a=jt(),n=()=>{if(!s.value.length)return;const f=s.value.map(h=>h.mid);Os(f).then(h=>{s.value=s.value.map(_=>(_.relation=h[_.mid],_))}).catch(()=>{s.value=s.value.map(h=>(h.relation={followed:!1,mid:h.mid},h))})},i=bt(f=>{const h=a.query.keyword;Us(f,h).then(()=>{const _=s.value.find(p=>p.mid===f.mid);_&&(_.relation.attribute=2,_.relation.followed=!0)})},500),u=bt(f=>{const h=a.query.keyword;Hs(f,h).then(()=>{const _=s.value.find(p=>p.mid===f.mid);_&&(_.relation.attribute=void 0,_.relation.followed=!1)})},500);n();const v=j(Ve);return(f,h)=>{var S;const _=O("WidgetArrow"),p=O("v-button"),b=Ee("report");return(S=e.info)!=null&&S.length?(l(),d("div",v1,[(l(!0),d(X,null,de(s.value,(y,m)=>{var w;return l(),d("div",{key:y.mid},[E(d1,{info:y,class:K({not_100:!((w=y.expand)!=null&&w.is_power_up)}),"auto-report":{show:!0,spm:"search-card.all",msg:T({spmid:"search.search-result.up_card.0",up_mid:y.mid,is_live:y.is_live,is_resident_live_room:Number(!!y.live_room)},R(v))},onFollow:B=>R(i)(y.relation),onUnfollow:B=>R(u)(y.relation)},null,8,["info","class","auto-report","onFollow","onUnfollow"]),c("div",h1,[p1,x(c("a",{class:"watch-more",href:`//space.bilibili.com/${y.mid}/video`,target:"_blank"},[E(p,{type:"link",class:"p_center"},{default:z(()=>{var B;return[ne(D((B=y.res)!=null&&B.length?"\u67E5\u770BTA\u7684\u6240\u6709\u7A3F\u4EF6":"\u6682\u65E0\u89C6\u9891\u7A3F\u4EF6\uFF0C\u524D\u5F80TA\u7684\u7A7A\u95F4")+" ",1),E(_,{class:"i_icon_more"})]}),_:2},1024)],8,f1),[[b,{spm:"search-card.all",msg:T({spmid:"search.search-result.up_card.7",up_mid:y.mid},R(v))},"click"]])])])}),128))])):F("",!0)}}});var da=ue(m1,[["__scopeId","data-v-89583ab2"]]);const g1={class:"special-card"},y1=["href"],w1={class:"special-card-info"},b1=["href"],k1=["title","innerHTML"],C1=["title"],A1=["title"],$1=ae({__name:"SpecialCard",props:{info:{type:Object,required:!0}},setup(e){const t=e,s=j(Ve),a=M(()=>({spm:"search-card.all",msg:T({spmid:"search.search-result.special-video.all",avid:t.info.aid},s.value)}));return(n,o)=>{const i=O("VImg"),r=Ee("report");return x((l(),d("div",g1,[x(c("a",{href:t.info.url,target:"_blank",class:"special-card-img"},[E(i,{src:t.info.cover,width:336,height:189,rule:"1c"},null,8,["src"])],8,y1),[[r,T({},a.value),"click"]]),c("div",w1,[x(c("a",{href:t.info.url,target:"_blank"},[c("div",{class:"special-card-info-title text_ellipsis",title:R(Rt)(t.info.title),innerHTML:t.info.title},null,8,k1)],8,b1),[[r,T({},a.value),"click"]]),c("div",{class:K(["special-card-info-dec text_ellipsis",{"special-card-info-mutilines":!t.info.rec_reason}]),title:t.info.desc},D(t.info.desc),11,C1),e.info.rec_reason?(l(),d("div",{key:0,class:"special-card-info-reason text_ellipsis",title:t.info.rec_reason},D(t.info.rec_reason),9,A1)):F("",!0)])],512)),[[r,T({},a.value),"show"]])}}});var E1=ue($1,[["__scopeId","data-v-5bdd2dbd"]]);const F1={class:"video i_wrapper search-all-list"},S1={key:0,class:"video-v"},B1={class:"video-list row"},I1=ae({__name:"VideoList",props:{info:{type:Array,default:()=>[]}},setup(e){const t=e,s=M(()=>{var h,_,p;const v=String((h=jt().query)==null?void 0:h.keyword),f=(p=(_=t.info)==null?void 0:_[0])==null?void 0:p.aid;return!v||!f?!1:v.replace(/^av/i,"")===f.toString()}),a=M(()=>{var h,_,p;const v=String((h=jt().query)==null?void 0:h.keyword),f=(p=(_=t.info)==null?void 0:_[0])==null?void 0:p.bvid;return!v||!f?!1:v.replace(/^bv/i,"")===(f==null?void 0:f.slice(2))}),n=M(()=>{var v;return(v=t.info)!=null&&v[0]?hn(t.info[0]):void 0}),o=M(()=>{const v=[...t.info];return s.value||a.value?v.slice(1):v}),i=v=>hn(v),r=j(Ve),u=(v,f)=>T({video_type:f,card_index:v+1},r.value);return(v,f)=>(l(),d("div",F1,[s.value||a.value?(l(),d("div",S1,[E(Rs,{"grid-class":"col_3 col_xs_1_5 col_md_2 col_xl_1_7","show-av":s.value,"show-bv":a.value,"disable-frame":"","disable-scale":"",grid:"","use-inner-report":"","merge-report-msg":u(0,"av_bv_special"),info:n.value},null,8,["show-av","show-bv","merge-report-msg","info"])])):F("",!0),c("div",B1,[(l(!0),d(X,null,de(o.value,(h,_)=>(l(),d("div",{key:h==null?void 0:h.id,class:K([{to_hide_xs:_>23,to_hide_md:_>29,to_hide_xl:_>35},"col_3 col_xs_1_5 col_md_2 col_xl_1_7 mb_x40"])},[h.type==="special_card"?(l(),N(E1,{key:0,info:h},null,8,["info"])):(l(),N(Rs,{key:1,info:i(h),"disable-frame":"","disable-scale":"","use-inner-report":"","merge-report-msg":u(_)},null,8,["info","merge-report-msg"]))],2))),128))])]))}});var D1=ue(I1,[["__scopeId","data-v-97dcc362"]]);const T1={},x1=e=>(Qe("data-v-491f307f"),e=e(),Ge(),e),L1={class:"search-neterror-container p_relative"},P1=x1(()=>c("div",{class:"net-error p_center text_center"},[c("img",{class:"net-error-img",src:"//i0.hdslb.com/bfs/static/laputa-search/assets/neterror.65668da4.png",alt:""}),c("p",{class:"mt_lg b_text text3"},"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<")],-1)),R1=[P1];function V1(e,t){return l(),d("div",L1,R1)}var Mt=ue(T1,[["render",V1],["__scopeId","data-v-491f307f"]]);const M1={},N1=e=>(Qe("data-v-7ab1325e"),e=e(),Ge(),e),O1={class:"search-nodata-container p_relative"},U1=N1(()=>c("div",{class:"no-data p_center text_center"},[c("img",{class:"no-data-img",src:"//i0.hdslb.com/bfs/static/laputa-search/assets/nodata.67f7a1c9.png",alt:""}),c("p",{class:"mt_lg b_text text3"},"\u4ECA\u5929\u771F\u662F\u5BC2\u5BDE\u5982\u96EA\u554A~")],-1)),H1=[U1];function W1(e,t){return l(),d("div",O1,H1)}var Nt=ue(M1,[["render",W1],["__scopeId","data-v-7ab1325e"]]);const j1={class:"i_wrapper mt_xxl"},z1={class:"video-list row"},hi=ae({__name:"SearchSketlon",setup(e){const t=A(new Array(42).fill({}).map(s=>zs(s)));return(s,a)=>(l(),d("div",j1,[c("div",z1,[(l(!0),d(X,null,de(t.value,(n,o)=>(l(),d("div",{key:n.bvid,class:K([{to_hide_xs:o>23,to_hide_md:o>29,to_hide_xl:o>35},"video-list-item col_3 col_xs_1_5 col_md_2 col_xl_1_7 mb_x40"])},[E(Rs,{"disable-frame":"","disable-scale":"",info:n,skeleton:!0},null,8,["info"])],2))),128))])]))}}),q1={key:0,class:"search-page search-page-video i_wrapper mt_xxl pb_xxl"},Q1={class:"video-list row"},G1={key:0,class:"flex_center mt_x50 mb_lg"},pi=ae({__name:"SearchVideo",setup(e){var Q;const t=j(ot),s=A([]),{validQueryParams:a}=dt(),{pageVideos:n,isMinMd:o}=Yt(),i=A(!0),r=A(!1),u=A(!1),v=M(()=>i.value||u.value&&!s.value.length),f=A(0),h=A(42),_=A(""),p=j(Tt),{page:b,offset:S}=j(Cn),y=j(xt),m=j(An),w=j(ut),B=j(Lt),$=j(Pt),g=j(Ve),C=te=>T({card_index:te+1},g.value),k=Vt(),L=ce?At():null,Y=()=>q(this,null,function*(){const{order:te,duration:G,tids:ve}=a.value;if(!p)return;$(),r.value=!1,u.value=!0,y.value="";const $e=Jt({keyword:p.value,search_type:"video",order:te,duration:G,tids:ve,page:b.value,page_size:h.value,dynamic_offset:S.value,ad_resource:"5654"},B.value,_.value);try{const H=yield k.querySearchByType($e,L);i.value=!1,u.value=!1,y.value=H.seid||"",I(H),!ce&&H.v_voucher&&Ct((Z,P)=>q(this,null,function*(){_.value=P==null?void 0:P.token,yield Y()}),{v_voucher:H.v_voucher})}catch(H){console.error(H),r.value=!0,i.value=!1,u.value=!1,I({})}}),I=({result:te,numResults:G})=>{f.value=G||0,s.value=($a(te)?te:[]).map(ve=>hn(ve))},U=()=>{t==null||t.emit("onPageChange"),setTimeout(()=>{w(),m()},100)};return fe(u,te=>{te&&(s.value=[],u.value=!0)}),!ce&&!k.isSSRVisit&&(i.value=!1,u.value=!1,y.value=((Q=k.searchTypeResponse)==null?void 0:Q.seid)||"",I(k.searchTypeResponse),k.isSSRVisit=!0),Kt({submitSearchHandler:Y}),Dt(()=>q(this,null,function*(){yield Y()})),(te,G)=>{const ve=Mt,$e=O("ClientOnly"),H=O("bili-video-card"),Z=O("v-pagenation");return l(),d(X,null,[E($e,null,{default:z(()=>[v.value?(l(),N(hi,{key:0})):r.value?(l(),N(ve,{key:1})):s.value.length?F("",!0):(l(),N(Nt,{key:2}))]),_:1}),!r.value&&s.value.length?(l(),d("div",q1,[c("div",Q1,[(l(!0),d(X,null,de(s.value,(P,W)=>(l(),d("div",{key:P.id,class:K([{to_hide_xs:W>23,to_hide_md:W>29,to_hide_xl:W>35},"video-list-item col_3 col_xs_1_5 col_md_2 col_xl_1_7 mb_x40"])},[E(H,{"disable-frame":"","disable-scale":"",info:P,"use-inner-report":"","merge-report-msg":C(W)},null,8,["info","merge-report-msg"])],2))),128))]),E($e,null,{default:z(()=>[f.value>R(n)?(l(),d("div",G1,[E(Z,{pageNum:R(b),"onUpdate:pageNum":G[0]||(G[0]=P=>Ns(b)?b.value=P:null),"page-size":R(n),total:f.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:U},null,8,["pageNum","page-size","total"])])):F("",!0)]),_:1})])):F("",!0)],64)}}});const J1={key:0,class:"search-page search-page-all"},Y1={key:0},K1={key:0,class:"flex_center mt_x50 mb_x50"},Z1=ae({__name:"SearchAll",setup(e){const t={esports:hf,activity_game:Ch,media_mixin:rm,video:D1,bili_user:da,user:da,tips:mm,brand_ad:Fp},s=A(),a=A([]),n=A([]),o=A([]),i=A([]),r=A([]);Me("bangumi",n),Me("pgc",o);const{pageVideos:u}=Yt(),{isSearchAll:v}=dt(),f=A(!0),h=j(ot),_=j(Xa),p=j(ei),b=j(ti),S=M(()=>{var I;return f.value||v.value&&p.value&&!((I=a.value)!=null&&I.length)}),y=M(()=>{var I;return((I=b.value.top_tlist)==null?void 0:I.video)||0}),{page:m}=j(Cn);j(ni);const w=j(An),B=j(ut),$=M(()=>!S.value&&a.value.every(I=>{var U,Q,te,G,ve;return!((U=I.data)!=null&&U.length)&&!((te=(Q=I.data)==null?void 0:Q.bangumi)!=null&&te.length)&&!((ve=(G=I.data)==null?void 0:G.pgc)!=null&&ve.length)})),g=(I,U)=>{var Q;return((Q=I==null?void 0:I.find(te=>te.result_type===U))==null?void 0:Q.data)||[]},C=I=>(I!=null?I:[]).map(U=>{var Q,te,G,ve,$e,H,Z;return{id:U==null?void 0:U.id,card:($e=(ve=(G=(te=(Q=U==null?void 0:U.value)==null?void 0:Q.biz_data)==null?void 0:te.ad_content)==null?void 0:G.extra)==null?void 0:ve.card)!=null?$e:{},bili_user:(H=U==null?void 0:U.bili_user)!=null?H:{},origin_data:(Z=U==null?void 0:U.value)==null?void 0:Z.biz_data}}),k=I=>{i.value=g(I,Ze.activity),r.value=g(I,Ze.web_game),n.value=g(I,Ze.media_bangumi),o.value=g(I,Ze.media_ft);const U=I.map(G=>G.result_type===Ze.activity?{result_type:Ot.activity_game,data:[...i.value,...r.value]}:G.result_type===Ze.web_game?{result_type:Ot.activity_game,data:[...r.value,...i.value]}:G.result_type===Ze.media_bangumi||G.result_type===Ze.media_ft?{result_type:Ot.media_mixin,data:{bangumi:n.value,pgc:o.value}}:G.result_type===Ze.brand_ad?{result_type:Ot.brand_ad,data:C(G.data)}:G);let Q=!1,te=!1;for(let G=0;G<U.length;G++)U[G].result_type===Ot.activity_game&&(Q?(U.splice(G,1),G--):Q=!0),U[G].result_type===Ot.media_mixin&&(te?(U.splice(G,1),G--):te=!0);return U},L=()=>{h==null||h.emit("onPageChange"),setTimeout(()=>{B(),w()},100)};fe(b,I=>{f.value=!1,a.value=k(I.result||[]),s.value=I==null?void 0:I.top_tlist},{immediate:!0}),fe(p,I=>{I&&(a.value=[])}),fe(v,I=>{f.value=I});const Y=A(!1);return ze(()=>{setTimeout(()=>Y.value=!0,100)}),(I,U)=>{const Q=O("ClientOnly"),te=O("v-pagenation");return R(v)?(l(),d("div",J1,[E(Q,null,{default:z(()=>[S.value?(l(),N(hi,{key:0})):F("",!0),R(_)?(l(),N(Mt,{key:1})):$.value?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!R(_)&&!$.value?(l(),d("div",Y1,[(l(!0),d(X,null,de(a.value,(G,ve)=>(l(),N(Aa(t[G.result_type]),{key:ve,info:G.data,"top-t-list":s.value},null,8,["info","top-t-list"]))),128)),E(Q,null,{default:z(()=>[y.value>R(u)?(l(),d("div",K1,[Y.value?(l(),N(te,{key:0,pageNum:R(m),"onUpdate:pageNum":U[0]||(U[0]=G=>Ns(m)?m.value=G:null),"page-size":R(u),total:y.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:L},null,8,["pageNum","page-size","total"])):F("",!0)])):F("",!0)]),_:1})])):F("",!0)])):(l(),N(pi,{key:1}))}}});var X1=ue(Z1,[["__scopeId","data-v-860e5eb6"]]);const eg={class:"b-article-card flex_start items_stretch"},tg={class:"article-banner bd_radius ov_hidden"},sg=["href"],ng={class:"article-content pr_md"},ag={class:"b_text i_card_title mt_0"},ig=["href","innerHTML","title"],og={class:"b_text atc-info text_ellipsis"},rg=["href"],lg={class:"atc-desc b_text text_ellipsis_2l text3 fs_5"},cg={key:0,class:"atc-author text_ellipsis fs_5"},ug=["href"],dg={class:"lh_xs"},_g=ae({__name:"ArticleCard",props:{info:{}},setup(e){const t=e,s=M(()=>Rt(t.info.title)),a=M(()=>{const{image_urls:o,view:i,like:r,reply:u}=t.info;return{img:(o||[])[0]||"",view:at(i)||0,like:at(r)||0,reply:at(u)||0}}),n=M(()=>{const o=Nd[t.info.category_id]||"other";return"//www.bilibili.com/read/"+o+"#rid="+t.info.category_id});return(o,i)=>{var v;const r=O("VImg"),u=Ee("report");return l(),d("div",eg,[c("div",tg,[x(c("a",{href:"//www.bilibili.com/read/cv"+o.info.id+"?from=search",target:"_blank"},[E(r,{class:"cover-img",src:(o.info.image_urls||[])[0],alt:"\u4E13\u680F",width:154,height:116,rule:"1c","bfs-style":"web-search-article-cover"},null,8,["src"])],8,sg),[[u,{type:"article"},"msg"]])]),c("div",ng,[c("h2",ag,[x(c("a",{class:"text1",href:"//www.bilibili.com/read/cv"+o.info.id+"?from=search",innerHTML:o.info.title,title:s.value,target:"_blank"},null,8,ig),[[u,{type:"detail"},"msg"]])]),c("p",og,[x(c("a",{href:n.value,target:"_blank"},D(o.info.category_name),9,rg),[[u,{type:"category"},"msg"]]),ne(" \xB7 "+D(a.value.like)+"\u70B9\u8D5E \xB7 "+D(a.value.reply)+"\u6761\u8BC4\u8BBA ",1)]),c("p",lg,D(o.info.desc),1),(v=o.info.meta)!=null&&v.author?(l(),d("div",cg,[x(c("a",{class:"flex_start flex_inline text3",href:"https://space.bilibili.com/"+o.info.mid,target:"_blank"},[E(R(bn),{class:"author-icon mr_2"}),c("span",dg,D(o.info.meta.author.name),1)],8,ug),[[u,{type:"author"},"msg"]])])):F("",!0)])])}}});var vg=ue(_g,[["__scopeId","data-v-2d9e8eb6"]]);const hg={},pg=e=>(Qe("data-v-17572446"),e=e(),Ge(),e),fg={class:"search-loading-container p_relative"},mg=pg(()=>c("p",{class:"loading-text b_text text3 p_center"},[c("img",{class:"loading-gif mt_n4 mr_xs",src:"//i0.hdslb.com/bfs/static/laputa-search/assets/loading_new.5a3d88cd.gif",alt:""}),ne(" \u52A0\u8F7D\u4E2D... ")],-1)),gg=[mg];function yg(e,t){return l(),d("div",fg,gg)}var rs=ue(hg,[["render",yg],["__scopeId","data-v-17572446"]]);const wg={class:"search-page search-page-article i_page_container i_wrapper"},bg={class:"conditions-order flex_between mb_sm"},kg={class:"condition-row"},Cg={class:"condition-row"},Ag={key:0},$g={class:"media-list row mt_lg"},Eg={key:0,class:"mt_x50 mb_lg flex_center"},Fg=ae({__name:"SearchArticle",setup(e){var Z;const t=j(ot),s=A([{name:"\u7EFC\u5408\u6392\u5E8F",order:"totalrank"},{name:"\u6700\u65B0\u53D1\u5E03",order:"pubdate"},{name:"\u6700\u591A\u70B9\u51FB",order:"click"},{name:"\u6700\u591A\u559C\u6B22",order:"attention"},{name:"\u6700\u591A\u8BC4\u8BBA",order:"scores"}]),a=A([{name:"\u5168\u90E8\u5206\u533A",cateId:0},{name:"\u52A8\u753B",cateId:2},{name:"\u6E38\u620F",cateId:1},{name:"\u5F71\u89C6",cateId:28},{name:"\u751F\u6D3B",cateId:3},{name:"\u5174\u8DA3",cateId:29},{name:"\u8F7B\u5C0F\u8BF4",cateId:16},{name:"\u79D1\u6280",cateId:17},{name:"\u7B14\u8BB0",cateId:41}]),n=A([]),o=A([]),i=A(!1),r=A(!0),{isMinMd:u}=Yt(),{validQueryParams:v,updateQueryParams:f}=dt(),h=A((Z=v.value.order)!=null?Z:"totalrank"),_=A(+v.value.category_id||0),p=A(null),{isShowMoreConditions:b,toggleSlideMoreConditions:S}=En(p);b.value=!!_.value;const y=A(+v.value.page||1),m=A(0),w=A(20),B=j(Tt),$=j(Ve),g=j(xt),C=j(ut),k=j(Lt),L=j(Pt),Y=A(""),I=Vt(),U=ce?At():null,Q=()=>q(this,null,function*(){L(),i.value=!1,r.value=!0,g.value="";const P=Jt({keyword:B.value,search_type:"article",order:h.value,category_id:_.value,page:y.value,page_size:w.value},k.value,Y.value);try{const W=yield I.querySearchByType(P,U);return g.value=W.seid||"",!ce&&W.v_voucher&&Ct((J,oe)=>q(this,null,function*(){Y.value=oe==null?void 0:oe.token,yield Q()}),{v_voucher:W.v_voucher}),W}catch(W){i.value=!0,r.value=!1,m.value=0,n.value=[]}}),te=J=>q(this,[J],function*({result:P,numResults:W}){const oe=(P||[]).map(pe=>pe.id);if(oe.length)try{const pe=yield Sc(oe);r.value=!1,m.value=W||0,n.value=(P||[]).map(Be=>(pe[Be.id]&&(Be.meta=pe[Be.id]),Be))}catch(pe){if(!ce&&pe.code===-352){Ct((Be,Ie)=>q(this,null,function*(){Y.value=Ie==null?void 0:Ie.token,yield te({result:P,numResults:W})}),{v_voucher:pe.data.v_voucher});return}i.value=!0,r.value=!1,m.value=0,n.value=[]}else r.value=!1,m.value=W||0,n.value=[]});Dt(()=>q(this,null,function*(){yield Q()}));const G=()=>{t==null||t.emit("onPageChange"),C(),setTimeout(()=>Q())},ve=P=>{h.value!==P&&(h.value=P,y.value=1,setTimeout(()=>Q()))},$e=P=>{_.value!==P&&(_.value=P,y.value=1,setTimeout(()=>Q()))},H=()=>{f({page:y.value,order:h.value,category_id:_.value})};return fe(B,()=>{y.value=1,h.value="totalrank",_.value=0}),fe(r,P=>{P&&(n.value=[],o.value=[])}),fe([y,h,_],()=>H()),$t(()=>f({order:"",category_id:""})),ce||(I.isSSRVisit||(I.isSSRVisit=!0,te(I.searchTypeResponse)),I.$onAction(({after:P})=>{P(W=>q(this,null,function*(){const J=yield W;g.value=J.seid||"",yield te(J)}))})),Kt({submitSearchHandler:()=>Q()}),(P,W)=>{const J=O("v-button"),oe=O("WidgetArrow"),pe=js,Be=O("ClientOnly"),Ie=O("v-pagenation"),He=Ee("report");return l(),d("div",wg,[E(pe,{"auto-report":{show:!0,spm:"search-filter.all",msg:T({},R($))}},{default:z(()=>[c("div",{class:K(["search-conditions mt_lg",{mt_xxl:R(u)}])},[c("div",bg,[c("div",kg,[(l(!0),d(X,null,de(s.value,we=>x((l(),N(J,{key:we.order,type:"tab",class:"mr_sm",active:we.order===h.value,onClick:re=>ve(we.order)},{default:z(()=>[ne(D(we.name),1)]),_:2},1032,["active","onClick"])),[[He,{click_type:"order",order_id:we.order,order_name:we.name},"msg"]])),128))]),x(E(J,{class:"i_button_more","active-shrink":"",onClick:R(S)},{default:z(()=>[ne(" \u66F4\u591A\u7B5B\u9009 "),E(oe,{class:K(["i_icon_more ts_all_fast rotate_90",{rotate_n90:R(b)}])},null,8,["class"])]),_:1},8,["onClick"]),[[He,{spm:"search.filter-toggle",msg:{show:!R(b)}},"msg"]])]),c("div",{ref_key:"moreConditions",ref:p,class:"more-conditions hide ov_hidden"},[c("div",Cg,[(l(!0),d(X,null,de(a.value,we=>x((l(),N(J,{key:we.cateId,type:"tab",class:"mb_sm mr_sm",active:we.cateId===_.value,onClick:re=>$e(we.cateId)},{default:z(()=>[ne(D(we.name),1)]),_:2},1032,["active","onClick"])),[[He,{click_type:"tid",tid_id:we.cateId,tid_name:we.name},"msg"]])),128))])],512)],2)]),_:1},8,["auto-report"]),E(Be,null,{default:z(()=>[r.value&&!n.value.length?(l(),N(rs,{key:0})):i.value?(l(),N(Mt,{key:1})):!r.value&&!n.value.length?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!i.value&&n.value.length?(l(),d("div",Ag,[c("div",$g,[(l(!0),d(X,null,de(n.value,(we,re)=>{var _e,Ce;return l(),d("div",{key:we.id,class:"col_6 mb_x40"},[E(vg,{info:we,class:"search-article-card","auto-report":{show:!0,spm:"search-card.all",msg:T({spmid:"search.search-result.article.all",author_mid:(Ce=(_e=we.meta)==null?void 0:_e.author)==null?void 0:Ce.mid,article_id:we.id,card_index:re+1,page:y.value},R($))}},null,8,["info","auto-report"])])}),128))]),m.value>w.value?(l(),d("div",Eg,[E(Ie,{pageNum:y.value,"onUpdate:pageNum":W[0]||(W[0]=we=>y.value=we),total:m.value,"page-size":w.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:G},null,8,["pageNum","total","page-size"])])):F("",!0)])):F("",!0)])}}}),Sg={class:"search-page i_page_container search-page-bangumi mt_xxl"},Bg={key:0},Ig={class:"media-list i_wrapper"},Dg={class:"row"},Tg={key:0,class:"mt_x50 mb_lg flex_center"},xg=ae({__name:"SearchBangumi",setup(e){var $,g,C;const t=j(ot),s=A([]),a=A(!1),n=A(!0),{validQueryParams:o,updateQueryParams:i}=dt(),r=A(+o.value.page||1),u=A(0),v=A(12),f=j(Tt),h=j(xt),_=j(ut),p=j(Lt),b=j(Pt),S=A(""),y=Vt(),m=ce?At():null,w=()=>q(this,null,function*(){b(),a.value=!1,n.value=!0,h.value="";const k=Jt({keyword:f.value,search_type:"media_bangumi",page:r.value,page_size:v.value},p.value,S.value);try{const L=yield y.querySearchByType(k,m);n.value=!1,u.value=L.numResults||0,s.value=L.result||[],h.value=L.seid||"",!ce&&L.v_voucher&&Ct((Y,I)=>q(this,null,function*(){S.value=I==null?void 0:I.token,yield w()}),{v_voucher:L.v_voucher})}catch(L){console.log("error",L),a.value=!0,n.value=!1,u.value=0,s.value=[]}}),B=()=>{t==null||t.emit("onPageChange"),_(),setTimeout(()=>w())};return fe(f,()=>r.value=1),fe(n,k=>{k&&(s.value=[])}),!ce&&!y.isSSRVisit&&(n.value=!1,u.value=(($=y.searchTypeResponse)==null?void 0:$.numResults)||0,s.value=((g=y.searchTypeResponse)==null?void 0:g.result)||[],h.value=(C=y.searchTypeResponse)==null?void 0:C.seid,y.isSSRVisit=!0),fe(r,k=>i({page:k})),Dt(()=>q(this,null,function*(){yield w()})),Kt({submitSearchHandler:()=>w()}),(k,L)=>{const Y=O("ClientOnly"),I=O("v-pagenation");return l(),d("div",Sg,[E(Y,null,{default:z(()=>[n.value&&!s.value.length?(l(),N(rs,{key:0})):a.value?(l(),N(Mt,{key:1})):!n.value&&!s.value.length?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!a.value&&s.value.length?(l(),d("div",Bg,[c("div",Ig,[c("div",Dg,[(l(!0),d(X,null,de(s.value,U=>(l(),d("div",{key:U.media_id,class:"col_6 mb_x40"},[E(Bn,{info:U},null,8,["info"])]))),128))])]),E(Y,null,{default:z(()=>[u.value>v.value?(l(),d("div",Tg,[E(I,{pageNum:r.value,"onUpdate:pageNum":L[0]||(L[0]=U=>r.value=U),total:u.value,"page-size":v.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:B},null,8,["pageNum","total","page-size"])])):F("",!0)]),_:1})])):F("",!0)])}}});const Lg={class:"b-user-live-card flex_start"},Pg=["href"],Rg={class:"live-content pr_md"},Vg={class:"b_text i_card_title mt_0"},Mg=["href"],Ng=["title","innerHTML"],Og={class:"live-desc b_text fs_5 text3 flex_start text_nowrap"},Ug={class:"text_ellipsis d_inline_block"},Hg={key:0},Wg={class:"live-actions"},jg=ae({__name:"UserLiveCard",props:{info:{}},emits:["follow","unfollow"],setup(e,{emit:t}){const s=t,a=e,n=A(null),o=M(()=>Rt(a.info.uname)),i=M(()=>ke(T({},a.info),{is_live:a.info.is_live,upic:a.info.uface,official_verify:{}})),r=M(()=>at(a.info.attentions||0)),u=M(()=>a.info.is_live?`//live.bilibili.com/${a.info.roomid}?live_from=84001`:`//space.bilibili.com/${a.info.uid}`),v=M(()=>{var _;return((_=a.info.tags)==null?void 0:_.split(","))||[]}),h=ka(()=>{if(!!Vs()&&n.value){const _=n.value.querySelectorAll(".live-tag-item");if(_.length){const{right:p}=n.value.getBoundingClientRect();[].forEach.call(_,b=>{const{right:S}=b.getBoundingClientRect();S<p?ks(b,"invisible"):Ca(b,"invisible")})}}},500);return fe([n,v],()=>h()),ze(()=>{h(),window.addEventListener("resize",h)}),$t(()=>{window.removeEventListener("resize",h)}),(_,p)=>{const b=O("v-button");return l(),d("div",Lg,[c("a",{class:"mr_md",href:u.value,target:"_blank"},[E(Qs,{"bfs-style":"search-user",info:i.value,"is-show-live":!0},null,8,["info"])],8,Pg),c("div",Rg,[c("h2",Vg,[c("a",{class:"live-title",href:u.value,target:"_blank"},[c("span",{title:o.value,innerHTML:_.info.uname},null,8,Ng)],8,Mg)]),c("div",Og,[c("span",Ug,[ne(D(_.info.cate_name),1),_.info.cate_name?(l(),d("span",Hg,"\xA0\xB7\xA0")):F("",!0),ne(D(r.value)+"\u4EBA\u5173\u6CE8\u76F4\u64AD\u95F4 ",1)]),c("div",{ref_key:"tagsWrap",ref:n,class:"live-tags ml_sm"},[(l(!0),d(X,null,de(v.value,S=>(l(),N(Gt,{key:S,class:"live-tag-item mr_xs invisible",value:S},null,8,["value"]))),128))],512)]),c("div",Wg,[_.info.relation?_.info.relation.followed?(l(),N(b,{key:2,type:"grey",onClick:p[1]||(p[1]=S=>s("unfollow"))},{default:z(()=>[ne("\u5DF2\u5173\u6CE8")]),_:1})):(l(),N(b,{key:1,type:"blue",onClick:p[0]||(p[0]=S=>s("follow"))},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1})):(l(),N(b,{key:0,disabled:"",type:"blue"},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1}))])])])}}});var _a=ue(jg,[["__scopeId","data-v-15b50bcf"]]);const zg={class:"search-page search-page-live i_page_container i_wrapper"},qg={key:0},Qg={class:"b_text flex_between"},Gg={class:"flex_start"},Jg={class:"ml_md fs_4 text3 fw_400"},Yg={class:"live-user-cards row mt_lg"},Kg={class:"b_text flex_start"},Zg={class:"ml_md fs_4 text3 fw_400"},Xg={class:"live-user-cards row mt_lg"},ey={class:"room-header b_text flex_between"},ty={class:"flex_start"},sy={class:"room-order flex_start ml_sm"},ny={class:"ml_md fs_4 text3 fw_400"},ay={class:"live-room-cards row mt_lg"},iy={key:0,class:"mt_x50 mb_lg flex_center"},oy=ae({__name:"SearchLive",setup(e){const t=j(ot),s=[{type:"live",name:"\u5168\u90E8",query:"live"},{type:"live_user",name:"\u4E3B\u64AD",query:"live_user"},{type:"live_room",name:"\u76F4\u64AD\u95F4",query:"live"}],a=[{order:"online",name:"\u7EFC\u5408\u6392\u5E8F"},{order:"live_time",name:"\u6700\u65B0\u5F00\u64AD"}],n=A(!1),o=A(!0),i=A([]),r=A([]),u=A(0),v=A(42),f=A(0),h=A(0),_=A("live"),p=A("live"),b=A("online"),S=j(Tt),y=j(Ve),m=j(xt),w=j(ut),B=j(Lt),$=j(Pt),{pageUsers:g,pageVideos:C,isMinMd:k}=Yt(),{validQueryParams:L,initQueryParams:Y,updateQueryParams:I}=dt(),U=M(()=>_.value==="live_user"?g.value:C.value),{page:Q,offset:te,resetPageParams:G}=$n(U),ve=A(""),$e=Vt(),H=ce?At():null,Z=M(()=>({userTotal:f.value>=1e3?"1000+":f.value,roomTotal:h.value>=1e3?"1000+":h.value})),P=M(()=>_.value==="live"&&!i.value.length&&!r.value.length||_.value==="live_user"&&!i.value.length||_.value==="live_room"&&!r.value.length),W=()=>{var V;const he=L.value,ie=he.search_type;_.value=ie!=null?ie:"live",p.value=["live","live_user"].includes(ie)?ie:"live",b.value=(V=he.order)!=null?V:"online"};W();const J=()=>q(this,null,function*(){$(),n.value=!1,o.value=!0,m.value="";const he=Jt({keyword:S.value,search_type:p.value,order:b.value,page:Q.value,page_size:v.value,dynamic_offset:te.value},B.value,ve.value);try{const ie=yield $e.querySearchByType(he,H),{v_voucher:V}=ie;o.value=!1,!ce&&V&&Ct((se,me)=>q(this,null,function*(){ve.value=me==null?void 0:me.token,yield J()}),{v_voucher:V}),pe(ie)}catch(ie){n.value=!0,o.value=!1,u.value=0,r.value=[]}}),oe=()=>q(this,null,function*(){if(!i.value.length)return;const he=i.value.map(ie=>ie.uid);try{const ie=yield Os(he);i.value=i.value.map(V=>(V.relation=ie[V.uid],V))}catch(ie){i.value=i.value.map(V=>(V.relation={followed:!1,mid:V.uid},V))}}),pe=he=>{var Re,Xe;const{result:ie,pageinfo:V,numResults:se,seid:me}=he;if(m.value=me,p.value==="live"&&fa(ie)){u.value=((Re=V.live_room)==null?void 0:Re.numResults)||0,h.value=u.value,f.value=((Xe=V.live_user)==null?void 0:Xe.numResults)||0;const{live_user:ge,live_room:Te}=ie;i.value=ge||[],r.value=(Te||[]).map(jd)}else p.value==="live_user"&&$a(ie)&&(u.value=se||0,f.value=u.value,i.value=ie||[])},Ie=bt(he=>{Us(he,L.value.keyword).then(()=>{const ie=i.value.find(V=>V.uid===he.mid);ie&&(ie.relation.attribute=2,ie.relation.followed=!0)})},500),we=bt(he=>{Hs(he,L.value.keyword).then(()=>{const ie=i.value.find(V=>V.uid===he.mid);ie&&(ie.relation.attribute=void 0,ie.relation.followed=!1)})},500),re=(he,ie,V)=>{const se=V==="liveUser"?"live_user":"live_room",me=he;return{show:!0,spm:"search-card.all",msg:ke(T({spmid:`search.search-result.${se}.all`,inner_tab_type:_.value,up_mid:V==="liveUser"?me.uid:me.author.mid,roomid:V==="liveUser"?me.roomid:me.roomId,card_index:ie+1},y.value),{room_id:V==="liveUser"?me.roomid:me.roomId,up_id:V==="liveUser"?me.uid:me.author.mid,live_status:"live",area_id:me.area,subarea_id:me.area_v2_id})}},_e=({type:he,query:ie})=>{_.value=he,p.value=ie,Q.value=1,setTimeout(()=>J())},Ce=he=>{b.value=he,Q.value=1,setTimeout(()=>J())},Ne=()=>{t==null||t.emit("onPageChange"),w(),setTimeout(()=>J())},Oe=()=>{I({page:Q.value,search_type:_.value,order:b.value})};return fe(S,()=>Q.value=1),fe(o,he=>{he&&(i.value=[],r.value=[],f.value=0,h.value=0)}),fe(_,he=>{he==="live_user"&&(b.value="online")},{immediate:!0}),fe([Q,_,b],()=>Oe()),ce||($e.isSSRVisit||(pe($e.searchTypeResponse),$e.isSSRVisit=!0,oe()),$e.$onAction(({after:he})=>{he(ie=>q(this,null,function*(){const V=yield ie;pe(V),yield oe()}))})),Dt(()=>q(this,null,function*(){yield J()})),Kt({submitSearchHandler:()=>J(),routeChangedHandler:()=>{Y(),setTimeout(()=>{G(),W()})}}),(he,ie)=>{const V=O("v-button"),se=O("ClientOnly"),me=O("WidgetArrow"),Re=O("bili-live-card"),Xe=O("v-pagenation");return l(),d("div",zg,[c("div",{class:K(["live-condition mt_lg",{mt_xxl:R(k)}])},[(l(),d(X,null,de(s,ge=>E(V,{key:ge.type,type:"tab",class:"mr_sm",active:ge.type===_.value,onClick:Te=>_e(ge)},{default:z(()=>[ne(D(ge.name),1)]),_:2},1032,["active","onClick"])),64))],2),E(se,null,{default:z(()=>[o.value&&P.value?(l(),N(rs,{key:0})):n.value?(l(),N(Mt,{key:1})):!o.value&&P.value?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!n.value&&!P.value?(l(),d("div",qg,[_.value==="live"&&i.value.length?(l(),d("div",{key:0,class:K(["live-user mt_xl",{mt_xxl:R(k)}])},[c("h1",Qg,[c("span",Gg,[ne(" \u4E3B\u64AD "),c("span",Jg,"\u5171\u627E\u5230"+D(Z.value.userTotal)+"\u4E2A\u7ED3\u679C",1)]),E(V,{class:"i_button_more","active-shrink":"",onClick:ie[0]||(ie[0]=ge=>_e(s[1]))},{default:z(()=>[ne(" \u67E5\u770B\u66F4\u591A "),E(me,{class:"i_icon_more"})]),_:1})]),c("div",Yg,[(l(!0),d(X,null,de(i.value,(ge,Te)=>(l(),d("div",{key:ge.uid,class:K(["col_6 col_md_4",{to_hide_md:Te>3}])},[E(_a,{info:ge,class:"live-user-card","auto-report":re(ge,Te,"liveUser"),onFollow:et=>R(Ie)(ge.relation),onUnfollow:et=>R(we)(ge.relation)},null,8,["info","auto-report","onFollow","onUnfollow"])],2))),128))])],2)):F("",!0),_.value==="live_user"&&i.value.length?(l(),d("div",{key:1,class:K(["live-user mt_xl",{mt_xxl:R(k)}])},[c("h1",Kg,[ne(" \u4E3B\u64AD "),c("span",Zg,"\u5171\u627E\u5230"+D(Z.value.userTotal)+"\u4E2A\u7ED3\u679C",1)]),c("div",Xg,[(l(!0),d(X,null,de(i.value,(ge,Te)=>(l(),d("div",{key:ge.uid,class:K(["col_6 col_md_4",{to_hide_md:Te>23}])},[E(_a,{info:ge,class:"live-user-card","auto-report":re(ge,Te,"liveUser"),onFollow:et=>R(Ie)(ge.relation),onUnfollow:et=>R(we)(ge.relation)},null,8,["info","auto-report","onFollow","onUnfollow"])],2))),128))])],2)):F("",!0),_.value!=="live_user"&&r.value.length?(l(),d("div",{key:2,class:K(["live-room mt_sm",{mt_xl:_.value==="live_room"&&!R(k)||!i.value.length,mt_xxl:_.value==="live_room"&&R(k)}])},[c("h1",ey,[c("span",ty,[ne(" \u76F4\u64AD\u95F4 "),c("div",sy,[(l(),d(X,null,de(a,(ge,Te)=>E(V,{key:ge.order,round:"",size:"small",class:K(["live-type-btn",{ml_sm:Te>0}]),active:ge.order===b.value,onClick:et=>Ce(ge.order)},{default:z(()=>[ne(D(ge.name),1)]),_:2},1032,["class","active","onClick"])),64))]),c("span",ny,"\u5171\u627E\u5230"+D(Z.value.roomTotal)+"\u4E2A\u7ED3\u679C",1)])]),c("div",ay,[(l(!0),d(X,null,de(r.value,(ge,Te)=>(l(),d("div",{key:ge.roomId,class:K([{to_hide_xs:Te>23,to_hide_md:Te>29,to_hide_xl:Te>35},"video-list-item col_3 col_xs_1_5 col_md_2 col_xl_1_7 mb_xxl"])},[E(Re,{info:ge,"disable-scale":!0,"auto-report":re(ge,Te,"liveRoom"),"img-style":"web-search-common-cover"},null,8,["info","auto-report"])],2))),128))])],2)):F("",!0),E(se,null,{default:z(()=>[u.value>U.value?(l(),d("div",iy,[E(Xe,{pageNum:R(Q),"onUpdate:pageNum":ie[1]||(ie[1]=ge=>Ns(Q)?Q.value=ge:null),total:u.value,"page-size":U.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:Ne},null,8,["pageNum","total","page-size"])])):F("",!0)]),_:1})])):F("",!0)])}}});var ry=ue(oy,[["__scopeId","data-v-44590bea"]]);const ly={class:"search-page i_page_container search-page-pgc mt_xxl"},cy={class:"media-list i_wrapper"},uy={class:"row"},dy={key:0,class:"mt_x50 mb_lg flex_center"},_y=ae({__name:"SearchPgc",setup(e){var $,g,C;const t=j(ot),s=A([]),a=A(!1),n=A(!0),{validQueryParams:o,updateQueryParams:i}=dt(),r=A(+o.value.page||1),u=A(0),v=A(12),f=j(Tt),h=j(xt),_=j(ut),p=j(Lt),b=j(Pt),S=A(""),y=Vt(),m=ce?At():null,w=()=>q(this,null,function*(){b(),a.value=!1,n.value=!0,h.value="";const k=Jt({keyword:f.value,search_type:"media_ft",page:r.value,page_size:v.value},p.value,S.value);try{const{result:L,numResults:Y,seid:I,v_voucher:U}=yield y.querySearchByType(k,m);n.value=!1,u.value=Y||0,s.value=L||[],h.value=I,!ce&&U&&Ct((Q,te)=>q(this,null,function*(){S.value=te==null?void 0:te.token,yield w()}),{v_voucher:U})}catch(L){a.value=!0,n.value=!1,u.value=0,s.value=[]}});!ce&&!y.isSSRVisit&&(n.value=!1,u.value=(($=y.searchTypeResponse)==null?void 0:$.numResults)||0,s.value=((g=y.searchTypeResponse)==null?void 0:g.result)||[],h.value=(C=y.searchTypeResponse)==null?void 0:C.seid,y.isSSRVisit=!0);const B=()=>{t==null||t.emit("onPageChange"),_(),setTimeout(()=>w())};return fe(f,()=>r.value=1),fe(n,k=>{k&&(s.value=[])}),fe(r,k=>i({page:k})),Kt({submitSearchHandler:()=>w()}),Dt(()=>q(this,null,function*(){yield w()})),(k,L)=>{const Y=O("ClientOnly"),I=O("v-pagenation");return l(),d("div",ly,[E(Y,null,{default:z(()=>[n.value&&!s.value.length?(l(),N(rs,{key:0})):a.value?(l(),N(Mt,{key:1})):!n.value&&!s.value.length?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!a.value&&s.value.length?(l(),d(X,{key:0},[c("div",cy,[c("div",uy,[(l(!0),d(X,null,de(s.value,U=>(l(),d("div",{key:U.media_id,class:"col_6 mb_x40"},[E(Bn,{info:U},null,8,["info"])]))),128))])]),E(Y,null,{default:z(()=>[u.value>v.value?(l(),d("div",dy,[E(I,{pageNum:r.value,"onUpdate:pageNum":L[0]||(L[0]=U=>r.value=U),total:u.value,"page-size":v.value,"show-extend-btn":!1,"show-jump-info":!1,onPageChange:B},null,8,["pageNum","total","page-size"])])):F("",!0)]),_:1})],64)):F("",!0)])}}});const vy={class:"b-user-info-card flex_start"},hy=["href"],py={class:"user-content pr_md"},fy={class:"b_text i_card_title mt_0"},my=["href","title"],gy=["title"],yy={style:{"margin-left":"3px"}},wy={class:"user-actions"},by=ae({__name:"UserInfoCard",props:{info:{}},emits:["follow","unfollow"],setup(e,{emit:t}){const s=t,a=e,n=M(()=>`//space.bilibili.com/${a.info.mid}`),o=M(()=>{var f;return((f=a.info.official_verify)==null?void 0:f.desc)||a.info.usign}),i=M(()=>`${r.value.fans}\u7C89\u4E1D \xB7 ${r.value.videos}\u4E2A\u89C6\u9891  ${Rt(o.value)}`),r=M(()=>({fans:at(a.info.fans||0),videos:at(a.info.videos||0)})),u=M(()=>{const{is_senior_member:f,level:h}=a.info;return f?7:h||0}),v={spmid:"search.search-result.up_card.6"};return(f,h)=>{const _=O("v-button"),p=Ee("report");return l(),d("div",vy,[x(c("a",{class:"mr_md",href:n.value,target:"_blank"},[E(Qs,{info:f.info,"bfs-style":"search-user"},null,8,["info"])],8,hy),[[p,{spmid:"search.search-result.up_card.1"},"msg"]]),c("div",py,[c("h2",fy,[x(c("a",{class:"text1 p_relative",href:n.value,title:f.info.uname,target:"_blank"},D(f.info.uname),9,my),[[p,{spmid:"search.search-result.up_card.8"},"msg"]]),E(_i,{class:"ml_sm v_align_baseline",level:u.value},null,8,["level"])]),c("p",{class:"b_text fs_5 text2 text_ellipsis",title:i.value},[ne(D(r.value.fans)+"\u7C89\u4E1D \xB7 "+D(r.value.videos)+"\u4E2A\u89C6\u9891 ",1),c("span",yy,D(o.value),1)],8,gy),c("div",wy,[f.info.relation?f.info.relation.followed?x((l(),N(_,{key:2,type:"grey",onClick:h[1]||(h[1]=b=>s("unfollow"))},{default:z(()=>[ne("\u5DF2\u5173\u6CE8")]),_:1},512)),[[p,v,"msg"]]):x((l(),N(_,{key:1,type:"blue",onClick:h[0]||(h[0]=b=>s("follow"))},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1},512)),[[p,v,"msg"]]):x((l(),N(_,{key:0,disabled:"",type:"blue"},{default:z(()=>[ne("+ \u5173\u6CE8")]),_:1},512)),[[p,v,"msg"]])])])])}}});var ky=ue(by,[["__scopeId","data-v-313a3d44"]]);const Cy={class:"search-page search-page-upuser i_page_container i_wrapper"},Ay={class:"conditions-order flex_between mb_sm"},$y={class:"condition-row"},Ey={class:"condition-row"},Fy={key:0},Sy={class:"media-list row mt_x40"},By={key:0,class:"mt_x50 mb_lg flex_center"},Iy=ae({__name:"SearchUpuser",setup(e){const t=j(ot),s=A([{name:"\u9ED8\u8BA4\u6392\u5E8F",order:"",sort:0,orderKey:"default"},{name:"\u7C89\u4E1D\u6570\u7531\u9AD8\u5230\u4F4E",order:"fans",sort:0,orderKey:"fans_desc"},{name:"\u7C89\u4E1D\u6570\u7531\u4F4E\u5230\u9AD8",order:"fans",sort:1,orderKey:"fans_asc"},{name:"Lv\u7B49\u7EA7\u7531\u9AD8\u5230\u4F4E",order:"level",sort:0,orderKey:"level_desc"},{name:"Lv\u7B49\u7EA7\u7531\u4F4E\u5230\u9AD8",order:"level",sort:1,orderKey:"level_asc"}]),a=A([{name:"\u5168\u90E8\u7528\u6237",type:0},{name:"UP\u4E3B\u7528\u6237",type:1},{name:"\u666E\u901A\u7528\u6237",type:2},{name:"\u8BA4\u8BC1\u7528\u6237",type:3}]),n=A([]),o=A(!1),i=A(!0),r=A(""),u=A(0),v=A(0),f=A(null),{isShowMoreConditions:h,toggleSlideMoreConditions:_}=En(f),p=A(0),b=A(36),S=j(Tt),y=j(Ve),m=j(xt),w=j(ut),B=j(Lt),$=j(Pt),{pageUsers:g,isMinMd:C}=Yt(),{validQueryParams:k,initQueryParams:L,updateQueryParams:Y}=dt(),{page:I,offset:U,resetPageParams:Q}=$n(g),te=A(""),G=Vt(),ve=ce?At():null,$e=(re,_e)=>({show:!0,spm:"search-card.all",msg:T({spmid:"search.search-result.up_card.0",up_mid:re.mid,is_live:re.is_live,card_index:_e+1,is_resident_live_room:Number(!!re.live_room)},y.value)}),H=()=>{var _e;const re=k.value;r.value=(_e=re.order)!=null?_e:"",u.value=+re.order_sort||0,v.value=+re.user_type||0,h.value=v.value>0};H();const Z=()=>q(this,null,function*(){$(),o.value=!1,i.value=!0,m.value="";const re=Jt({keyword:S.value,search_type:"bili_user",page:I.value,page_size:b.value,order:r.value,order_sort:u.value,user_type:v.value,dynamic_offset:U.value},B.value,te.value);try{const{result:_e,numResults:Ce,seid:Ne,v_voucher:Oe}=yield G.querySearchByType(re,ve);i.value=!1,p.value=Ce||0,n.value=_e||[],m.value=Ne,!ce&&Oe&&Ct((he,ie)=>q(this,null,function*(){te.value=ie==null?void 0:ie.token,yield Z()}),{v_voucher:Oe})}catch(_e){o.value=!0,i.value=!1,p.value=0,n.value=[]}}),P=()=>q(this,null,function*(){if(!n.value.length)return;const re=n.value.map(_e=>_e.mid);try{const _e=yield Os(re);n.value=n.value.map(Ce=>(Ce.relation=_e[Ce.mid],Ce))}catch(_e){n.value=n.value.map(Ce=>(Ce.relation={followed:!1,mid:Ce.mid},Ce))}}),W=()=>{t==null||t.emit("onPageChange"),w(),setTimeout(()=>Z())},J=({order:re,sort:_e})=>{r.value===re&&u.value===_e||(r.value=re,u.value=_e,I.value=1,setTimeout(()=>Z()))},oe=({type:re})=>{v.value!==re&&(v.value=re,I.value=1,setTimeout(()=>Z()))},pe=()=>{Y({page:I.value,order:r.value,order_sort:u.value,user_type:v.value})},Ie=bt(re=>{Us(re,k.value.keyword).then(()=>{const _e=n.value.find(Ce=>Ce.mid===re.mid);_e&&(_e.relation.attribute=2,_e.relation.followed=!0)})},500),we=bt(re=>{Hs(re,k.value.keyword).then(()=>{const _e=n.value.find(Ce=>Ce.mid===re.mid);_e&&(_e.relation.attribute=void 0,_e.relation.followed=!1)})},500);if(fe(S,()=>{I.value=1,r.value="",u.value=0,v.value=0}),fe(i,re=>{re&&(n.value=[])}),fe([I,r,u,v],()=>pe()),!ce){if(!G.isSSRVisit){const{result:re,numResults:_e,seid:Ce}=G.searchTypeResponse;i.value=!1,p.value=_e||0,n.value=re||[],m.value=Ce,G.isSSRVisit=!0,P()}G.$onAction(({after:re})=>{re(_e=>q(this,null,function*(){const{result:Ce,numResults:Ne,seid:Oe}=yield _e;p.value=Ne||0,n.value=Ce||[],m.value=Oe,yield P()}))})}return Dt(()=>q(this,null,function*(){yield Z()})),Kt({submitSearchHandler:()=>Z(),routeChangedHandler:()=>{L(),setTimeout(()=>{Q(),H()})}}),(re,_e)=>{const Ce=O("v-button"),Ne=O("WidgetArrow"),Oe=js,he=O("ClientOnly"),ie=O("v-pagenation"),V=Ee("report");return l(),d("div",Cy,[E(Oe,{"auto-report":{show:!0,spm:"search-filter.all",msg:T({},R(y))}},{default:z(()=>[c("div",{class:K(["search-conditions mt_lg",{mt_xxl:R(C)}])},[c("div",Ay,[c("div",$y,[(l(!0),d(X,null,de(s.value,se=>x((l(),N(Ce,{key:se.name,type:"tab",class:"mr_sm",active:r.value===se.order&&u.value===se.sort,onClick:me=>J(se)},{default:z(()=>[ne(D(se.name),1)]),_:2},1032,["active","onClick"])),[[V,{click_type:"order",order_id:se.orderKey,order_name:se.name},"msg"]])),128))]),x(E(Ce,{class:"i_button_more","active-shrink":"",onClick:R(_)},{default:z(()=>[ne(" \u66F4\u591A\u7B5B\u9009 "),E(Ne,{class:K(["i_icon_more ts_all_fast rotate_90",{rotate_n90:R(h)}])},null,8,["class"])]),_:1},8,["onClick"]),[[V,{spm:"search.filter-toggle",msg:{show:!R(h)}},"msg"]])]),c("div",{ref_key:"moreConditions",ref:f,class:"more-conditions hide ov_hidden"},[c("div",Ey,[(l(!0),d(X,null,de(a.value,se=>x((l(),N(Ce,{key:se.name,type:"tab",class:"mb_sm mr_sm",active:v.value===se.type,onClick:me=>oe(se)},{default:z(()=>[ne(D(se.name),1)]),_:2},1032,["active","onClick"])),[[V,{click_type:"up_type",type_id:se.type,type_name:se.name},"msg"]])),128))])],512)],2)]),_:1},8,["auto-report"]),E(he,null,{default:z(()=>[i.value&&!n.value.length?(l(),N(rs,{key:0})):o.value?(l(),N(Mt,{key:1})):!i.value&&!n.value.length?(l(),N(Nt,{key:2})):F("",!0)]),_:1}),!o.value&&n.value.length?(l(),d("div",Fy,[c("div",Sy,[(l(!0),d(X,null,de(n.value,(se,me)=>(l(),d("div",{key:se.mid,class:K(["col_6 col_md_4 mb_x60",{to_hide_md:me>23}])},[E(ky,{"auto-report":$e(se,me),info:se,onFollow:Re=>R(Ie)(se.relation),onUnfollow:Re=>R(we)(se.relation)},null,8,["auto-report","info","onFollow","onUnfollow"])],2))),128))]),E(he,null,{default:z(()=>[p.value>R(g)?(l(),d("div",By,[E(ie,{pageNum:R(I),"onUpdate:pageNum":_e[0]||(_e[0]=se=>Ns(I)?I.value=se:null),total:p.value,"page-size":R(g),"show-extend-btn":!1,"show-jump-info":!1,onPageChange:W},null,8,["pageNum","total","page-size"])])):F("",!0)]),_:1})])):F("",!0)])}}});var Dy=ue(Iy,[["__scopeId","data-v-5f11a3e6"]]);const Ty=[{name:"search",path:"/",component:Sv,children:[{name:"root",path:"/",redirect:"all"},{name:"all",path:"/all",component:X1},{name:"video",path:"/video",component:pi},{name:"bangumi",path:"/bangumi",component:xg},{name:"pgc",path:"/pgc",component:_y},{name:"live",path:"/live",component:ry},{name:"article",path:"/article",component:Fg},{name:"topic",path:"/topic",redirect:"all"},{name:"upuser",path:"/upuser",component:Dy}]}];function xy(e={}){return Ki({history:ce?Zi():Xi(),routes:Ty})}function Ly(e={}){const t=eo(Od),s=to(),a=xy(e);return t.config.performance=!1,t.use(s),t.use(Zl),t.use(a),t.use(so),t.use(no),t.use(ao),t.use(io),t.use(oo),t.use(ro),t.component(xs.name,xs),t.component(it.name,it),t.component(Ds.name,Ds),t.component(sa.name,sa),t.component(ea.name,ea),t.component(ta.name,ta),t.component("WidgetArrow",mr),t.component("BiliVideoCard",Rs),t.component("VImage",S_),t.component("Fragment",js),{app:t,router:a,pinia:s}}const{app:fi,router:Py,pinia:Ry}=Ly();var va;Ry.state.value=(va=window.__pinia)!=null?va:{};Ye.setTechPbCodeReport(!0);fi.component("GameButton",lo);Py.isReady().then(()=>{po(lt.get("header_theme_version",document.cookie)==="OPEN"&&lt.get("DedeUserID",document.cookie)?"":"light"),(!lt.get("DedeUserID",document.cookie)||lt.get("header_theme_version",document.cookie)!=="OPEN")&&lt.get("theme_style",document.cookie)&&lt.set("theme_style","light",{expires:365,domain:".bilibili.com"}),fi.mount("#i_cecream")});window.GIT_COMMITHASH="182bf2ef0413108e2ea1c2e65ae818b2f9c7da3d";window.GIT_VERSION="main.frontend.laputa-search@7.14.21";window.GIT_BRANCH="master";window.GIT_LASTCOMMITDATETIME="2024-01-23T14:12:25+08:00";co();export{Ny as __vite_legacy_guard};
